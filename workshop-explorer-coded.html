<script>document.write(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+V29ya3Nob3AgRXhwbG9yZXI8L3RpdGxlPgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLnRhaWx3aW5kY3NzLmNvbSI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0PgogICAgICAgIHRhaWx3aW5kLmNvbmZpZyA9IHsKICAgICAgICAgICAgdGhlbWU6IHsKICAgICAgICAgICAgICAgIGV4dGVuZDogewogICAgICAgICAgICAgICAgICAgIGNvbG9yczogewogICAgICAgICAgICAgICAgICAgICAgICAnZ3JlZW4tcHJpbWFyeSc6ICcjMjdhZTYwJywKICAgICAgICAgICAgICAgICAgICAgICAgJ2dyZWVuLXNlY29uZGFyeSc6ICcjMmVjYzcxJywKICAgICAgICAgICAgICAgICAgICAgICAgJ2dyZWVuLWxpZ2h0JzogJyNmNGZmZjQnLAogICAgICAgICAgICAgICAgICAgICAgICAnYnJhbmQtZGFyayc6ICcjMmMzZTUwJywKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6IHsKICAgICAgICAgICAgICAgICAgICAgICAgc2FuczogWydTZWdvZSBVSScsICdUYWhvbWEnLCAnR2VuZXZhJywgJ1ZlcmRhbmEnLCAnc2Fucy1zZXJpZiddLAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gRGlzYWJsZSByaWdodC1jbGljawogIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgZXZlbnQgPT4gZXZlbnQucHJldmVudERlZmF1bHQoKSk7CgogIC8vIERpc2FibGUgRjEyLCBDdHJsK1NoaWZ0K0ksIEN0cmwrVQogIGRvY3VtZW50Lm9ua2V5ZG93biA9IGZ1bmN0aW9uKGUpIHsKICAgIGlmKGV2ZW50LmtleUNvZGUgPT0gMTIzKSByZXR1cm4gZmFsc2U7CiAgICBpZihlLmN0cmxLZXkgJiYgZS5zaGlmdEtleSAmJiBlLmtleUNvZGUgPT0gJ0knLmNoYXJDb2RlQXQoMCkpIHJldHVybiBmYWxzZTsKICAgIGlmKGUuY3RybEtleSAmJiBlLmtleUNvZGUgPT0gJ1UnLmNoYXJDb2RlQXQoMCkpIHJldHVybiBmYWxzZTsKICB9OwogICAgPC9zY3JpcHQ+CiAgICA8c3R5bGU+CiAgICAgICAgLyogQ3VzdG9tIFNjcm9sbGJhciAqLwogICAgICAgIDo6LXdlYmtpdC1zY3JvbGxiYXIgeyB3aWR0aDogOHB4OyB9CiAgICAgICAgOjotd2Via2l0LXNjcm9sbGJhci10cmFjayB7IGJhY2tncm91bmQ6ICNmMWYxZjE7IH0KICAgICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHsgYmFja2dyb3VuZDogI2NjYzsgYm9yZGVyLXJhZGl1czogNHB4OyB9CiAgICAgICAgOjotd2Via2l0LXNjcm9sbGJhci10aHVtYjpob3ZlciB7IGJhY2tncm91bmQ6ICNhYWE7IH0KCiAgICAgICAgLnRhYi1wYW5lbCB7CiAgICAgICAgICAgIGFuaW1hdGlvbjogZmFkZUluIDAuM3MgZWFzZS1pbi1vdXQ7CiAgICAgICAgfQoKICAgICAgICBAa2V5ZnJhbWVzIGZhZGVJbiB7CiAgICAgICAgICAgIGZyb20geyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMTBweCk7IH0KICAgICAgICAgICAgdG8geyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7IH0KICAgICAgICB9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5IGNsYXNzPSJiZy1ncmF5LTUwIHRleHQtZ3JheS04MDAgaC1zY3JlZW4gZmxleCBmbGV4LWNvbCBvdmVyZmxvdy1oaWRkZW4iPgoKICAgIAogICAgPGhlYWRlciBjbGFzcz0iYmctYnJhbmQtZGFyayB0ZXh0LXdoaXRlIHNoYWRvdy1tZCB6LTIwIj4KICAgICAgICA8ZGl2IGNsYXNzPSJtYXgtdy03eGwgbXgtYXV0byBweC00IHNtOnB4LTYgbGc6cHgtOCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggZmxleC1jb2wgbWQ6ZmxleC1yb3cganVzdGlmeS1iZXR3ZWVuIGgtYXV0byBtZDpoLTIwIGl0ZW1zLWNlbnRlciBweS0yIG1kOnB5LTAiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbWItMiBtZDptYi0wIHdoaXRlc3BhY2Utbm93cmFwIj4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idGV4dC0yeGwiPvCfm6DvuI88L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCB0cmFja2luZy13aWRlIj5Xb3Jrc2hvcCA8c3BhbiBjbGFzcz0idGV4dC1ncmVlbi1zZWNvbmRhcnkiPkV4cGxvcmVyPC9zcGFuPjxzdXAgY2xhc3M9InRleHQteHMgdGV4dC1ncmF5LTQwMCBtbC0xIj7CqSBNYWtlciBNaW5kejwvc3VwPjwvaDE+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggZmxleC13cmFwIGp1c3RpZnktY2VudGVyIGdhcC0yIiBpZD0ibmF2LWJ1dHRvbnMiPgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9oZWFkZXI+CgogICAgPGRpdiBjbGFzcz0iZmxleCBmbGV4LTEgb3ZlcmZsb3ctaGlkZGVuIj4KICAgICAgICAKICAgICAgICAKICAgICAgICA8YXNpZGUgY2xhc3M9InctNjQgYmctd2hpdGUgYm9yZGVyLXIgYm9yZGVyLWdyYXktMjAwIGZsZXggZmxleC1jb2wgb3ZlcmZsb3cteS1hdXRvIHotMTAiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwLTQgYm9yZGVyLWIgYm9yZGVyLWdyYXktMTAwIj4KICAgICAgICAgICAgICAgIDxoMiBjbGFzcz0idGV4dC14cyBmb250LWJvbGQgdGV4dC1ncmF5LTQwMCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXIgbWItMiI+U2VsZWN0IExlc3NvbjwvaDI+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJsZXNzb24tbGlzdCIgY2xhc3M9InNwYWNlLXktMiI+CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InAtNCBtdC1hdXRvIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRleHQteHMgdGV4dC1ncmF5LTQwMCB0ZXh0LWNlbnRlciI+CiAgICAgICAgICAgICAgICAgICAgU2Vzc2lvbiBBY3RpdmU8YnI+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9InNlc3Npb24tc3RhdHVzIiBjbGFzcz0idGV4dC1ncmVlbi01MDAgZm9udC1ib2xkIj5ObyBDYXRlZ29yeSBTZWxlY3RlZDwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2FzaWRlPgoKICAgICAgICAKICAgICAgICA8bWFpbiBjbGFzcz0iZmxleC0xIG92ZXJmbG93LXktYXV0byBwLTYgbWQ6cC0xMCByZWxhdGl2ZSIgaWQ9Im1haW4tY29udGVudCI+CiAgICAgICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBpZD0id2VsY29tZS12aWV3IiBjbGFzcz0iaC1mdWxsIGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtY2VudGVyIHRleHQtZ3JheS01MDAiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGV4dC02eGwgbWItNCI+8J+UkDwvZGl2PgogICAgICAgICAgICAgICAgPGgyIGNsYXNzPSJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC1ncmF5LTcwMCI+U2VsZWN0IGEgV29ya3Nob3AgQ2F0ZWdvcnk8L2gyPgogICAgICAgICAgICAgICAgPHAgY2xhc3M9Im10LTIgbWF4LXctbWQiPlBsZWFzZSBzZWxlY3QgYSBjYXRlZ29yeSBmcm9tIHRoZSB0b3AgbWVudS4gWW91IHdpbGwgbmVlZCBhIHBhc3N3b3JkIHRvIGFjY2VzcyB0aGUgY29udGVudC48L3A+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgaWQ9InRvcGljLXZpZXciIGNsYXNzPSJoaWRkZW4gbWF4LXctNXhsIG14LWF1dG8iPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibWItNiBib3JkZXItYiBwYi00Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB0ZXh0LXNtIHRleHQtZ3JlZW4tcHJpbWFyeSBmb250LWJvbGQgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGUgbWItMSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJjcnVtYi1jYXRlZ29yeSI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxoMSBpZD0idG9waWMtdGl0bGUiIGNsYXNzPSJ0ZXh0LTN4bCBmb250LWV4dHJhYm9sZCB0ZXh0LWdyYXktOTAwIj48L2gxPgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGJvcmRlci1iIGJvcmRlci1ncmF5LTIwMCBtYi02Ij4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IkFwcC5zZXRUYWIoJ2xlc3NvbicpIiBpZD0idGFiLWxlc3NvbiIgY2xhc3M9InB4LTYgcHktMyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNTAwIGhvdmVyOnRleHQtZ3JlZW4tcHJpbWFyeSBib3JkZXItYi0yIGJvcmRlci10cmFuc3BhcmVudCBob3Zlcjpib3JkZXItZ3JlZW4tcHJpbWFyeSBmb2N1czpvdXRsaW5lLW5vbmUiPvCfk5YgTGVzc29uPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJBcHAuc2V0VGFiKCdzaW11bGF0aW9uJykiIGlkPSJ0YWItc2ltdWxhdGlvbiIgY2xhc3M9InB4LTYgcHktMyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNTAwIGhvdmVyOnRleHQtZ3JlZW4tcHJpbWFyeSBib3JkZXItYi0yIGJvcmRlci10cmFuc3BhcmVudCBob3Zlcjpib3JkZXItZ3JlZW4tcHJpbWFyeSBmb2N1czpvdXRsaW5lLW5vbmUiPvCfjq4gU2ltdWxhdGlvbjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iQXBwLnNldFRhYigncXVpeicpIiBpZD0idGFiLXF1aXoiIGNsYXNzPSJweC02IHB5LTMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTUwMCBob3Zlcjp0ZXh0LWdyZWVuLXByaW1hcnkgYm9yZGVyLWItMiBib3JkZXItdHJhbnNwYXJlbnQgaG92ZXI6Ym9yZGVyLWdyZWVuLXByaW1hcnkgZm9jdXM6b3V0bGluZS1ub25lIj7wn5OdIFF1aXo8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPGRpdiBpZD0icGFuZWwtbGVzc29uIiBjbGFzcz0idGFiLXBhbmVsIGhpZGRlbiBwcm9zZSBtYXgtdy1ub25lIHRleHQtZ3JheS03MDAgbGVhZGluZy1yZWxheGVkIj4KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgaWQ9InBhbmVsLXNpbXVsYXRpb24iIGNsYXNzPSJ0YWItcGFuZWwgaGlkZGVuIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJzaW0taG9zdCIgY2xhc3M9InctZnVsbCBiZy13aGl0ZSByb3VuZGVkLXhsIHNoYWRvdy1zbSBib3JkZXIgYm9yZGVyLWdyYXktMjAwIG1pbi1oLVs1MDBweF0gcC00IHJlbGF0aXZlIj4KICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJwYW5lbC1xdWl6IiBjbGFzcz0idGFiLXBhbmVsIGhpZGRlbiI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibWF4LXctMnhsIG14LWF1dG8gYmctd2hpdGUgcm91bmRlZC14bCBzaGFkb3ctc20gYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBwLTgiPgogICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTYgdGV4dC1ncmF5LTgwMCI+S25vd2xlZGdlIENoZWNrPC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0icXVpei1jb250YWluZXIiIGNsYXNzPSJzcGFjZS15LTYiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJxdWl6LXJlc3VsdHMiIGNsYXNzPSJoaWRkZW4gbXQtNiBwLTQgYmctZ3JlZW4tNTAgYm9yZGVyIGJvcmRlci1ncmVlbi0yMDAgcm91bmRlZC1sZyB0ZXh0LWNlbnRlciI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iQXBwLnN1Ym1pdFF1aXooKSIgaWQ9ImJ0bi1zdWJtaXQtcXVpeiIgY2xhc3M9Im10LTggdy1mdWxsIGJnLWdyZWVuLXByaW1hcnkgdGV4dC13aGl0ZSBweS0zIHJvdW5kZWQtbGcgZm9udC1ib2xkIGhvdmVyOmJnLWdyZWVuLXNlY29uZGFyeSB0cmFuc2l0aW9uIHNoYWRvdy1tZCI+U3VibWl0IEFuc3dlcnM8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9tYWluPgogICAgPC9kaXY+CgogICAgCiAgICA8ZGl2IGlkPSJwYXNzd29yZC1tb2RhbCIgY2xhc3M9ImZpeGVkIGluc2V0LTAgYmctYmxhY2sgYmctb3BhY2l0eS01MCBoaWRkZW4gaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHotNTAiPgogICAgICAgIDxkaXYgY2xhc3M9ImJnLXdoaXRlIHJvdW5kZWQtbGcgcC02IHctOTYgc2hhZG93LXhsIj4KICAgICAgICAgICAgPGgzIGNsYXNzPSJ0ZXh0LWxnIGZvbnQtYm9sZCBtYi00IHRleHQtZ3JheS04MDAiIGlkPSJtb2RhbC10aXRsZSI+RW50ZXIgUGFzc3dvcmQ8L2gzPgogICAgICAgICAgICA8aW5wdXQgdHlwZT0icGFzc3dvcmQiIGlkPSJtb2RhbC1pbnB1dCIgY2xhc3M9InctZnVsbCBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHAtMiByb3VuZGVkIG1iLTQgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1ncmVlbi1wcmltYXJ5IiBwbGFjZWhvbGRlcj0iUGFzc3dvcmQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktZW5kIGdhcC0yIj4KICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iQXBwLmNhbmNlbFBhc3N3b3JkKCkiIGNsYXNzPSJweC00IHB5LTIgdGV4dC1ncmF5LTYwMCBob3ZlcjpiZy1ncmF5LTEwMCByb3VuZGVkIGZvbnQtbWVkaXVtIj5DYW5jZWw8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iQXBwLnN1Ym1pdFBhc3N3b3JkKCkiIGNsYXNzPSJweC00IHB5LTIgYmctZ3JlZW4tcHJpbWFyeSB0ZXh0LXdoaXRlIHJvdW5kZWQgaG92ZXI6YmctZ3JlZW4tc2Vjb25kYXJ5IGZvbnQtbWVkaXVtIj5TdWJtaXQ8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGlkPSJhbGVydC1tb2RhbCIgY2xhc3M9ImZpeGVkIGluc2V0LTAgYmctYmxhY2sgYmctb3BhY2l0eS01MCBoaWRkZW4gaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHotNTAiPgogICAgICAgIDxkaXYgY2xhc3M9ImJnLXdoaXRlIHJvdW5kZWQtbGcgcC02IHctODAgc2hhZG93LXhsIHRleHQtY2VudGVyIj4KICAgICAgICAgICAgPGRpdiBpZD0iYWxlcnQtaWNvbiIgY2xhc3M9InRleHQtNHhsIG1iLTIiPjwvZGl2PgogICAgICAgICAgICA8aDMgaWQ9ImFsZXJ0LW1lc3NhZ2UiIGNsYXNzPSJ0ZXh0LWxnIGZvbnQtYm9sZCBtYi00IHRleHQtZ3JheS04MDAiPjwvaDM+CiAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FsZXJ0LW1vZGFsJykuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGVydC1tb2RhbCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2ZsZXgnKTsiIGNsYXNzPSJweC00IHB5LTIgYmctZ3JheS0yMDAgaG92ZXI6YmctZ3JheS0zMDAgdGV4dC1ncmF5LTgwMCByb3VuZGVkIGZvbnQtbWVkaXVtIj5DbG9zZTwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPHNjcmlwdD4KICAgICAgICAvLyAtLS0gQ1VSUklDVUxVTSBEQVRBIC0tLQogICAgICAgIGNvbnN0IGN1cnJpY3VsdW0gPSB7CiAgICAgICAgICAgICdtb3Rpb24nOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlNjaWVuY2Ugb2YgTW90aW9uIiwKICAgICAgICAgICAgICAgIHBhc3N3b3JkSGFzaDogIjMyOTcxMDYiLAogICAgICAgICAgICAgICAgbGVzc29uczogWwogICAgICAgICAgICAgICAgICAgIHsgCiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnbDEnLCAKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdMZXNzb24gMTogSW50cm9kdWN0aW9uIHRvIEZvcmNlcyAmIE1vdGlvbicsIAogICAgICAgICAgICAgICAgICAgICAgICBsZXNzb246IGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIG1iLTQgdGV4dC1ibHVlLTgwMCI+SW50cm9kdWN0aW9uIHRvIEZvcmNlcyAmIE1vdGlvbjwvaDM+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjEuIFRoZSBTY2llbnRpZmljIE1ldGhvZDwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+U2NpZW50aXN0cyB1c2UgYSBzdHJ1Y3R1cmVkIGFwcHJvYWNoIHRvIHVuZGVyc3RhbmQgdGhlIHdvcmxkOjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvbCBjbGFzcz0ibGlzdC1kZWNpbWFsIG1sLTggbWItNCBzcGFjZS15LTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPk9ic2VydmF0aW9uOjwvc3Ryb25nPiBOb3RpY2Ugc29tZXRoaW5nIGludGVyZXN0aW5nLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+UXVlc3Rpb246PC9zdHJvbmc+IEFzayAiV2h5PyIgb3IgIkhvdz8iLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+SHlwb3RoZXNpczo8L3N0cm9uZz4gTWFrZSBhIHByZWRpY3Rpb24gKGFuIGVkdWNhdGVkIGd1ZXNzKS48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPkV4cGVyaW1lbnQ6PC9zdHJvbmc+IFRlc3QgdGhlIGh5cG90aGVzaXMgd2l0aCBhIGZhaXIgdGVzdC48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPkFuYWx5c2lzOjwvc3Ryb25nPiBMb29rIGF0IHRoZSBkYXRhLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+Q29uY2x1c2lvbjo8L3N0cm9uZz4gV2FzIHRoZSBoeXBvdGhlc2lzIGNvcnJlY3Q/PC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvb2w+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjIuIFdoYXQgaXMgYSBGb3JjZT88L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPkEgPHN0cm9uZz5Gb3JjZTwvc3Ryb25nPiBpcyBzaW1wbHkgYSA8c3Ryb25nPlB1c2g8L3N0cm9uZz4gb3IgYSA8c3Ryb25nPlB1bGw8L3N0cm9uZz4gdXBvbiBhbiBvYmplY3QgcmVzdWx0aW5nIGZyb20gaXRzIGludGVyYWN0aW9uIHdpdGggYW5vdGhlciBvYmplY3QuIEZvcmNlcyBoYXZlIGJvdGggbWFnbml0dWRlIChzdHJlbmd0aCkgYW5kIGRpcmVjdGlvbi48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9Imxpc3QtZGlzYyBtbC04IG1iLTQgc3BhY2UteS0xIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5Vbml0Ojwvc3Ryb25nPiBOZXd0b24gKE4pLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+MSBOZXd0b246PC9zdHJvbmc+IFRoZSBmb3JjZSByZXF1aXJlZCB0byBhY2NlbGVyYXRlIGEgMSBrZyBtYXNzIGJ5IDEgbS9zwrIuIChBcHByb3guIHRoZSB3ZWlnaHQgb2YgYSBzbWFsbCBhcHBsZSkuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjMuIFR5cGVzIG9mIEZvcmNlczwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGdhcC00IG1iLTQgdGV4dC1zbSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctYmx1ZS01MCBwLTMgcm91bmRlZCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5Db250YWN0IEZvcmNlczwvc3Ryb25nPiAoVG91Y2ggcmVxdWlyZWQpPGJyPi0gRnJpY3Rpb248YnI+LSBUZW5zaW9uPGJyPi0gTm9ybWFsIEZvcmNlPGJyPi0gQWlyIFJlc2lzdGFuY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy15ZWxsb3ctNTAgcC0zIHJvdW5kZWQgYm9yZGVyIGJvcmRlci15ZWxsb3ctMjAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5Ob24tQ29udGFjdCBGb3JjZXM8L3N0cm9uZz4gKEFjdGlvbiBhdCBhIGRpc3RhbmNlKTxicj4tIEdyYXZpdGF0aW9uYWwgRm9yY2U8YnI+LSBNYWduZXRpYyBGb3JjZTxicj4tIEVsZWN0cmljYWwgRm9yY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj40LiBOZXQgRm9yY2UgJiBNb3Rpb248L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPjxzdHJvbmc+TmV0IEZvcmNlPC9zdHJvbmc+IGlzIHRoZSBzdW0gb2YgYWxsIGZvcmNlcyBhY3Rpbmcgb24gYW4gb2JqZWN0LjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0ibGlzdC1kaXNjIG1sLTggbWItNCBzcGFjZS15LTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPkJhbGFuY2VkIEZvcmNlcyAoTmV0IEZvcmNlID0gMCk6PC9zdHJvbmc+IE9iamVjdCBzdGF5cyBhdCByZXN0IE9SIGNvbnRpbnVlcyBtb3ZpbmcgYXQgY29uc3RhbnQgdmVsb2NpdHkuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5VbmJhbGFuY2VkIEZvcmNlcyAoTmV0IEZvcmNlIOKJoCAwKTo8L3N0cm9uZz4gT2JqZWN0IGFjY2VsZXJhdGVzIChjaGFuZ2VzIHNwZWVkIG9yIGRpcmVjdGlvbikuIFRvIGNoYW5nZSB0aGUgZGlyZWN0aW9uIG9mIGEgbW92aW5nIG9iamVjdCwgYW4gdW5iYWxhbmNlZCBmb3JjZSBtdXN0IGFjdCBvbiBpdCBzaWRld2F5cy48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+NS4gRnJpY3Rpb248L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPjxzdHJvbmc+RnJpY3Rpb248L3N0cm9uZz4gaXMgYSBmb3JjZSB0aGF0IG9wcG9zZXMgbW90aW9uIGJldHdlZW4gdHdvIHN1cmZhY2VzIGluIGNvbnRhY3QuIEl0IGRlcGVuZHMgb24gdGhlIHRleHR1cmUgb2YgdGhlIHN1cmZhY2VzIGFuZCBob3cgaGFyZCB0aGV5IGFyZSBwcmVzc2VkIHRvZ2V0aGVyLjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij48c3Ryb25nPlJlYWwgV29ybGQgQXBwbGljYXRpb246PC9zdHJvbmc+IEZyaWN0aW9uIGFsbG93cyB1cyB0byB3YWxrIHdpdGhvdXQgc2xpcHBpbmcgYW5kIGNhciBicmFrZXMgdG8gc3RvcCBhIHZlaGljbGUuIEhvd2V2ZXIsIGl0IGFsc28gY2F1c2VzIHdlYXIgYW5kIHRlYXIgb24gbWFjaGluZXJ5LjwvcD4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+Ni4gQ2VudGVyIG9mIE1hc3M8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPlRoZSA8c3Ryb25nPkNlbnRlciBvZiBNYXNzPC9zdHJvbmc+IGlzIHRoZSBhdmVyYWdlIHBvc2l0aW9uIG9mIGFsbCB0aGUgbWFzcyBpbiBhbiBvYmplY3QuIEl0J3MgdGhlIHBvaW50IHdoZXJlIHRoZSBvYmplY3QgY2FuIGJlIGJhbGFuY2VkLiBGb3IgYSBzeW1tZXRyaWNhbCBvYmplY3QsIGl0J3MgaW4gdGhlIGNlbnRlci4gRm9yIGlycmVndWxhciBvYmplY3RzLCBpdCBzaGlmdHMgdG93YXJkcyB0aGUgaGVhdmllciBzaWRlLjwvcD4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+8J+PoCBIYW5kcy1PbiBBY3Rpdml0aWVzPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJnLWdyZWVuLTUwIHAtNCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItZ3JlZW4tMjAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9Imxpc3QtZGlzYyBtbC02IHNwYWNlLXktMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPk1lYXN1cmUgRm9yY2U6PC9zdHJvbmc+IEF0dGFjaCBhIHJ1YmJlciBiYW5kIHRvIGFuIG9iamVjdCAobGlrZSBhIHNob2UpLiBQdWxsIGl0IGFjcm9zcyBhIHRhYmxlLiBNZWFzdXJlIGhvdyBtdWNoIHRoZSBiYW5kIHN0cmV0Y2hlcyAodGhpcyByZXByZXNlbnRzIGZvcmNlKSB0byBzdGFydCBtb3ZpbmcgaXQgdnMga2VlcGluZyBpdCBtb3ZpbmcuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+RXhwbG9yZSBGcmljdGlvbjo8L3N0cm9uZz4gUHVsbCB0aGUgc2FtZSBvYmplY3QgYWNyb3NzIGRpZmZlcmVudCBzdXJmYWNlcyAoY2FycGV0LCB0aWxlLCBpY2UpLiBDb21wYXJlIHRoZSBydWJiZXIgYmFuZCBzdHJldGNoLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPkZpbmQgQ2VudGVyIG9mIE1hc3M6PC9zdHJvbmc+IFRyeSB0byBiYWxhbmNlIGEgYnJvb21zdGljayBvbiBvbmUgZmluZ2VyLiBNb3ZlIHlvdXIgZmluZ2VyIHVudGlsIGl0IHN0YXlzIGxldmVsLiBUaGF0IHBvaW50IGlzIHRoZSBjZW50ZXIgb2YgbWFzcyE8L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgYCwKICAgICAgICAgICAgICAgICAgICAgICAgc2ltVHlwZTogJ21vdGlvbkxhYicsCiAgICAgICAgICAgICAgICAgICAgICAgIHF1aXo6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIldoYXQgaXMgdGhlIHVuaXQgb2YgZm9yY2U/Iiwgb3B0aW9uczogWyJKb3VsZSIsICJXYXR0IiwgIk5ld3RvbiIsICJNZXRlciJdLCBhOiAyIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJXaGljaCBpcyBhIG5vbi1jb250YWN0IGZvcmNlPyIsIG9wdGlvbnM6IFsiRnJpY3Rpb24iLCAiVGVuc2lvbiIsICJHcmF2aXR5IiwgIkFpciBSZXNpc3RhbmNlIl0sIGE6IDIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIklmIGZvcmNlcyBhcmUgYmFsYW5jZWQsIGFuIG9iamVjdDoiLCBvcHRpb25zOiBbIkFjY2VsZXJhdGVzIiwgIlN0b3BzIGltbWVkaWF0ZWx5IiwgIk1haW50YWlucyBjb25zdGFudCB2ZWxvY2l0eSIsICJFeHBsb2RlcyJdLCBhOiAyIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJGcmljdGlvbiBhY3RzIGluIHdoaWNoIGRpcmVjdGlvbj8iLCBvcHRpb25zOiBbIlNhbWUgYXMgbW90aW9uIiwgIk9wcG9zaXRlIHRvIG1vdGlvbiIsICJQZXJwZW5kaWN1bGFyIHRvIG1vdGlvbiIsICJEb3dud2FyZHMiXSwgYTogMSB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiVGhlIHBvaW50IHdoZXJlIGFuIG9iamVjdCBiYWxhbmNlcyBpcyBjYWxsZWQ6Iiwgb3B0aW9uczogWyJDZW50ZXIgb2YgR3Jhdml0eS9NYXNzIiwgIkZ1bGNydW0iLCAiTWlkcG9pbnQiLCAiVmVydGV4Il0sIGE6IDAgfQogICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnbDInLAogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0xlc3NvbiAyOiBOZXd0b25cJ3MgTGF3cyAmIEluZXJ0aWEnLAogICAgICAgICAgICAgICAgICAgICAgICBsZXNzb246IGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIG1iLTQgdGV4dC1ibHVlLTgwMCI+TmV3dG9uJ3MgTGF3cyAmIEluZXJ0aWE8L2gzPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj4xLiBJbmVydGlhOiBUaGUgUmVzaXN0YW5jZSB0byBDaGFuZ2U8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPjxzdHJvbmc+SW5lcnRpYTwvc3Ryb25nPiBpcyB0aGUgdGVuZGVuY3kgb2YgYW4gb2JqZWN0IHRvIHJlc2lzdCBjaGFuZ2VzIGluIGl0cyBzdGF0ZSBvZiBtb3Rpb24uIElmIGl0J3MgcmVzdGluZywgaXQgd2FudHMgdG8gc3RheSByZXN0aW5nLiBJZiBpdCdzIG1vdmluZywgaXQgd2FudHMgdG8ga2VlcCBtb3ZpbmcuPC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPjxzdHJvbmc+TWFzczwvc3Ryb25nPiBpcyBhIG1lYXN1cmUgb2YgaW5lcnRpYS4gVGhlIG1vcmUgbWFzcyBhbiBvYmplY3QgaGFzLCB0aGUgaGFyZGVyIGl0IGlzIHRvIHN0YXJ0IG1vdmluZyBpdCBvciBzdG9wIGl0LjwvcD4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+Mi4gTmV3dG9uJ3MgRmlyc3QgTGF3IChMYXcgb2YgSW5lcnRpYSk8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctYmx1ZS01MCBwLTQgcm91bmRlZC1sZyBib3JkZXItbC00IGJvcmRlci1ibHVlLTUwMCBtYi00Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD4iQW4gb2JqZWN0IGF0IHJlc3Qgc3RheXMgYXQgcmVzdCBhbmQgYW4gb2JqZWN0IGluIG1vdGlvbiBzdGF5cyBpbiBtb3Rpb24gd2l0aCB0aGUgc2FtZSBzcGVlZCBhbmQgaW4gdGhlIHNhbWUgZGlyZWN0aW9uIHVubGVzcyBhY3RlZCB1cG9uIGJ5IGFuIHVuYmFsYW5jZWQgZm9yY2UuIjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj4zLiBOZXd0b24ncyBTZWNvbmQgTGF3IChGPW1hKTwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+VGhlIGFjY2VsZXJhdGlvbiBvZiBhbiBvYmplY3QgZGVwZW5kcyBvbiB0aGUgPHN0cm9uZz5OZXQgRm9yY2U8L3N0cm9uZz4gYWN0aW5nIG9uIGl0IGFuZCB0aGUgPHN0cm9uZz5NYXNzPC9zdHJvbmc+IG9mIHRoZSBvYmplY3QuPC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9ImZvbnQtbW9ubyBiZy1ncmF5LTEwMCBwLTIgcm91bmRlZCB0ZXh0LWNlbnRlciBtYi00Ij5Gb3JjZSA9IE1hc3Mgw5cgQWNjZWxlcmF0aW9uPC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJsaXN0LWRpc2MgbWwtOCBtYi00IHNwYWNlLXktMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPk1vcmUgRm9yY2UgPSBNb3JlIEFjY2VsZXJhdGlvbi48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5Nb3JlIE1hc3MgPSBMZXNzIEFjY2VsZXJhdGlvbiAoZm9yIHRoZSBzYW1lIGZvcmNlKS48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+NC4gTmV3dG9uJ3MgVGhpcmQgTGF3IChBY3Rpb24tUmVhY3Rpb24pPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij4iRm9yIGV2ZXJ5IGFjdGlvbiwgdGhlcmUgaXMgYW4gZXF1YWwgYW5kIG9wcG9zaXRlIHJlYWN0aW9uLiI8L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+Rm9yY2VzIGFsd2F5cyBjb21lIGluIHBhaXJzLiBJZiB5b3UgcHVzaCBvbiBhIHdhbGwsIHRoZSB3YWxsIHB1c2hlcyBiYWNrIG9uIHlvdSB3aXRoIHRoZSBzYW1lIGZvcmNlLjwvcD4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+NS4gUm90YXRpb25hbCBJbmVydGlhPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij5KdXN0IGFzIG1hc3MgcmVzaXN0cyBsaW5lYXIgbW90aW9uLCA8c3Ryb25nPlJvdGF0aW9uYWwgSW5lcnRpYTwvc3Ryb25nPiAoTW9tZW50IG9mIEluZXJ0aWEpIHJlc2lzdHMgcm90YXRpb25hbCBtb3Rpb24uIEl0IGRlcGVuZHMgb24gbWFzcyBhbmQgPGVtPmhvdyBmYXIgdGhhdCBtYXNzIGlzIGRpc3RyaWJ1dGVkIGZyb20gdGhlIGNlbnRlciBvZiByb3RhdGlvbjwvZW0+LjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij48ZW0+RXhhbXBsZTo8L2VtPiBBbiBpY2Ugc2thdGVyIHNwaW5zIGZhc3RlciB3aGVuIHB1bGxpbmcgYXJtcyBpbiAocmVkdWNpbmcgcm90YXRpb25hbCBpbmVydGlhKSBhbmQgc2xvd2VyIHdoZW4gZXh0ZW5kaW5nIGFybXMuPC9wPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj42LiBHcmF2aXR5ICYgRmFsbGluZyBPYmplY3RzPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij48c3Ryb25nPkRvZXMgZ3Jhdml0eSBhZmZlY3QgYWxsIG9iamVjdHMgZXF1YWxseT88L3N0cm9uZz4gWWVzISBJbiBhIHZhY3V1bSAobm8gYWlyIHJlc2lzdGFuY2UpLCBhIGZlYXRoZXIgYW5kIGEgaGFtbWVyIGZhbGwgYXQgdGhlIHNhbWUgcmF0ZS4gR3Jhdml0eSBhY2NlbGVyYXRlcyBldmVyeXRoaW5nIGF0IHJvdWdobHkgPHN0cm9uZz45LjggbS9zwrI8L3N0cm9uZz4gb24gRWFydGgsIHJlZ2FyZGxlc3Mgb2YgbWFzcy48L3A+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPvCfj6AgRXhwZXJpbWVudHMgdG8gVHJ5PC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJnLWdyZWVuLTUwIHAtNCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItZ3JlZW4tMjAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9Imxpc3QtZGlzYyBtbC02IHNwYWNlLXktMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPkluZXJ0aWEgVHJpY2s6PC9zdHJvbmc+IFBsYWNlIGEgcGxheWluZyBjYXJkIG92ZXIgYSBjdXAgYW5kIHB1dCBhIGNvaW4gb24gdG9wLiBGbGljayB0aGUgY2FyZCBob3Jpem9udGFsbHkuIFRoZSBjYXJkIGZsaWVzIGF3YXksIGJ1dCB0aGUgY29pbiAoZHVlIHRvIGluZXJ0aWEpIGRyb3BzIHN0cmFpZ2h0IGludG8gdGhlIGN1cCE8L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5CYWxsb29uIFJvY2tldCAoM3JkIExhdyk6PC9zdHJvbmc+IFRhcGUgYSBzdHJhdyB0byBhIGJhbGxvb24uIFRocmVhZCBhIHN0cmluZyB0aHJvdWdoIHRoZSBzdHJhdy4gQmxvdyB1cCB0aGUgYmFsbG9vbiBhbmQgbGV0IGdvLiBBaXIgc2hvb3RzIGJhY2sgKEFjdGlvbiksIGJhbGxvb24gc2hvb3RzIGZvcndhcmQgKFJlYWN0aW9uKS48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5UaGUgSGVhdnkgQm94ICgybmQgTGF3KTo8L3N0cm9uZz4gVHJ5IHB1c2hpbmcgYW4gZW1wdHkgYm94IHZzLiBhIGJveCBmdWxsIG9mIGJvb2tzIHdpdGggdGhlIHNhbWUgc3RyZW5ndGguIFRoZSBmdWxsIGJveCBhY2NlbGVyYXRlcyBtdWNoIHNsb3dlci48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgYCwKICAgICAgICAgICAgICAgICAgICAgICAgc2ltVHlwZTogJ25ld3RvbkxhYicsCiAgICAgICAgICAgICAgICAgICAgICAgIHF1aXo6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIk5ld3RvbidzIEZpcnN0IExhdyBpcyBhbHNvIGtub3duIGFzIHRoZSBMYXcgb2Y6Iiwgb3B0aW9uczogWyJHcmF2aXR5IiwgIkluZXJ0aWEiLCAiQWNjZWxlcmF0aW9uIiwgIkFjdGlvbi1SZWFjdGlvbiJdLCBhOiAxIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJJZiB5b3UgZG91YmxlIHRoZSBtYXNzIG9mIGFuIG9iamVjdCBidXQga2VlcCBmb3JjZSBjb25zdGFudCwgYWNjZWxlcmF0aW9uOiIsIG9wdGlvbnM6IFsiRG91YmxlcyIsICJIYWx2ZXMiLCAiU3RheXMgdGhlIHNhbWUiLCAiVHJpcGxlcyJdLCBhOiAxIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJBY3Rpb24gYW5kIFJlYWN0aW9uIGZvcmNlcyBhcmU6Iiwgb3B0aW9uczogWyJFcXVhbCBhbmQgT3Bwb3NpdGUiLCAiVW5lcXVhbCIsICJJbiB0aGUgc2FtZSBkaXJlY3Rpb24iLCAiVW5yZWxhdGVkIl0sIGE6IDAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIldoeSBkb2VzIGEgZmVhdGhlciBmYWxsIHNsb3dlciB0aGFuIGEgaGFtbWVyIG9uIEVhcnRoPyIsIG9wdGlvbnM6IFsiTGVzcyBHcmF2aXR5IiwgIkFpciBSZXNpc3RhbmNlIiwgIkxlc3MgTWFzcyIsICJNYWduZXRpYyBGb3JjZSJdLCBhOiAxIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJSb3RhdGlvbmFsIEluZXJ0aWEgZGVwZW5kcyBvbiBtYXNzIGFuZDoiLCBvcHRpb25zOiBbIkNvbG9yIiwgIlRlbXBlcmF0dXJlIiwgIkRpc3RyaWJ1dGlvbiBvZiBtYXNzIiwgIlZlbG9jaXR5Il0sIGE6IDIgfQogICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnbDMnLAogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0xlc3NvbiAzOiBXb3JrLCBFbmVyZ3kgJiBJbmNsaW5lZCBQbGFuZXMnLAogICAgICAgICAgICAgICAgICAgICAgICBsZXNzb246IGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIG1iLTQgdGV4dC1ibHVlLTgwMCI+V29yaywgRW5lcmd5ICYgSW5jbGluZWQgUGxhbmVzPC9oMz4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+MS4gV2hhdCBpcyBFbmVyZ3kgJiBXb3JrPzwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+PHN0cm9uZz5FbmVyZ3k8L3N0cm9uZz4gaXMgdGhlIGFiaWxpdHkgdG8gY2F1c2UgY2hhbmdlIG9yIGRvIHdvcmsuIDxzdHJvbmc+V29yazwvc3Ryb25nPiBpbiBwaHlzaWNzIGlzIGRlZmluZWQgYXMgYSBGb3JjZSBhcHBsaWVkIG92ZXIgYSBEaXN0YW5jZSAoVyA9IEYgJnRpbWVzOyBkKS4gSWYgeW91IHB1c2ggYSB3YWxsIGFuZCBpdCBkb2Vzbid0IG1vdmUsIHlvdSd2ZSBkb25lIG5vIHdvcmshPC9wPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj4yLiBQb3RlbnRpYWwgJiBLaW5ldGljIEVuZXJneTwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9Imxpc3QtZGlzYyBtbC04IG1iLTQgc3BhY2UteS0xIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5Qb3RlbnRpYWwgRW5lcmd5IChQRSk6PC9zdHJvbmc+IFN0b3JlZCBlbmVyZ3kuIEdyYXZpdGF0aW9uYWwgUEUgZGVwZW5kcyBvbiBNYXNzLCBHcmF2aXR5LCBhbmQgSGVpZ2h0IChQRSA9IG1naCkuIFRoZSBoaWdoZXIgeW91IGFyZSwgdGhlIG1vcmUgUEUgeW91IGhhdmUuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5LaW5ldGljIEVuZXJneSAoS0UpOjwvc3Ryb25nPiBFbmVyZ3kgb2YgbW90aW9uLiBJdCBkZXBlbmRzIG9uIE1hc3MgYW5kIFZlbG9jaXR5IChLRSA9ICZmcmFjMTI7bXY8c3VwPjI8L3N1cD4pLiBHb2luZyBmYXN0ZXIgaW5jcmVhc2VzIGVuZXJneSBleHBvbmVudGlhbGx5ITwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj4zLiBDb25zZXJ2YXRpb24gb2YgRW5lcmd5PC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij5FbmVyZ3kgaXMgbmV2ZXIgbG9zdCwganVzdCB0cmFuc2Zvcm1lZC4gQXMgYSBza2F0ZXIgZ29lcyBkb3duIGEgcmFtcCwgUEUgdHVybnMgaW50byBLRS4gQXQgdGhlIGJvdHRvbSwgUEUgaXMgbG93ZXN0IGFuZCBLRSBpcyBoaWdoZXN0LjwvcD4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+NC4gRm9yY2VzIG9uIGFuIEluY2xpbmVkIFBsYW5lPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij5XaGVuIGFuIG9iamVjdCBpcyBvbiBhIHNsb3BlLCBHcmF2aXR5IChGPHN1Yj5nPC9zdWI+KSBwdWxscyBpdCBzdHJhaWdodCBkb3duLiBXZSBzcGxpdCB0aGlzIGZvcmNlIGludG8gdHdvIDxzdHJvbmc+Y29tcG9uZW50czwvc3Ryb25nPjo8L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9Imxpc3QtZGlzYyBtbC04IG1iLTQgc3BhY2UteS0xIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5QZXJwZW5kaWN1bGFyIEZvcmNlIChGPHN1Yj4mcGVycDs8L3N1Yj4pOjwvc3Ryb25nPiBQdXNoZXMgdGhlIG9iamVjdCA8ZW0+aW50bzwvZW0+IHRoZSByYW1wIChtZyBjb3MoJnRoZXRhOykpLiBCYWxhbmNlZCBieSBOb3JtYWwgRm9yY2UuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5QYXJhbGxlbCBGb3JjZSAoRjxzdWI+JnBhcmFsbGVsOzwvc3ViPik6PC9zdHJvbmc+IFB1c2hlcyB0aGUgb2JqZWN0IDxlbT5kb3duPC9lbT4gdGhlIHJhbXAgKG1nIHNpbigmdGhldGE7KSkuIFRoaXMgY2F1c2VzIGFjY2VsZXJhdGlvbiE8L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij5BcyB0aGUgc2xvcGUgYW5nbGUgaW5jcmVhc2VzLCBGPHN1Yj4mcGFyYWxsZWw7PC9zdWI+IGluY3JlYXNlcyAoZmFzdGVyIHNsaWRlKSBhbmQgRjxzdWI+JnBlcnA7PC9zdWI+IGRlY3JlYXNlcyAobGVzcyBncmlwKS48L3A+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPvCfj6AgSGFuZHMtT24gQWN0aXZpdGllczwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy1ncmVlbi01MCBwLTQgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWdyZWVuLTIwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJsaXN0LWRpc2MgbWwtNiBzcGFjZS15LTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5SYW1wIFJhY2UgKEZvcmNlIENvbXBvbmVudHMpOjwvc3Ryb25nPiBVc2UgYSBib29rIGFzIGEgcmFtcC4gU2xpZGUgYSBjb2luIGF0IGRpZmZlcmVudCBhbmdsZXMuIE5vdGljZSBob3cgc3RlZXBlciBhbmdsZXMgbWFrZSBpdCBzbGlkZSBmYXN0ZXIgKG1vcmUgUGFyYWxsZWwgRm9yY2UpLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPlBlbmR1bHVtIChQRSAmIEtFKTo8L3N0cm9uZz4gVGllIGEgd2VpZ2h0IHRvIGEgc3RyaW5nLiBQdWxsIGl0IGJhY2sgKEhpZ2ggUEUpLiBMZXQgZ28uIFdhdGNoIGl0IHNwZWVkIHVwIGF0IHRoZSBib3R0b20gKEhpZ2ggS0UpIGFuZCBzbG93IGRvd24gYXQgdGhlIHRvcC48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5UaGUgSGVhdnkgRHJvcCAoUEUpOjwvc3Ryb25nPiBEcm9wIGEgYmFsbCBpbnRvIHNhbmQgZnJvbSBkaWZmZXJlbnQgaGVpZ2h0cy4gSGlnaGVyIGRyb3AgPSBkZWVwZXIgY3JhdGVyIChNb3JlIFBFIGNvbnZlcnRlZCB0byBXb3JrIG9uIHNhbmQpLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICBgLAogICAgICAgICAgICAgICAgICAgICAgICBzaW1UeXBlOiAnZW5lcmd5UmFtcExhYicsCiAgICAgICAgICAgICAgICAgICAgICAgIHF1aXo6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIldoYXQgaXMgdGhlIGZvcm11bGEgZm9yIFdvcms/Iiwgb3B0aW9uczogWyJXID0gbSB4IGEiLCAiVyA9IEYgeCBkIiwgIlcgPSBtIHggZyIsICJXID0gdiAvIHQiXSwgYTogMSB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiR3Jhdml0YXRpb25hbCBQb3RlbnRpYWwgRW5lcmd5IGRlcGVuZHMgb246Iiwgb3B0aW9uczogWyJTcGVlZCIsICJIZWlnaHQgYW5kIE1hc3MiLCAiRnJpY3Rpb24iLCAiVGltZSJdLCBhOiAxIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJBcyBhIHJhbXAgZ2V0cyBzdGVlcGVyLCB0aGUgZm9yY2UgcHVsbGluZyB0aGUgb2JqZWN0IGRvd24gKCRGX3tcXHBhcmFsbGVsfSQpOiIsIG9wdGlvbnM6IFsiSW5jcmVhc2VzIiwgIkRlY3JlYXNlcyIsICJTdGF5cyB0aGUgc2FtZSIsICJCZWNvbWVzIHplcm8iXSwgYTogMCB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiRW5lcmd5IG9mIG1vdGlvbiBpcyBjYWxsZWQ6Iiwgb3B0aW9uczogWyJQb3RlbnRpYWwgRW5lcmd5IiwgIktpbmV0aWMgRW5lcmd5IiwgIlRoZXJtYWwgRW5lcmd5IiwgIk51Y2xlYXIgRW5lcmd5Il0sIGE6IDEgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIkNvbnNlcnZhdGlvbiBvZiBFbmVyZ3kgc3RhdGVzIHRoYXQgZW5lcmd5OiIsIG9wdGlvbnM6IFsiSXMgZGVzdHJveWVkIGJ5IGZyaWN0aW9uIiwgIklzIGNyZWF0ZWQgYnkgbW90aW9uIiwgIlRyYW5zZm9ybXMgYnV0IGlzIG5vdCBsb3N0IiwgIkRpc2FwcGVhcnMgb3ZlciB0aW1lIl0sIGE6IDIgfQogICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7IAogICAgICAgICAgICAgICAgICAgICAgICBpZDogJ2w0JywgCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnTGVzc29uIDQ6IEZsdWlkcywgUHJlc3N1cmUgJiBCdW95YW5jeScsIAogICAgICAgICAgICAgICAgICAgICAgICBsZXNzb246IGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIG1iLTQgdGV4dC1ibHVlLTgwMCI+Rmx1aWRzLCBQcmVzc3VyZSAmIEJ1b3lhbmN5PC9oMz4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+MS4gRGVuc2l0eTogTWFzcyBpbiBhIEdpdmVuIFNwYWNlPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij48c3Ryb25nPkRlbnNpdHk8L3N0cm9uZz4gaXMgYSBtZWFzdXJlIG9mIGhvdyBtdWNoICJzdHVmZiIgKG1hc3MpIGlzIHBhY2tlZCBpbnRvIGEgY2VydGFpbiBzcGFjZSAodm9sdW1lKS4gQSBibG9jayBvZiBsZWFkIGlzIG11Y2ggZGVuc2VyIHRoYW4gYSBibG9jayBvZiB3b29kIG9mIHRoZSBzYW1lIHNpemUuPC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9ImZvbnQtbW9ubyBiZy1ncmF5LTEwMCBwLTIgcm91bmRlZCB0ZXh0LWNlbnRlciBtYi00Ij5EZW5zaXR5ID0gTWFzcyAvIFZvbHVtZTwvcD4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+Mi4gUHJlc3N1cmU6IEZvcmNlIG92ZXIgYW4gQXJlYTwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+PHN0cm9uZz5QcmVzc3VyZTwvc3Ryb25nPiBpcyB0aGUgYW1vdW50IG9mIGZvcmNlIGFwcGxpZWQgb3ZlciBhIHNwZWNpZmljIGFyZWEuIEEgc2hhcnAgbmVlZGxlIGNyZWF0ZXMgaGlnaCBwcmVzc3VyZSBiZWNhdXNlIHRoZSBmb3JjZSBpcyBjb25jZW50cmF0ZWQgb24gYSB0aW55IHBvaW50LjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJmb250LW1vbm8gYmctZ3JheS0xMDAgcC0yIHJvdW5kZWQgdGV4dC1jZW50ZXIgbWItNCI+UHJlc3N1cmUgPSBGb3JjZSAvIEFyZWE8L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9Imxpc3QtZGlzYyBtbC04IG1iLTQgc3BhY2UteS0xIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5GbHVpZCBQcmVzc3VyZTo8L3N0cm9uZz4gSW5jcmVhc2VzIHdpdGggZGVwdGguIFRoZSBkZWVwZXIgeW91IGdvLCB0aGUgbW9yZSB3ZWlnaHQgb2YgdGhlIGZsdWlkIGlzIG9uIHRvcCBvZiB5b3UuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5BdG1vc3BoZXJpYyBQcmVzc3VyZTo8L3N0cm9uZz4gVGhlIHByZXNzdXJlIGV4ZXJ0ZWQgYnkgdGhlIHdlaWdodCBvZiB0aGUgYWlyIGluIHRoZSBhdG1vc3BoZXJlLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+SGlnaCB0byBMb3c6PC9zdHJvbmc+IEZsdWlkcyAobGlxdWlkcyBhbmQgZ2FzZXMpIGFsd2F5cyBtb3ZlIGZyb20gYW4gYXJlYSBvZiBoaWdoIHByZXNzdXJlIHRvIGFuIGFyZWEgb2YgbG93IHByZXNzdXJlLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj4zLiBQYXNjYWwncyBQcmluY2lwbGUgJiBIeWRyYXVsaWNzPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJnLWJsdWUtNTAgcC00IHJvdW5kZWQtbGcgYm9yZGVyLWwtNCBib3JkZXItYmx1ZS01MDAgbWItNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5QYXNjYWwncyBQcmluY2lwbGU8L3N0cm9uZz4gc3RhdGVzIHRoYXQgYSBwcmVzc3VyZSBjaGFuZ2UgYXQgYW55IHBvaW50IGluIGEgY29uZmluZWQsIGluY29tcHJlc3NpYmxlIGZsdWlkIGlzIHRyYW5zbWl0dGVkIGVxdWFsbHkgdG8gYWxsIHBvaW50cyB0aHJvdWdob3V0IHRoZSBmbHVpZC48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij5UaGlzIGlzIHRoZSBtYWdpYyBiZWhpbmQgPHN0cm9uZz5oeWRyYXVsaWMgbGlmdHM8L3N0cm9uZz4uIEEgc21hbGwgZm9yY2Ugb24gYSBzbWFsbCBwaXN0b24gY3JlYXRlcyBhIHByZXNzdXJlIHRoYXQgYWN0cyBvbiBhIGxhcmdlIHBpc3RvbiwgZ2VuZXJhdGluZyBhIG11Y2ggbGFyZ2VyIG91dHB1dCBmb3JjZS4gSXQncyBhIGZvcmNlIG11bHRpcGxpZXIhPC9wPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj40LiBBcmNoaW1lZGVzJyBQcmluY2lwbGUgJiBCdW95YW5jeTwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+PHN0cm9uZz5BcmNoaW1lZGVzJyBQcmluY2lwbGU8L3N0cm9uZz4gc3RhdGVzIHRoYXQgdGhlIHVwd2FyZCA8c3Ryb25nPmJ1b3lhbnQgZm9yY2U8L3N0cm9uZz4gZXhlcnRlZCBvbiBhIGJvZHkgaW1tZXJzZWQgaW4gYSBmbHVpZCBpcyBlcXVhbCB0byB0aGUgd2VpZ2h0IG9mIHRoZSBmbHVpZCB0aGF0IHRoZSBib2R5IGRpc3BsYWNlcy48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9Imxpc3QtZGlzYyBtbC04IG1iLTQgc3BhY2UteS0xIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+SWYgQnVveWFudCBGb3JjZSA+IE9iamVjdCdzIFdlaWdodCAmcmFycjsgSXQgRmxvYXRzLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPklmIEJ1b3lhbnQgRm9yY2UgPCBPYmplY3QncyBXZWlnaHQgJnJhcnI7IEl0IFNpbmtzLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlRoaXMgaXMgd2h5IGEgaGVhdnkgc3RlZWwgc2hpcCBmbG9hdHM6IGl0cyBzaGFwZSBkaXNwbGFjZXMgYSBodWdlIHZvbHVtZSBvZiB3YXRlciwgY3JlYXRpbmcgYSBtYXNzaXZlIGJ1b3lhbnQgZm9yY2UuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjUuIEJlcm5vdWxsaSdzIFByaW5jaXBsZSAmIExpZnQ8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPjxzdHJvbmc+QmVybm91bGxpJ3MgUHJpbmNpcGxlPC9zdHJvbmc+IHN0YXRlcyB0aGF0IGZvciBhIGZsdWlkLCBhbiBpbmNyZWFzZSBpbiBzcGVlZCBvY2N1cnMgc2ltdWx0YW5lb3VzbHkgd2l0aCBhIGRlY3JlYXNlIGluIHByZXNzdXJlLjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij48c3Ryb25nPkhvdyBBaXJwbGFuZXMgRmx5Ojwvc3Ryb25nPiBBbiBhaXJwbGFuZSB3aW5nIChhaXJmb2lsKSBpcyBzaGFwZWQgc28gdGhhdCBhaXIgdHJhdmVscyBmYXN0ZXIgb3ZlciB0aGUgdG9wIHRoYW4gdGhlIGJvdHRvbS4gVGhpcyBjcmVhdGVzIGxvd2VyIHByZXNzdXJlIG9uIHRvcCBhbmQgaGlnaGVyIHByZXNzdXJlIG9uIHRoZSBib3R0b20sIHJlc3VsdGluZyBpbiBhbiB1cHdhcmQgZm9yY2UgY2FsbGVkIDxzdHJvbmc+TGlmdDwvc3Ryb25nPi48L3A+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPvCfj6AgSG9tZSBFeHBlcmltZW50czwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy1ncmVlbi01MCBwLTQgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWdyZWVuLTIwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJsaXN0LWRpc2MgbWwtNiBzcGFjZS15LTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5UaGUgRmxvYXRpbmcgRWdnIChEZW5zaXR5KTo8L3N0cm9uZz4gQW4gZWdnIHNpbmtzIGluIGZyZXNoIHdhdGVyLiBBZGQgc2FsdCB0byB0aGUgd2F0ZXIsIGluY3JlYXNpbmcgaXRzIGRlbnNpdHkuIFRoZSBlZ2cgd2lsbCBmbG9hdCE8L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5MZWFreSBCb3R0bGUgKEZsdWlkIFByZXNzdXJlKTo8L3N0cm9uZz4gUG9rZSB0aHJlZSBob2xlcyBpbiBhIHBsYXN0aWMgYm90dGxlIGF0IGRpZmZlcmVudCBoZWlnaHRzLiBGaWxsIGl0IHdpdGggd2F0ZXIuIFRoZSB3YXRlciBmcm9tIHRoZSBsb3dlc3QgaG9sZSB3aWxsIHNob290IG91dCB0aGUgZmFydGhlc3QgYmVjYXVzZSBwcmVzc3VyZSBpcyBncmVhdGVzdCBhdCB0aGUgYm90dG9tLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPlBhcGVyIExpZnQgKEJlcm5vdWxsaSk6PC9zdHJvbmc+IEhvbGQgYSBzdHJpcCBvZiBwYXBlciBqdXN0IHVuZGVyIHlvdXIgYm90dG9tIGxpcCBhbmQgYmxvdyBoYXJkIG92ZXIgdGhlIHRvcC4gVGhlIHBhcGVyIHdpbGwgbGlmdCB1cCBiZWNhdXNlIHRoZSBmYXN0LW1vdmluZyBhaXIgeW91IGNyZWF0ZSBoYXMgbG93ZXIgcHJlc3N1cmUuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIGAsIAogICAgICAgICAgICAgICAgICAgICAgICBzaW1UeXBlOiAnZm9yY2VzTGFiJywgCiAgICAgICAgICAgICAgICAgICAgICAgIHF1aXo6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIkJ1b3lhbnQgZm9yY2Ugb24gYW4gb2JqZWN0IGlzIGVxdWFsIHRvIHRoZToiLCBvcHRpb25zOiBbIldlaWdodCBvZiB0aGUgb2JqZWN0IiwgIlZvbHVtZSBvZiB0aGUgb2JqZWN0IiwgIldlaWdodCBvZiB0aGUgZmx1aWQgZGlzcGxhY2VkIiwgIkRlbnNpdHkgb2YgdGhlIGZsdWlkIl0sIGE6IDIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIkFuIG9iamVjdCB3aWxsIGZsb2F0IGlmIGl0cyBkZW5zaXR5IGlzIF9fXyB0aGUgZGVuc2l0eSBvZiB0aGUgZmx1aWQuIiwgb3B0aW9uczogWyJHcmVhdGVyIHRoYW4iLCAiTGVzcyB0aGFuIiwgIkVxdWFsIHRvIiwgIlR3aWNlIl0sIGE6IDEgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIlBhc2NhbCdzIHByaW5jaXBsZSBpcyB0aGUgYmFzaXMgZm9yOiIsIG9wdGlvbnM6IFsiQWlycGxhbmVzIiwgIkh5ZHJhdWxpYyBsaWZ0cyIsICJTdWJtYXJpbmVzIiwgIlNhaWxpbmciXSwgYTogMSB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiQXMgeW91IGdvIGRlZXBlciBpbiBhIGZsdWlkLCB0aGUgcHJlc3N1cmU6Iiwgb3B0aW9uczogWyJEZWNyZWFzZXMiLCAiU3RheXMgdGhlIHNhbWUiLCAiSW5jcmVhc2VzIiwgIkJlY29tZXMgemVybyJdLCBhOiAyIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJCZXJub3VsbGkncyBwcmluY2lwbGUgc3RhdGVzIHRoYXQgZmFzdGVyIG1vdmluZyBmbHVpZCBoYXM6Iiwgb3B0aW9uczogWyJIaWdoZXIgcHJlc3N1cmUiLCAiTG93ZXIgcHJlc3N1cmUiLCAiSGlnaGVyIHRlbXBlcmF0dXJlIiwgIkxvd2VyIGRlbnNpdHkiXSwgYTogMSB9CiAgICAgICAgICAgICAgICAgICAgICAgIF0gCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9LAogICAgICAgICAgICAnbWF0dGVyJzogewogICAgICAgICAgICAgICAgdGl0bGU6ICJNYXR0ZXIgJiBFbmVyZ3kiLAogICAgICAgICAgICAgICAgcGFzc3dvcmRIYXNoOiAiLTExMTE3MTQwMTYiLAogICAgICAgICAgICAgICAgbGVzc29uczogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdsMScsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnTGVzc29uIDE6IE1hdHRlciAmIEVuZXJneScsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlc3NvbjogYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJ0ZXh0LTJ4bCBmb250LWJvbGQgbWItNCB0ZXh0LWJsdWUtODAwIj5NYXR0ZXIgJiBFbmVyZ3k6IFRoZSBCdWlsZGluZyBCbG9ja3M8L2gzPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj4xLiBXaGF0IGlzIE1hdHRlcj88L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPjxzdHJvbmc+TWF0dGVyPC9zdHJvbmc+IGlzIGFueXRoaW5nIHRoYXQgaGFzIG1hc3MgYW5kIHRha2VzIHVwIHNwYWNlICh2b2x1bWUpLiBFdmVyeXRoaW5nIGFyb3VuZCB5b3UgLSBhaXIsIHdhdGVyLCByb2NrcywgZXZlbiB5b3UgLSBpcyBtYWRlIG9mIG1hdHRlci48L3A+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjIuIFByb3BlcnRpZXMgb2YgTWF0dGVyPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij5NYXR0ZXIgaGFzIHByb3BlcnRpZXMgdGhhdCBoZWxwIHVzIGlkZW50aWZ5IGl0OjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0ibGlzdC1kaXNjIG1sLTggbWItNCBzcGFjZS15LTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPlBoeXNpY2FsIFByb3BlcnRpZXM6PC9zdHJvbmc+IENhbiBiZSBvYnNlcnZlZCB3aXRob3V0IGNoYW5naW5nIHRoZSBzdWJzdGFuY2UgKGUuZy4sIENvbG9yLCBEZW5zaXR5LCBNZWx0aW5nIFBvaW50LCBDb25kdWN0aXZpdHkpLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+Q2hlbWljYWwgUHJvcGVydGllczo8L3N0cm9uZz4gRGVzY3JpYmUgaG93IGEgc3Vic3RhbmNlIGNoYW5nZXMgaW50byBhIG5ldyBzdWJzdGFuY2UgKGUuZy4sIEZsYW1tYWJpbGl0eSwgUmVhY3Rpdml0eSB3aXRoIGFjaWQpLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj4zLiBTdGF0ZXMgb2YgTWF0dGVyPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij5NYXR0ZXIgZXhpc3RzIGluIGRpZmZlcmVudCBzdGF0ZXMgZGVwZW5kaW5nIG9uIGhvdyBtdWNoIDxzdHJvbmc+RW5lcmd5PC9zdHJvbmc+IChoZWF0KSBpdCBoYXM6PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJsaXN0LWRpc2MgbWwtOCBtYi00IHNwYWNlLXktMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+U29saWQ6PC9zdHJvbmc+IFBhcnRpY2xlcyB2aWJyYXRlIGluIHBsYWNlLiBGaXhlZCBzaGFwZSBhbmQgdm9sdW1lLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+TGlxdWlkOjwvc3Ryb25nPiBQYXJ0aWNsZXMgc2xpZGUgcGFzdCBlYWNoIG90aGVyLiBGaXhlZCB2b2x1bWUsIHRha2VzIHNoYXBlIG9mIGNvbnRhaW5lci48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPkdhczo8L3N0cm9uZz4gUGFydGljbGVzIG1vdmUgZmFzdCBhbmQgZmFyIGFwYXJ0LiBObyBmaXhlZCBzaGFwZSBvciB2b2x1bWUuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5QbGFzbWE6PC9zdHJvbmc+IFN1cGVyLWhlYXRlZCBnYXMgd2hlcmUgZWxlY3Ryb25zIGFyZSBzdHJpcHBlZCBmcm9tIGF0b21zIChpb25pemVkKS4gRm91bmQgaW4gc3RhcnMsIGxpZ2h0bmluZywgYW5kIG5lb24gc2lnbnMuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjQuIFRoZSBBdG9tPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij5UaGUgc21hbGxlc3QgdW5pdCBvZiBtYXR0ZXIuIEl0IGNvbnNpc3RzIG9mOjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0ibGlzdC1kaXNjIG1sLTggbWItNCBzcGFjZS15LTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPlByb3RvbnMgKCspOjwvc3Ryb25nPiBQb3NpdGl2ZSBjaGFyZ2UsIGluIHRoZSBudWNsZXVzLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+TmV1dHJvbnMgKDApOjwvc3Ryb25nPiBOZXV0cmFsIGNoYXJnZSwgaW4gdGhlIG51Y2xldXMuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5FbGVjdHJvbnMgKC0pOjwvc3Ryb25nPiBOZWdhdGl2ZSBjaGFyZ2UsIG9yYml0aW5nIHRoZSBudWNsZXVzLiBQZXIgdGhlIHF1YW50dW0gbW9kZWwsIGluc3RlYWQgb2YgZm9sbG93aW5nIGEgc3BlY2lmaWMgY2lyY3VsYXIgcGF0aCwgZWxlY3Ryb25zIGV4aXN0IGluIGEgZnV6enksIDNEIHJlZ2lvbiBvZiBzcGFjZSBjYWxsZWQgYSAiY2xvdWQiLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj41LiBDaGFuZ2VzIGluIE1hdHRlcjwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+PHN0cm9uZz5QaHlzaWNhbCBDaGFuZ2U6PC9zdHJvbmc+IEFwcGVhcmFuY2UgY2hhbmdlcywgYnV0IHN1YnN0YW5jZSBzdGF5cyB0aGUgc2FtZSAoZS5nLiwgTWVsdGluZyBpY2UsIFRlYXJpbmcgcGFwZXIpLjxicj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+Q2hlbWljYWwgQ2hhbmdlOjwvc3Ryb25nPiBBIG5ldyBzdWJzdGFuY2UgaXMgZm9ybWVkIChlLmcuLCBSdXN0aW5nIGlyb24sIEJ1cm5pbmcgd29vZCkuIExvb2sgZm9yIGJ1YmJsZXMsIGNvbG9yIGNoYW5nZSwgb3IgaGVhdC48L3A+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjYuIENvbnNlcnZhdGlvbiBvZiBNYXNzPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij5NYXR0ZXIgY2Fubm90IGJlIGNyZWF0ZWQgb3IgZGVzdHJveWVkLCBvbmx5IGNoYW5nZWQgaW4gZm9ybS4gSW4gYSBjaGVtaWNhbCByZWFjdGlvbiwgdGhlIG1hc3Mgb2YgcmVhY3RhbnRzIGVxdWFscyB0aGUgbWFzcyBvZiBwcm9kdWN0cy48L3A+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPvCfj6AgSG9tZSBFeHBlcmltZW50czwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy1ncmVlbi01MCBwLTQgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWdyZWVuLTIwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJsaXN0LWRpc2MgbWwtNiBzcGFjZS15LTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5Pb2JsZWNrIChOb24tTmV3dG9uaWFuIEZsdWlkKTo8L3N0cm9uZz4gTWl4IGNvcm5zdGFyY2ggYW5kIHdhdGVyLiBJdCBhY3RzIGxpa2UgYSBzb2xpZCB3aGVuIGhpdCwgYnV0IGEgbGlxdWlkIHdoZW4gcG91cmVkLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPlZpbmVnYXIgJiBCYWtpbmcgU29kYTo8L3N0cm9uZz4gTWl4IHRoZW0gdG8gc2VlIGEgY2hlbWljYWwgY2hhbmdlIChnYXMgYnViYmxlcykgdGhhdCBpbmZsYXRlcyBhIGJhbGxvb24uPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+SWNlIE1lbHRpbmc6PC9zdHJvbmc+IFdhdGNoIGljZSBtZWx0IChwaHlzaWNhbCBjaGFuZ2UpIGFuZCBtZWFzdXJlIHRoZSB0ZW1wZXJhdHVyZSBzdGF5IGNvbnN0YW50IGF0IDDCsEMgdW50aWwgZnVsbHkgbWVsdGVkLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICBgLAogICAgICAgICAgICAgICAgICAgICAgICBzaW1UeXBlOiAnbWF0dGVyTGFiJywKICAgICAgICAgICAgICAgICAgICAgICAgcXVpejogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiV2hhdCBpcyB0aGUgZm91cnRoIHN0YXRlIG9mIG1hdHRlciBmb3VuZCBpbiBzdGFycz8iLCBvcHRpb25zOiBbIlNvbGlkIiwgIkxpcXVpZCIsICJHYXMiLCAiUGxhc21hIl0sIGE6IDMgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIldoaWNoIHBhcnRpY2xlIGhhcyBhIG5lZ2F0aXZlIGNoYXJnZT8iLCBvcHRpb25zOiBbIlByb3RvbiIsICJOZXV0cm9uIiwgIkVsZWN0cm9uIiwgIlBob3RvbiJdLCBhOiAyIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJNZWx0aW5nIGljZSBpcyBhbiBleGFtcGxlIG9mIHdoYXQga2luZCBvZiBjaGFuZ2U/Iiwgb3B0aW9uczogWyJDaGVtaWNhbCIsICJQaHlzaWNhbCIsICJOdWNsZWFyIiwgIk1hZ25ldGljIl0sIGE6IDEgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIlRoZSBMYXcgb2YgQ29uc2VydmF0aW9uIG9mIE1hc3Mgc3RhdGVzIHRoYXQgbWF0dGVyIGNhbm5vdCBiZToiLCBvcHRpb25zOiBbIkhlYXRlZCIsICJDb29sZWQiLCAiQ3JlYXRlZCBvciBEZXN0cm95ZWQiLCAiTW92ZWQiXSwgYTogMiB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiV2hpY2ggaXMgYSBjaGVtaWNhbCBwcm9wZXJ0eT8iLCBvcHRpb25zOiBbIkNvbG9yIiwgIkRlbnNpdHkiLCAiRmxhbW1hYmlsaXR5IiwgIk1hc3MiXSwgYTogMiB9CiAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdsMicsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnTGVzc29uIDI6IEVuZXJneSBGb3JtcyAmIFRyYW5zZm9ybWF0aW9ucycsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlc3NvbjogYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJ0ZXh0LTJ4bCBmb250LWJvbGQgbWItNCB0ZXh0LWJsdWUtODAwIj5FbmVyZ3k6IFRoZSBNb3ZlciAmIFNoYWtlcjwvaDM+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjEuIFdoYXQgaXMgRW5lcmd5PzwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+PHN0cm9uZz5FbmVyZ3k8L3N0cm9uZz4gaXMgZGVmaW5lZCBhcyB0aGUgYWJpbGl0eSB0byBkbyB3b3JrIG9yIGNhdXNlIGNoYW5nZS4gSXQgbWFrZXMgdGhpbmdzIG1vdmUsIGhlYXQgdXAsIG9yIGxpZ2h0IHVwLiBUaGUgc3RhbmRhcmQgdW5pdCBvZiBlbmVyZ3kgaXMgdGhlIDxzdHJvbmc+Sm91bGUgKEopPC9zdHJvbmc+LjwvcD4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+Mi4gS2luZXRpYyB2cy4gUG90ZW50aWFsIEVuZXJneTwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+RW5lcmd5IGV4aXN0cyBpbiB0d28gbWFpbiBzdGF0ZXM6PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJsaXN0LWRpc2MgbWwtOCBtYi00IHNwYWNlLXktMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+S2luZXRpYyBFbmVyZ3kgKEtFKTo8L3N0cm9uZz4gVGhlIGVuZXJneSBvZiBtb3Rpb24uIFRoZSBmYXN0ZXIgYW4gb2JqZWN0IG1vdmVzIG9yIHRoZSBoZWF2aWVyIGl0IGlzLCB0aGUgbW9yZSBLRSBpdCBoYXMuIChLRSA9ICZmcmFjMTI7bXY8c3VwPjI8L3N1cD4pPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5Qb3RlbnRpYWwgRW5lcmd5IChQRSk6PC9zdHJvbmc+IFN0b3JlZCBlbmVyZ3kgYmFzZWQgb24gcG9zaXRpb24gb3IgY29uZGl0aW9uLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9Imxpc3QtZGlzYyBtbC00IG10LTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxlbT5HcmF2aXRhdGlvbmFsIFBFOjwvZW0+IFN0b3JlZCBieSBoZWlnaHQgKGUuZy4sIGEgcm9jayBvbiBhIGNsaWZmKS4gKFBFID0gbWdoKTwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PGVtPkVsYXN0aWMgUEU6PC9lbT4gU3RvcmVkIGluIHN0cmV0Y2hlZCBzcHJpbmdzIG9yIHJ1YmJlciBiYW5kcy48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxlbT5DaGVtaWNhbCBQRTo8L2VtPiBTdG9yZWQgaW4gYm9uZHMgb2YgYXRvbXMgKGUuZy4sIGZ1ZWwsIGZvb2QpLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjMuIEZvcm1zIG9mIEVuZXJneTwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGdhcC00IG1iLTQgdGV4dC1zbSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmcteWVsbG93LTUwIHAtMyByb3VuZGVkIGJvcmRlciBib3JkZXIteWVsbG93LTIwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+TWVjaGFuaWNhbDo8L3N0cm9uZz4gU3VtIG9mIFBFIGFuZCBLRSAobW92aW5nIGdlYXJzKS48YnI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+VGhlcm1hbCAoSGVhdCk6PC9zdHJvbmc+IFZpYnJhdGlvbiBvZiBwYXJ0aWNsZXMuPGJyPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlJhZGlhbnQgKExpZ2h0L1NvbGFyKTo8L3N0cm9uZz4gRWxlY3Ryb21hZ25ldGljIHdhdmVzLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJnLWJsdWUtNTAgcC0zIHJvdW5kZWQgYm9yZGVyIGJvcmRlci1ibHVlLTIwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+RWxlY3RyaWNhbDo8L3N0cm9uZz4gRmxvdyBvZiBlbGVjdHJvbnMuPGJyPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPkNoZW1pY2FsOjwvc3Ryb25nPiBTdG9yZWQgaW4gYmF0dGVyaWVzL2Zvb2QuPGJyPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPk51Y2xlYXI6PC9zdHJvbmc+IFN0b3JlZCBpbiBhdG9taWMgbnVjbGVpLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjQuIEVuZXJneSBTb3VyY2VzPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlJlbmV3YWJsZTo8L3N0cm9uZz4gTmF0dXJhbGx5IHJlcGxlbmlzaGVkIChTb2xhciwgV2luZCwgSHlkcm8sIEdlb3RoZXJtYWwpLjxicj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPk5vbi1SZW5ld2FibGU6PC9zdHJvbmc+IEZpbml0ZSBzdXBwbHkgKEZvc3NpbCBGdWVscyBsaWtlIENvYWwsIE9pbCwgTmF0dXJhbCBHYXM7IE51Y2xlYXIgVXJhbml1bSkuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjUuIENvbnNlcnZhdGlvbiAmIFRyYW5zZm9ybWF0aW9uPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij48c3Ryb25nPkxhdyBvZiBDb25zZXJ2YXRpb24gb2YgRW5lcmd5Ojwvc3Ryb25nPiBFbmVyZ3kgY2Fubm90IGJlIGNyZWF0ZWQgb3IgZGVzdHJveWVkLCBvbmx5IHRyYW5zZm9ybWVkIGZyb20gb25lIGZvcm0gdG8gYW5vdGhlci48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+PGVtPkV4YW1wbGU6PC9lbT4gQSBiYXR0ZXJ5IChDaGVtaWNhbCkgcG93ZXJzIGEgZmxhc2hsaWdodCAoRWxlY3RyaWNhbCAmcmFycjsgTGlnaHQgKyBIZWF0KS48L3A+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjYuIEVmZmljaWVuY3k8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPk5vIGNvbnZlcnNpb24gaXMgMTAwJSBlZmZpY2llbnQuIFNvbWUgZW5lcmd5IGlzIGFsd2F5cyAibG9zdCIgYXMgd2FzdGUgaGVhdCAoZHVlIHRvIGZyaWN0aW9uIG9yIHJlc2lzdGFuY2UpLiA8YnI+PHN0cm9uZz5FZmZpY2llbmN5PC9zdHJvbmc+ID0gKFVzZWZ1bCBFbmVyZ3kgT3V0cHV0IC8gVG90YWwgRW5lcmd5IElucHV0KSDDlyAxMDAlLjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgYCwKICAgICAgICAgICAgICAgICAgICAgICAgc2ltVHlwZTogJ2VuZXJneUxhYicsCiAgICAgICAgICAgICAgICAgICAgICAgIHF1aXo6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIkVuZXJneSBzdG9yZWQgaW4gYSBzdHJldGNoZWQgcnViYmVyIGJhbmQgaXM6Iiwgb3B0aW9uczogWyJLaW5ldGljIiwgIkdyYXZpdGF0aW9uYWwgUG90ZW50aWFsIiwgIkVsYXN0aWMgUG90ZW50aWFsIiwgIlRoZXJtYWwiXSwgYTogMiB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiV2hpY2ggaXMgYSBub24tcmVuZXdhYmxlIGVuZXJneSBzb3VyY2U/Iiwgb3B0aW9uczogWyJTb2xhciIsICJXaW5kIiwgIkNvYWwiLCAiSHlkcm8iXSwgYTogMiB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiVGhlIExhdyBvZiBDb25zZXJ2YXRpb24gb2YgRW5lcmd5IHN0YXRlczoiLCBvcHRpb25zOiBbIkVuZXJneSBpcyBjcmVhdGVkIGJ5IHRoZSBzdW4iLCAiRW5lcmd5IGlzIGRlc3Ryb3llZCBieSBmcmljdGlvbiIsICJFbmVyZ3kgY2Fubm90IGJlIGNyZWF0ZWQgb3IgZGVzdHJveWVkIiwgIkVuZXJneSBpcyBpbmZpbml0ZSJdLCBhOiAyIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJBIHNvbGFyIHBhbmVsIGNvbnZlcnRzIF9fXyBlbmVyZ3kgaW50byBfX18gZW5lcmd5LiIsIG9wdGlvbnM6IFsiTGlnaHQgLT4gRWxlY3RyaWNhbCIsICJIZWF0IC0+IENoZW1pY2FsIiwgIkVsZWN0cmljYWwgLT4gTGlnaHQiLCAiV2luZCAtPiBNZWNoYW5pY2FsIl0sIGE6IDAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIktpbmV0aWMgRW5lcmd5IGRlcGVuZHMgb246Iiwgb3B0aW9uczogWyJIZWlnaHQgYW5kIEdyYXZpdHkiLCAiTWFzcyBhbmQgVmVsb2NpdHkiLCAiSGVhdCBhbmQgVm9sdW1lIiwgIkNoYXJnZSBhbmQgRGlzdGFuY2UiXSwgYTogMSB9CiAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdsMycsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnTGVzc29uIDM6IE1hdHRlciwgRW5lcmd5ICYgR2FzIExhd3MnLAogICAgICAgICAgICAgICAgICAgICAgICBsZXNzb246IGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIG1iLTQgdGV4dC1ibHVlLTgwMCI+TWF0dGVyLCBFbmVyZ3kgJiBHYXMgTGF3czwvaDM+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjEuIEhvdyBFbmVyZ3kgQWZmZWN0cyBNYXR0ZXI8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPkVuZXJneSBpcyB0aGUgZHJpdmVyIG9mIGNoYW5nZSBpbiBtYXR0ZXIuIEFkZGluZyBlbmVyZ3kgKGhlYXQpIGluY3JlYXNlcyBwYXJ0aWNsZSBtb3Rpb24gKEtpbmV0aWMgRW5lcmd5KSwgY2F1c2luZyBwaGFzZSBjaGFuZ2VzIChTb2xpZCDihpIgTGlxdWlkIOKGkiBHYXMpIG9yIGNoZW1pY2FsIHJlYWN0aW9ucy4gUmVtb3ZpbmcgZW5lcmd5IGNhdXNlcyBwYXJ0aWNsZXMgdG8gc2xvdyBkb3duIGFuZCBvcmdhbml6ZS48L3A+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjIuIFdoeSBGcmVlemluZyBSZWxlYXNlcyBFbmVyZ3k8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPkl0IHNlZW1zIGNvdW50ZXJpbnR1aXRpdmUsIGJ1dCA8c3Ryb25nPmZyZWV6aW5nIGlzIGFuIGV4b3RoZXJtaWMgcHJvY2Vzczwvc3Ryb25nPiAocmVsZWFzZXMgaGVhdCkuIFdoZW4gd2F0ZXIgdHVybnMgdG8gaWNlLCBtb2xlY3VsZXMgc2xvdyBkb3duIGFuZCBmb3JtIHN0YWJsZSBoeWRyb2dlbiBib25kcy4gVGhpcyBmb3JtYXRpb24gcmVsZWFzZXMgc3RvcmVkIHBvdGVudGlhbCBlbmVyZ3kgYXMgaGVhdCBpbnRvIHRoZSBzdXJyb3VuZGluZ3MuIFRoaXMgaXMgd2h5IGZhcm1lcnMgc29tZXRpbWVzIHNwcmF5IHdhdGVyIG9uIGNyb3BzIGJlZm9yZSBhIGZyZWV6ZTsgdGhlIGZyZWV6aW5nIHdhdGVyIHJlbGVhc2VzIGhlYXQgdGhhdCBwcm90ZWN0cyB0aGUgcGxhbnRzLjwvcD4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+My4gSGVhdCBUcmFuc2ZlciBNZXRob2RzPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0ibGlzdC1kaXNjIG1sLTggbWItNCBzcGFjZS15LTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPkNvbmR1Y3Rpb246PC9zdHJvbmc+IEhlYXQgdHJhbnNmZXIgdGhyb3VnaCBkaXJlY3QgY29udGFjdC4gRmFzdC1tb3ZpbmcgcGFydGljbGVzIGJ1bXAgaW50byBzbG93ZXIgb25lcyAoZS5nLiwgdG91Y2hpbmcgYSBob3Qgc3RvdmUpLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+Q29udmVjdGlvbjo8L3N0cm9uZz4gSGVhdCB0cmFuc2ZlciBieSB0aGUgbW92ZW1lbnQgb2YgZmx1aWRzIChsaXF1aWRzIG9yIGdhc2VzKS4gSG90IGZsdWlkIHJpc2VzIChsZXNzIGRlbnNlKSwgY29sZCBmbHVpZCBzaW5rcyAobW9yZSBkZW5zZSksIGNyZWF0aW5nIGEgY3ljbGUgKGUuZy4sIGJvaWxpbmcgd2F0ZXIpLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+UmFkaWF0aW9uOjwvc3Ryb25nPiBIZWF0IHRyYW5zZmVyIHZpYSBlbGVjdHJvbWFnbmV0aWMgd2F2ZXMuIE5vIG1lZGl1bSByZXF1aXJlZCAoZS5nLiwgaGVhdCBmcm9tIHRoZSBTdW4pLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj40LiBQcm9wZXJ0aWVzIG9mIEdhc2VzPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij5HYXNlcyBhcmUgZGVzY3JpYmVkIGJ5IGZvdXIgdmFyaWFibGVzOiA8c3Ryb25nPlByZXNzdXJlIChQKTwvc3Ryb25nPiwgPHN0cm9uZz5Wb2x1bWUgKFYpPC9zdHJvbmc+LCA8c3Ryb25nPlRlbXBlcmF0dXJlIChUKTwvc3Ryb25nPiwgYW5kIEFtb3VudCAobikuPC9wPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj41LiBUaGUgR2FzIExhd3M8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctYmx1ZS01MCBwLTQgcm91bmRlZC1sZyBib3JkZXItbC00IGJvcmRlci1ibHVlLTUwMCBtYi00Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPkJveWxlJ3MgTGF3IChQ4oKBVuKCgSA9IFDigoJW4oKCKTo8L3N0cm9uZz4gUHJlc3N1cmUgYW5kIFZvbHVtZSBhcmUgPGVtPmludmVyc2VseTwvZW0+IHJlbGF0ZWQgKGF0IGNvbnN0YW50IFQpLiBTcXVlZXplIGEgYmFsbG9vbiAobG93ZXIgVikgLT4gUHJlc3N1cmUgZ29lcyB1cC48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im10LTIiPjxzdHJvbmc+Q2hhcmxlcydzIExhdyAoVuKCgS9U4oKBID0gVuKCgi9U4oKCKTo8L3N0cm9uZz4gVm9sdW1lIGFuZCBUZW1wZXJhdHVyZSBhcmUgPGVtPmRpcmVjdGx5PC9lbT4gcmVsYXRlZCAoYXQgY29uc3RhbnQgUCkuIEhlYXQgYSBiYWxsb29uIC0+IEl0IGV4cGFuZHMuPC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtdC0yIj48c3Ryb25nPkNvbWJpbmVkIEdhcyBMYXcgKFDigoFW4oKBL1TigoEgPSBQ4oKCVuKCgi9U4oKCKTo8L3N0cm9uZz4gUmVsYXRlcyBQLCBWLCBhbmQgVCB3aGVuIGFtb3VudCBvZiBnYXMgaXMgY29uc3RhbnQuPC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPvCfj6AgRnVuIEhvbWUgRXhwZXJpbWVudHM8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctZ3JlZW4tNTAgcC00IHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ncmVlbi0yMDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0ibGlzdC1kaXNjIG1sLTYgc3BhY2UteS0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+VGhlIENydXNoaW5nIENhbiAoQ2hhcmxlcydzIExhdyk6PC9zdHJvbmc+IEhlYXQgYSBzbWFsbCBhbW91bnQgb2Ygd2F0ZXIgaW4gYW4gZW1wdHkgc29kYSBjYW4gdW50aWwgc3RlYW0gY29tZXMgb3V0LiBRdWlja2x5IGludmVydCBpdCBpbnRvIGEgYm93bCBvZiBpY2Ugd2F0ZXIuIFRoZSBzdGVhbSBjb25kZW5zZXMgaW5zdGFudGx5LCBjcmVhdGluZyBhIHZhY3V1bSwgYW5kIGF0bW9zcGhlcmljIHByZXNzdXJlIGNydXNoZXMgdGhlIGNhbiE8L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5Db252ZWN0aW9uIEN1cnJlbnRzOjwvc3Ryb25nPiBQbGFjZSBhIGN1cCBvZiBob3Qgd2F0ZXIgd2l0aCByZWQgZHllIGludG8gYSBib3dsIG9mIGNvbGQgd2F0ZXIuIFdhdGNoIHRoZSByZWQgd2F0ZXIgcmlzZSBhbmQgc3ByZWFkLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPkJhbGxvb24gaW4gdGhlIEZyZWV6ZXI6PC9zdHJvbmc+IEJsb3cgdXAgYSBiYWxsb29uIGFuZCBwdXQgaXQgaW4gdGhlIGZyZWV6ZXIuIENvbWUgYmFjayBpbiBhbiBob3VyIHRvIHNlZSBpdCBzaHJ1bmtlbiAoQ2hhcmxlcydzIExhdykuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIGAsCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbVR5cGU6ICdoZWF0R2FzTGFiJywKICAgICAgICAgICAgICAgICAgICAgICAgcXVpejogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiRnJlZXppbmcgd2F0ZXIgcmVsZWFzZXMgaGVhdCBpbnRvIHRoZSBzdXJyb3VuZGluZ3MuIiwgb3B0aW9uczogWyJUcnVlIiwgIkZhbHNlIl0sIGE6IDAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIkhlYXQgdHJhbnNmZXIgdGhyb3VnaCB0aGUgbW92ZW1lbnQgb2YgZmx1aWRzIGlzIGNhbGxlZDoiLCBvcHRpb25zOiBbIkNvbmR1Y3Rpb24iLCAiQ29udmVjdGlvbiIsICJSYWRpYXRpb24iLCAiSW5zdWxhdGlvbiJdLCBhOiAxIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJCb3lsZSdzIExhdyBzdGF0ZXMgdGhhdCBpZiBWb2x1bWUgZGVjcmVhc2VzLCBQcmVzc3VyZToiLCBvcHRpb25zOiBbIkRlY3JlYXNlcyIsICJJbmNyZWFzZXMiLCAiU3RheXMgdGhlIHNhbWUiLCAiRGlzYXBwZWFycyJdLCBhOiAxIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJXaGljaCBsYXcgZXhwbGFpbnMgd2h5IGEgYmFsbG9vbiBzaHJpbmtzIGluIHRoZSBjb2xkPyIsIG9wdGlvbnM6IFsiQm95bGUncyBMYXciLCAiQ2hhcmxlcydzIExhdyIsICJOZXd0b24ncyBMYXciLCAiT2htJ3MgTGF3Il0sIGE6IDEgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIkhlYXQgZnJvbSB0aGUgc3VuIHJlYWNoZXMgRWFydGggdmlhOiIsIG9wdGlvbnM6IFsiQ29uZHVjdGlvbiIsICJDb252ZWN0aW9uIiwgIlJhZGlhdGlvbiIsICJXaXJlcyJdLCBhOiAyIH0KICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZDogJ2w0JywKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdMZXNzb24gNDogQXRvbXMsIEJvbmRpbmcgJiBSZWFjdGlvbnMnLAogICAgICAgICAgICAgICAgICAgICAgICBsZXNzb246IGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIG1iLTQgdGV4dC1ibHVlLTgwMCI+QXRvbXMsIEJvbmRpbmcgJiBSZWFjdGlvbnM8L2gzPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj4xLiBBdG9tcyAmIFRoZSBQZXJpb2RpYyBUYWJsZTwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+PHN0cm9uZz5BdG9tczwvc3Ryb25nPiBhcmUgdGhlIGJhc2ljIGJ1aWxkaW5nIGJsb2NrcyBvZiBtYXR0ZXIuIFRoZXkgY29uc2lzdCBvZiA8c3Ryb25nPlByb3RvbnM8L3N0cm9uZz4gKCspLCA8c3Ryb25nPk5ldXRyb25zPC9zdHJvbmc+ICgwKSwgYW5kIDxzdHJvbmc+RWxlY3Ryb25zPC9zdHJvbmc+ICgtKS48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9Imxpc3QtZGlzYyBtbC04IG1iLTQgc3BhY2UteS0xIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5BdG9taWMgTnVtYmVyIChaKTo8L3N0cm9uZz4gVGhlIG51bWJlciBvZiBwcm90b25zLiBUaGlzIGRlZmluZXMgdGhlIGVsZW1lbnQgKGUuZy4sIENhcmJvbiBhbHdheXMgaGFzIDYgcHJvdG9ucykuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5BdG9taWMgTWFzczo8L3N0cm9uZz4gUm91Z2hseSB0aGUgc3VtIG9mIHByb3RvbnMgYW5kIG5ldXRyb25zLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPlRoZSA8c3Ryb25nPlBlcmlvZGljIFRhYmxlPC9zdHJvbmc+IG9yZ2FuaXplcyBlbGVtZW50cyBieSBpbmNyZWFzaW5nIGF0b21pYyBudW1iZXIuIFZlcnRpY2FsIGNvbHVtbnMgYXJlIDxzdHJvbmc+R3JvdXBzPC9zdHJvbmc+IChlbGVtZW50cyB3aXRoIHNpbWlsYXIgcHJvcGVydGllcy92YWxlbmNlIGVsZWN0cm9ucyksIGFuZCBob3Jpem9udGFsIHJvd3MgYXJlIDxzdHJvbmc+UGVyaW9kczwvc3Ryb25nPi48L3A+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjIuIEVsZWN0cm9ucyAmIEJvbmRpbmc8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPkVsZWN0cm9ucyBvcmJpdCB0aGUgbnVjbGV1cyBpbiBzaGVsbHMuIFRoZSBvdXRlcm1vc3QgZWxlY3Ryb25zIGFyZSBjYWxsZWQgPHN0cm9uZz5WYWxlbmNlIEVsZWN0cm9uczwvc3Ryb25nPi4gVGhlc2UgZGV0ZXJtaW5lIGhvdyBhbiBhdG9tIGJvbmRzLjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0ibGlzdC1kaXNjIG1sLTggbWItNCBzcGFjZS15LTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPklvbmljIEJvbmRpbmc6PC9zdHJvbmc+IEF0b21zIHRyYW5zZmVyIGVsZWN0cm9ucy4gT25lIGJlY29tZXMgcG9zaXRpdmUgKENhdGlvbiksIG9uZSBuZWdhdGl2ZSAoQW5pb24pLiBPcHBvc2l0ZXMgYXR0cmFjdCAoZS5nLiwgTmFDbCkuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5Db3ZhbGVudCBCb25kaW5nOjwvc3Ryb25nPiBBdG9tcyBzaGFyZSBlbGVjdHJvbnMgdG8gZmlsbCB0aGVpciBvdXRlciBzaGVsbHMgKGUuZy4sIEjigoJPLCBDT+KCgikuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjMuIENoZW1pY2FsIFJlYWN0aW9ucyAmIEVxdWF0aW9uczwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+QSA8c3Ryb25nPkNoZW1pY2FsIFJlYWN0aW9uPC9zdHJvbmc+IHJlYXJyYW5nZXMgYXRvbXMgdG8gZm9ybSBuZXcgc3Vic3RhbmNlcy4gV2Ugd3JpdGUgdGhpcyBhcyBhIDxzdHJvbmc+Q2hlbWljYWwgRXF1YXRpb248L3N0cm9uZz46PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctZ3JheS0xMDAgcC0yIHJvdW5kZWQgdGV4dC1jZW50ZXIgZm9udC1tb25vIG1iLTQiPlJlYWN0YW50cyAmcmFycjsgUHJvZHVjdHM8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij48c3Ryb25nPkJhbGFuY2luZyBFcXVhdGlvbnM6PC9zdHJvbmc+IEJlY2F1c2UgbWFzcyBpcyBjb25zZXJ2ZWQsIHdlIG11c3QgaGF2ZSB0aGUgc2FtZSBudW1iZXIgb2YgZWFjaCB0eXBlIG9mIGF0b20gb24gYm90aCBzaWRlcy4gV2UgYWRqdXN0IDxzdHJvbmc+Y29lZmZpY2llbnRzPC9zdHJvbmc+ICh0aGUgYmlnIG51bWJlcnMgaW4gZnJvbnQpIHRvIGJhbGFuY2UgdGhlbS48L3A+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPvCfj6AgSG9tZSBFeHBlcmltZW50czwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy1ncmVlbi01MCBwLTQgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWdyZWVuLTIwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJsaXN0LWRpc2MgbWwtNiBzcGFjZS15LTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5DYWJiYWdlIENoZW1pc3RyeTo8L3N0cm9uZz4gQm9pbCByZWQgY2FiYmFnZSB0byBtYWtlIGEgcEggaW5kaWNhdG9yLiBBZGQgdmluZWdhciAoYWNpZCkgdG8gdHVybiBpdCBwaW5rLCBvciBiYWtpbmcgc29kYSAoYmFzZSkgdG8gdHVybiBpdCBibHVlL2dyZWVuLiBUaGlzIHNob3dzIGNoZW1pY2FsIGNoYW5nZXMhPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+UnVzdGluZyBTdGVlbCBXb29sOjwvc3Ryb25nPiBXZXQgYSBwaWVjZSBvZiBzdGVlbCB3b29sIGFuZCBsZWF2ZSBpdCBpbiBhIGphci4gT3ZlciBkYXlzLCBpdCByZWFjdHMgd2l0aCBveHlnZW4gKG94aWRhdGlvbikgdG8gZm9ybSBydXN0IChJcm9uIE94aWRlKS48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5FbGVwaGFudCBUb290aHBhc3RlIChTYWZlIFZlcnNpb24pOjwvc3Ryb25nPiBNaXggeWVhc3QsIHdhcm0gd2F0ZXIsIGRpc2ggc29hcCwgYW5kIGh5ZHJvZ2VuIHBlcm94aWRlLiBUaGUgeWVhc3QgYWN0cyBhcyBhIGNhdGFseXN0IHRvIGJyZWFrIGRvd24gcGVyb3hpZGUgcmFwaWRseSwgcmVsZWFzaW5nIG94eWdlbiBnYXMgYW5kIGZvYW0hPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIGAsCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbVR5cGU6ICdjaGVtaXN0cnlMYWInLAogICAgICAgICAgICAgICAgICAgICAgICBxdWl6OiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJUaGUgYXRvbWljIG51bWJlciB0ZWxscyB5b3UgdGhlIG51bWJlciBvZjoiLCBvcHRpb25zOiBbIk5ldXRyb25zIiwgIkVsZWN0cm9ucyIsICJQcm90b25zIiwgIklzb3RvcGVzIl0sIGE6IDIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIldoaWNoIGJvbmQgaW52b2x2ZXMgc2hhcmluZyBlbGVjdHJvbnM/Iiwgb3B0aW9uczogWyJJb25pYyIsICJDb3ZhbGVudCIsICJNZXRhbGxpYyIsICJKYW1lcyBCb25kIl0sIGE6IDEgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIkluIGEgY2hlbWljYWwgZXF1YXRpb24sIHRoZSBzdWJzdGFuY2VzIG9uIHRoZSBsZWZ0IGFyZToiLCBvcHRpb25zOiBbIlByb2R1Y3RzIiwgIlJlYWN0YW50cyIsICJDYXRhbHlzdHMiLCAiU29sdmVudHMiXSwgYTogMSB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiVmFsZW5jZSBlbGVjdHJvbnMgYXJlIGZvdW5kIGluIHRoZToiLCBvcHRpb25zOiBbIk51Y2xldXMiLCAiSW5uZXJtb3N0IHNoZWxsIiwgIk91dGVybW9zdCBzaGVsbCIsICJQcm90b24iXSwgYTogMiB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiV2h5IGRvIHdlIGJhbGFuY2UgY2hlbWljYWwgZXF1YXRpb25zPyIsIG9wdGlvbnM6IFsiVG8gbWFrZSB0aGVtIGxvb2sgbmljZSIsICJDb25zZXJ2YXRpb24gb2YgTWFzcyIsICJUbyBpbmNyZWFzZSBlbmVyZ3kiLCAiVG8gY2hhbmdlIHRoZSBlbGVtZW50cyJdLCBhOiAxIH0KICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ2VsZWN0cmljaXR5JzogewogICAgICAgICAgICAgICAgdGl0bGU6ICJFbGVjdHJpY2l0eSAmIE1hZ25ldGlzbSIsCiAgICAgICAgICAgICAgICBwYXNzd29yZEhhc2g6ICIxMDkzNTI0ODMiLAogICAgICAgICAgICAgICAgbGVzc29uczogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdsMScsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnTGVzc29uIDE6IFN0YXRpYyBFbGVjdHJpY2l0eScsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlc3NvbjogYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJ0ZXh0LTJ4bCBmb250LWJvbGQgbWItNCB0ZXh0LWJsdWUtODAwIj5VbmRlcnN0YW5kaW5nIFN0YXRpYyBFbGVjdHJpY2l0eTwvaDM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+PHN0cm9uZz5TdGF0aWMgZWxlY3RyaWNpdHk8L3N0cm9uZz4gaXMgYW4gaW1iYWxhbmNlIG9mIGVsZWN0cmljIGNoYXJnZXMgd2l0aGluIG9yIG9uIHRoZSBzdXJmYWNlIG9mIGEgbWF0ZXJpYWwuIFRoZSBjaGFyZ2UgcmVtYWlucyB1bnRpbCBpdCBpcyBhYmxlIHRvIG1vdmUgYXdheSBieSBtZWFucyBvZiBhbiBlbGVjdHJpYyBjdXJyZW50IG9yIGVsZWN0cmljYWwgZGlzY2hhcmdlLjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPlRoZSBBdG9tICYgQ2hhcmdlczwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+RXZlcnl0aGluZyBpcyBtYWRlIG9mIGF0b21zLiBBdG9tcyBjb250YWluOjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0ibGlzdC1kaXNjIG1sLTggbWItNCBzcGFjZS15LTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPlByb3RvbnM6PC9zdHJvbmc+IFBvc2l0aXZlICgrKSBjaGFyZ2UsIGluc2lkZSB0aGUgbnVjbGV1cy48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPkVsZWN0cm9uczo8L3N0cm9uZz4gTmVnYXRpdmUgKC0pIGNoYXJnZSwgb3JiaXRpbmcgb3V0c2lkZSB0aGUgbnVjbGV1cy4gUGVyIHRoZSBxdWFudHVtIG1vZGVsLCBpbnN0ZWFkIG9mIGZvbGxvd2luZyBhIHNwZWNpZmljIGNpcmN1bGFyIHBhdGgsIGVsZWN0cm9ucyBleGlzdCBpbiBhIGZ1enp5LCAzRCByZWdpb24gb2Ygc3BhY2UgY2FsbGVkIGEgImNsb3VkIi48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPk5ldXRyb25zOjwvc3Ryb25nPiBOZXV0cmFsICgwKSBjaGFyZ2UsIGluc2lkZSB0aGUgbnVjbGV1cy48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij5Vc3VhbGx5LCBhdG9tcyBoYXZlIHRoZSBzYW1lIG51bWJlciBvZiBwcm90b25zIGFuZCBlbGVjdHJvbnMsIG1ha2luZyB0aGVtIG5ldXRyYWwuIEhvd2V2ZXIsIGVsZWN0cm9ucyBjYW4gYmUgcnViYmVkIG9mZiBvbmUgbWF0ZXJpYWwgYW5kIG9udG8gYW5vdGhlci48L3A+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPkF0dHJhY3Rpb24gYW5kIFJlcHVsc2lvbjwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy1ibHVlLTUwIHAtNCByb3VuZGVkLWxnIGJvcmRlci1sLTQgYm9yZGVyLWJsdWUtNTAwIG1iLTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+VGhlIEdvbGRlbiBSdWxlOjwvc3Ryb25nPiBPcHBvc2l0ZXMgQXR0cmFjdCwgTGlrZXMgUmVwZWwuPC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0ibGlzdC1kaXNjIG1sLTYgbXQtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT4oKykgYW5kICgtKSBwdWxsIHRvZ2V0aGVyLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT4oKykgYW5kICgrKSBwdXNoIGFwYXJ0LjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT4oLSkgYW5kICgtKSBwdXNoIGFwYXJ0LjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj5Ucmlib2VsZWN0cmljIEVmZmVjdDwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+V2hlbiB5b3UgcnViIGEgYmFsbG9vbiBvbiBhIHN3ZWF0ZXIsIHRoZSBiYWxsb29uICJzdGVhbHMiIGVsZWN0cm9ucyBmcm9tIHRoZSBzd2VhdGVyLiBUaGUgYmFsbG9vbiBiZWNvbWVzIG5lZ2F0aXZlbHkgY2hhcmdlZCAoZXhjZXNzIGVsZWN0cm9ucyksIGFuZCB0aGUgc3dlYXRlciBiZWNvbWVzIHBvc2l0aXZlbHkgY2hhcmdlZCAobG9zdCBlbGVjdHJvbnMpLiBUaGV5IHdpbGwgbm93IHN0aWNrIHRvZ2V0aGVyIGJlY2F1c2Ugb3Bwb3NpdGVzIGF0dHJhY3QhPC9wPgogICAgICAgICAgICAgICAgICAgICAgICBgLAogICAgICAgICAgICAgICAgICAgICAgICBzaW1UeXBlOiAnc3RhdGljRWxlY3RyaWNpdHknLAogICAgICAgICAgICAgICAgICAgICAgICBxdWl6OiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJXaGF0IGNoYXJnZSBkbyBlbGVjdHJvbnMgaGF2ZT8iLCBvcHRpb25zOiBbIlBvc2l0aXZlIiwgIk5lZ2F0aXZlIiwgIk5ldXRyYWwiLCAiVmFyaWFibGUiXSwgYTogMSB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiSWYgYW4gb2JqZWN0IGdhaW5zIGVsZWN0cm9ucywgaXQgYmVjb21lczoiLCBvcHRpb25zOiBbIlBvc2l0aXZlbHkgY2hhcmdlZCIsICJOZWdhdGl2ZWx5IGNoYXJnZWQiLCAiTmV1dHJhbCIsICJNYWduZXRpYyJdLCBhOiAxIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJUd28gcG9zaXRpdmUgY2hhcmdlcyB3aWxsOiIsIG9wdGlvbnM6IFsiQXR0cmFjdCIsICJSZXBlbCIsICJEbyBub3RoaW5nIiwgIlNwaW4iXSwgYTogMSB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiU3RhdGljIGVsZWN0cmljaXR5IGlzIGNhdXNlZCBieSBhbiBpbWJhbGFuY2Ugb2Y6Iiwgb3B0aW9uczogWyJIZWF0IiwgIkVsZWN0cmljIGNoYXJnZXMiLCAiQWlyIHByZXNzdXJlIiwgIkxpZ2h0Il0sIGE6IDEgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIlJ1YmJpbmcgYSBiYWxsb29uIG9uIGEgc3dlYXRlciBpcyBhbiBleGFtcGxlIG9mOiIsIG9wdGlvbnM6IFsiVGhlIFRyaWJvZWxlY3RyaWMgRWZmZWN0IiwgIk1hZ25ldGlzbSIsICJHcmF2aXR5IiwgIkZ1c2lvbiJdLCBhOiAwIH0KICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZDogJ2wyJywKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdMZXNzb24gMjogRWxlY3RyaWMgQ2lyY3VpdHMgJiBQaGVub21lbmEnLAogICAgICAgICAgICAgICAgICAgICAgICBsZXNzb246IGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIG1iLTQgdGV4dC1ibHVlLTgwMCI+RWxlY3RyaWMgQ2lyY3VpdHMgJiBQaGVub21lbmE8L2gzPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj4xLiBDb25kdWN0b3JzICYgSW5zdWxhdG9yczwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+PHN0cm9uZz5Db25kdWN0b3JzPC9zdHJvbmc+IChsaWtlIGNvcHBlciwgZ29sZCwgd2F0ZXIpIGFsbG93IGVsZWN0cm9ucyB0byBmbG93IGVhc2lseS4gPHN0cm9uZz5JbnN1bGF0b3JzPC9zdHJvbmc+IChsaWtlIHJ1YmJlciwgZ2xhc3MsIHBsYXN0aWMpIHN0b3AgdGhlIGZsb3cgb2YgZWxlY3Ryb25zLjwvcD4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+Mi4gTGlnaHRuaW5nICYgRWxlY3RyaWMgUG90ZW50aWFsPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij48c3Ryb25nPkxpZ2h0bmluZzwvc3Ryb25nPiBpcyBhIG1hc3NpdmUgc3RhdGljIGRpc2NoYXJnZSBiZXR3ZWVuIGNsb3VkcyBhbmQgdGhlIGdyb3VuZC4gSXQgaGFwcGVucyB3aGVuIHRoZSA8c3Ryb25nPkVsZWN0cmljIFBvdGVudGlhbDwvc3Ryb25nPiAoVm9sdGFnZSkgZGlmZmVyZW5jZSBiZWNvbWVzIHNvIGdyZWF0IHRoYXQgYWlyIChub3JtYWxseSBhbiBpbnN1bGF0b3IpIGJyZWFrcyBkb3duIGFuZCBjb25kdWN0cyBlbGVjdHJpY2l0eS48L3A+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjMuIFBvbGFyIFdhdGVyIE1vbGVjdWxlczwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+V2F0ZXIgKEjigoJPKSBpcyBhIDxzdHJvbmc+cG9sYXIgbW9sZWN1bGU8L3N0cm9uZz4uIEl0IGhhcyBhIHBvc2l0aXZlIHNpZGUgKEh5ZHJvZ2VuKSBhbmQgYSBuZWdhdGl2ZSBzaWRlIChPeHlnZW4pLiBUaGlzIGFsbG93cyBpdCB0byBkaXNzb2x2ZSBzYWx0cyBhbmQgY29uZHVjdCBlbGVjdHJpY2l0eSB3aGVuIGlvbnMgYXJlIHByZXNlbnQuPC9wPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj40LiBDdXJyZW50LCBWb2x0YWdlLCAmIFJlc2lzdGFuY2U8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJsaXN0LWRpc2MgbWwtOCBtYi00IHNwYWNlLXktMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+Vm9sdGFnZSAoVik6PC9zdHJvbmc+IFRoZSAicHVzaCIgb3IgcHJlc3N1cmUgbW92aW5nIGVsZWN0cm9ucyAobWVhc3VyZWQgaW4gVm9sdHMpLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+Q3VycmVudCAoSSk6PC9zdHJvbmc+IFRoZSBmbG93IHJhdGUgb2YgZWxlY3Ryb25zIChtZWFzdXJlZCBpbiBBbXBzKS4gVGVjaG5pY2FsbHksIGN1cnJlbnQgaXMgdGhlIGZsb3cgb2YgY2hhcmdlLCBub3QgYWx3YXlzIGVsZWN0cm9ucyAoZS5nLiwgaW4gZWxlY3Ryb2x5dGVzLCBpb25zIGNhcnJ5IGNoYXJnZSkuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5SZXNpc3RhbmNlIChSKTo8L3N0cm9uZz4gSG93IGhhcmQgaXQgaXMgZm9yIGN1cnJlbnQgdG8gZmxvdyAobWVhc3VyZWQgaW4gT2htcykuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjUuIE9obSdzIExhdzwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy1ibHVlLTUwIHAtNCByb3VuZGVkLWxnIGJvcmRlci1sLTQgYm9yZGVyLWJsdWUtNTAwIG1iLTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJmb250LWJvbGQgdGV4dC1sZyB0ZXh0LWNlbnRlciI+ViA9IEkgw5cgUjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0idGV4dC1jZW50ZXIgdGV4dC1zbSI+Vm9sdGFnZSA9IEN1cnJlbnQgw5cgUmVzaXN0YW5jZTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj42LiBDaXJjdWl0czogU2VyaWVzIHZzLiBQYXJhbGxlbDwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9Imxpc3QtZGlzYyBtbC04IG1iLTQgc3BhY2UteS0xIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5TZXJpZXM6PC9zdHJvbmc+IE9uZSBwYXRoLiBJZiBvbmUgYnVsYiBicmVha3MsIGFsbCBnbyBvdXQuIEluIHNlcmllcyBjaXJjdWl0cywgY3VycmVudCBpcyB0aGUgc2FtZSBldmVyeXdoZXJlLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+UGFyYWxsZWw6PC9zdHJvbmc+IE11bHRpcGxlIHBhdGhzLiBJZiBvbmUgYnVsYiBicmVha3MsIG90aGVycyBzdGF5IG9uLiBJbiBwYXJhbGxlbCBjaXJjdWl0cywgdm9sdGFnZSBpcyB0aGUgc2FtZSBhY3Jvc3MgZWFjaCBicmFuY2guPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjcuIEFDIHZzLiBEQzwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+PHN0cm9uZz5EQyAoRGlyZWN0IEN1cnJlbnQpOjwvc3Ryb25nPiBFbGVjdHJvbnMgZmxvdyBpbiBvbmUgZGlyZWN0aW9uIChCYXR0ZXJpZXMpLjxicj48c3Ryb25nPkFDIChBbHRlcm5hdGluZyBDdXJyZW50KTo8L3N0cm9uZz4gRWxlY3Ryb25zIHN3aXRjaCBkaXJlY3Rpb24gYmFjayBhbmQgZm9ydGggKFdhbGwgb3V0bGV0cykuIFdoaWxlIGVsZWN0cm9ucyBkb24ndCB0cmF2ZWwgbG9uZyBkaXN0YW5jZXMsIHRoZWlyIHN5bmNocm9uaXplZCBiYWNrLWFuZC1mb3J0aCBtb3ZlbWVudCB0cmFuc2ZlcnMgZW5lcmd5IHRocm91Z2ggdGhlIGNpcmN1aXQsIHNpbWlsYXIgdG8gaG93IGEgd2F2ZSBtb3ZlcyBlbmVyZ3kgaW4gd2F0ZXIuPC9wPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj44LiBDYXBhY2l0b3JzPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij5BIDxzdHJvbmc+Q2FwYWNpdG9yPC9zdHJvbmc+IHN0b3JlcyBlbGVjdHJpY2FsIGVuZXJneSBpbiBhbiBlbGVjdHJpYyBmaWVsZCwgbGlrZSBhIHRlbXBvcmFyeSBiYXR0ZXJ5LiBJdCByZWxlYXNlcyBlbmVyZ3kgcXVpY2tseSB3aGVuIG5lZWRlZC48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIGAsCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbVR5cGU6ICdjaXJjdWl0QnVpbGRlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIHF1aXo6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIldoaWNoIG1hdGVyaWFsIGlzIGEgZ29vZCBjb25kdWN0b3I/Iiwgb3B0aW9uczogWyJDb3BwZXIiLCAiUnViYmVyIiwgIkdsYXNzIiwgIldvb2QiXSwgYTogMCB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiV2hhdCBpcyB0aGUgZm9ybXVsYSBmb3IgT2htJ3MgTGF3PyIsIG9wdGlvbnM6IFsiVj1JUiIsICJJPVZSIiwgIlI9VkkiLCAiVj1JL1IiXSwgYTogMCB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiSW4gd2hpY2ggY2lyY3VpdCB0eXBlIGRvZXMgY3VycmVudCBoYXZlIG9ubHkgb25lIHBhdGg/Iiwgb3B0aW9uczogWyJTZXJpZXMiLCAiUGFyYWxsZWwiLCAiT3BlbiIsICJTaG9ydCJdLCBhOiAwIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJXaGF0IGRvZXMgYSBjYXBhY2l0b3IgZG8/Iiwgb3B0aW9uczogWyJHZW5lcmF0ZXMgcG93ZXIiLCAiU3RvcmVzIGVuZXJneSIsICJSZXNpc3RzIGZsb3ciLCAiTWVhc3VyZXMgdm9sdGFnZSJdLCBhOiAxIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJMaWdodG5pbmcgaXMgYW4gZXhhbXBsZSBvZjoiLCBvcHRpb25zOiBbIlN0YXRpYyBEaXNjaGFyZ2UiLCAiQUMgQ3VycmVudCIsICJNYWduZXRpYyBGaWVsZCIsICJDaGVtaWNhbCBSZWFjdGlvbiJdLCBhOiAwIH0KICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZDogJ2wzJywKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdMZXNzb24gMzogTWFnbmV0aXNtICYgRWxlY3Ryb21hZ25ldGlzbScsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlc3NvbjogYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJ0ZXh0LTJ4bCBmb250LWJvbGQgbWItNCB0ZXh0LWJsdWUtODAwIj5NYWduZXRpc20gJiBFbGVjdHJvbWFnbmV0aXNtPC9oMz4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+MS4gTWFnbmV0cyAmIE1hZ25ldGljIEZpZWxkczwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+QSA8c3Ryb25nPk1hZ25ldDwvc3Ryb25nPiBpcyBhbiBvYmplY3QgdGhhdCBwcm9kdWNlcyBhIG1hZ25ldGljIGZpZWxkLiBUaGlzIGludmlzaWJsZSBmaWVsZCBpcyByZXNwb25zaWJsZSBmb3IgdGhlIGZvcmNlIHRoYXQgcHVsbHMgb24gb3RoZXIgZmVycm9tYWduZXRpYyBtYXRlcmlhbHMsIHN1Y2ggYXMgaXJvbiwgc3RlZWwsIG5pY2tlbCwgYW5kIGNvYmFsdC48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+PHN0cm9uZz5NYWduZXRpYyBGaWVsZDo8L3N0cm9uZz4gVGhlIHJlZ2lvbiBhcm91bmQgYSBtYWduZXQgd2hlcmUgdGhlIG1hZ25ldGljIGZvcmNlIGlzIGV4ZXJ0ZWQuIEZpZWxkIGxpbmVzIGV4aXQgdGhlIE5vcnRoIHBvbGUgYW5kIGVudGVyIHRoZSBTb3V0aCBwb2xlLjwvcD4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+Mi4gVHlwZXMgb2YgTWFnbmV0czwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9Imxpc3QtZGlzYyBtbC04IG1iLTQgc3BhY2UteS0xIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5QZXJtYW5lbnQgTWFnbmV0czo8L3N0cm9uZz4gTWF0ZXJpYWxzIHRoYXQgcmV0YWluIHRoZWlyIG1hZ25ldGlzbSBmb3IgYSBsb25nIHRpbWUuIEV4YW1wbGVzIGluY2x1ZGUgTmVvZHltaXVtIChzdHJvbmcgcmFyZS1lYXJ0aCBtYWduZXRzKSBhbmQgQWxuaWNvIChBbHVtaW51bS1OaWNrZWwtQ29iYWx0KS48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPlRlbXBvcmFyeSBNYWduZXRzOjwvc3Ryb25nPiBNYXRlcmlhbHMgdGhhdCBhY3QgbGlrZSBtYWduZXRzIG9ubHkgd2hpbGUgd2l0aGluIGEgc3Ryb25nIG1hZ25ldGljIGZpZWxkLiBTb2Z0IGlyb24gcGFwZXJjbGlwcyBhcmUgYSBjb21tb24gZXhhbXBsZTsgdGhleSBsb3NlIG1hZ25ldGlzbSBvbmNlIHJlbW92ZWQgZnJvbSB0aGUgZmllbGQuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5FbGVjdHJvbWFnbmV0czo8L3N0cm9uZz4gTWFnbmV0cyBjcmVhdGVkIGJ5IGFuIGVsZWN0cmljIGN1cnJlbnQgZmxvd2luZyB0aHJvdWdoIGEgY29pbCBvZiB3aXJlLiBUaGUgbWFnbmV0aXNtIGNhbiBiZSB0dXJuZWQgb24gYW5kIG9mZi48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+My4gRGlhbWFnbmV0aXNtPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij48c3Ryb25nPkRpYW1hZ25ldGljPC9zdHJvbmc+IG1hdGVyaWFscyBhcmUgd2Vha2x5IHJlcGVsbGVkIGJ5IGEgbWFnbmV0aWMgZmllbGQuIFVubGlrZSBmZXJyb21hZ25ldGljIG1hdGVyaWFscyB0aGF0IGFyZSBhdHRyYWN0ZWQsIGRpYW1hZ25ldGljIG1hdGVyaWFscyAobGlrZSB3YXRlciwgd29vZCwgY29wcGVyLCBhbmQgZ29sZCkgY3JlYXRlIGFuIGluZHVjZWQgbWFnbmV0aWMgZmllbGQgaW4gb3Bwb3NpdGlvbiB0byBhbiBleHRlcm5hbGx5IGFwcGxpZWQgbWFnbmV0aWMgZmllbGQuPC9wPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjQuIEN1cnJlbnQgQ3JlYXRlcyBNYWduZXRpc208L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPkluIDE4MjAsIEhhbnMgQ2hyaXN0aWFuIE9lcnN0ZWQgZGlzY292ZXJlZCB0aGF0IDxzdHJvbmc+ZWxlY3RyaWMgY3VycmVudCBjYXVzZXMgYSBtYWduZXRpYyBmaWVsZDwvc3Ryb25nPi4gV2hlbiBlbGVjdHJvbnMgZmxvdyB0aHJvdWdoIGEgd2lyZSwgdGhleSBnZW5lcmF0ZSBhIG1hZ25ldGljIGZpZWxkIHRoYXQgY2lyY2xlcyBhcm91bmQgdGhlIHdpcmUuPC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPjxzdHJvbmc+VGhlIENvbm5lY3Rpb246PC9zdHJvbmc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJsaXN0LWRpc2MgbWwtOCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPkVsZWN0cmljIEZpZWxkczwvc3Ryb25nPiBhcmUgY3JlYXRlZCBieSBlbGVjdHJpYyBjaGFyZ2VzIChwcm90b25zL2VsZWN0cm9ucyksIHdoZXRoZXIgdGhleSBhcmUgbW92aW5nIG9yIHNpdHRpbmcgc3RpbGwuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+TWFnbmV0aWMgRmllbGRzPC9zdHJvbmc+IGFyZSBjcmVhdGVkIDxlbT5vbmx5PC9lbT4gd2hlbiBlbGVjdHJpYyBjaGFyZ2VzIG1vdmUgKGVsZWN0cmljIGN1cnJlbnQpLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij5UaGlzIGlzIHdoeSBlbGVjdHJpY2l0eSBhbmQgbWFnbmV0aXNtIGFyZSB0d28gc2lkZXMgb2YgdGhlIHNhbWUgY29pbjogPHN0cm9uZz5FbGVjdHJvbWFnbmV0aXNtPC9zdHJvbmc+LjwvcD4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+NS4gRWxlY3Ryb21hZ25ldHMgJiBTb2xlbm9pZHM8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPkEgPHN0cm9uZz5Tb2xlbm9pZDwvc3Ryb25nPiBpcyBhIGxvbmcgY29pbCBvZiB3aXJlIHdyYXBwZWQgaW4gbWFueSB0dXJucy4gV2hlbiBjdXJyZW50IGZsb3dzIHRocm91Z2ggaXQsIGl0IGNyZWF0ZXMgYSBuZWFybHkgdW5pZm9ybSBtYWduZXRpYyBmaWVsZCBpbnNpZGUsIHNpbWlsYXIgdG8gYSBiYXIgbWFnbmV0LjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij5BbiA8c3Ryb25nPkVsZWN0cm9tYWduZXQ8L3N0cm9uZz4gaXMgdXN1YWxseSBhIHNvbGVub2lkIHdyYXBwZWQgYXJvdW5kIGEgZmVycm9tYWduZXRpYyBjb3JlIChsaWtlIGFuIGlyb24gbmFpbCkuIFRoZSBjb3JlIGFtcGxpZmllcyB0aGUgbWFnbmV0aWMgZmllbGQgc2lnbmlmaWNhbnRseS48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIGAsCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbVR5cGU6ICdlbUZpZWxkTGFiJywKICAgICAgICAgICAgICAgICAgICAgICAgcXVpejogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiV2hpY2ggbWF0ZXJpYWwgaXMgZGlhbWFnbmV0aWM/Iiwgb3B0aW9uczogWyJJcm9uIiwgIldhdGVyIiwgIk5pY2tlbCIsICJDb2JhbHQiXSwgYTogMSB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiQSBzb2xlbm9pZCBhY3RzIGxpa2UgYSBfX18gd2hlbiBjdXJyZW50IGZsb3dzLiIsIG9wdGlvbnM6IFsiUmVzaXN0b3IiLCAiQ2FwYWNpdG9yIiwgIkJhciBNYWduZXQiLCAiU3dpdGNoIl0sIGE6IDIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIldoYXQgY3JlYXRlcyBhIG1hZ25ldGljIGZpZWxkPyIsIG9wdGlvbnM6IFsiU3RhdGlvbmFyeSBjaGFyZ2VzIiwgIk1vdmluZyBjaGFyZ2VzIChDdXJyZW50KSIsICJQbGFzdGljIiwgIldvb2QiXSwgYTogMSB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiTWFnbmV0aWMgZmllbGQgbGluZXMgdHJhdmVsIGZyb206Iiwgb3B0aW9uczogWyJTb3V0aCB0byBOb3J0aCIsICJOb3J0aCB0byBTb3V0aCIsICJFYXN0IHRvIFdlc3QiLCAiSW5zaWRlIG91dCJdLCBhOiAxIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJBbiBlbGVjdHJvbWFnbmV0IHJlcXVpcmVzIF9fXyB0byB3b3JrLiIsIG9wdGlvbnM6IFsiSGVhdCIsICJMaWdodCIsICJFbGVjdHJpYyBDdXJyZW50IiwgIlNvdW5kIl0sIGE6IDIgfQogICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnbDQnLAogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0xlc3NvbiA0OiBFbGVjdHJvbWVjaGFuaWNhbCBTeXN0ZW1zJywKICAgICAgICAgICAgICAgICAgICAgICAgbGVzc29uOiBgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9InRleHQtMnhsIGZvbnQtYm9sZCBtYi00IHRleHQtYmx1ZS04MDAiPkVsZWN0cm9tZWNoYW5pY2FsIFN5c3RlbXM8L2gzPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj4xLiBFbGVjdHJpY2l0eSAmIE1hZ25ldGlzbSBSZWxhdGlvbnNoaXA8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPkFzIGRpc2NvdmVyZWQgYnkgT2Vyc3RlZCBhbmQgRmFyYWRheSwgZWxlY3RyaWNpdHkgYW5kIG1hZ25ldGlzbSBhcmUgbGlua2VkLiBBIGNoYW5naW5nIGVsZWN0cmljIGZpZWxkIGNyZWF0ZXMgYSBtYWduZXRpYyBmaWVsZCwgYW5kIGEgY2hhbmdpbmcgbWFnbmV0aWMgZmllbGQgY3JlYXRlcyBhbiBlbGVjdHJpYyBmaWVsZC4gVGhpcyBwcmluY2lwbGUgcG93ZXJzIHRoZSBtb2Rlcm4gd29ybGQuPC9wPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj4yLiBGYXJhZGF5J3MgTGF3IG9mIEluZHVjdGlvbjwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+PHN0cm9uZz5GYXJhZGF5J3MgTGF3PC9zdHJvbmc+IHN0YXRlcyB0aGF0IG1vdmluZyBhIG1hZ25ldCBuZWFyIGEgd2lyZSAob3IgY2hhbmdpbmcgdGhlIG1hZ25ldGljIGZpZWxkKSBpbmR1Y2VzIGFuIGVsZWN0cmljIGN1cnJlbnQgaW4gdGhlIHdpcmUuIFRoZSBmYXN0ZXIgdGhlIGNoYW5nZSwgdGhlIG1vcmUgdm9sdGFnZSBpcyBwcm9kdWNlZC48L3A+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjMuIE1vdG9ycyAmIEdlbmVyYXRvcnM8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJsaXN0LWRpc2MgbWwtOCBtYi00IHNwYWNlLXktMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+RWxlY3RyaWMgTW90b3I6PC9zdHJvbmc+IENvbnZlcnRzIDxlbT5FbGVjdHJpY2FsIEVuZXJneTwvZW0+IGludG8gPGVtPktpbmV0aWMgRW5lcmd5PC9lbT4gKG1vdGlvbikuIEN1cnJlbnQgZmxvd2luZyB0aHJvdWdoIGEgY29pbCBpbiBhIG1hZ25ldGljIGZpZWxkIGV4cGVyaWVuY2VzIGEgZm9yY2UgKExvcmVudHogRm9yY2UpIHRoYXQgbWFrZXMgaXQgc3Bpbi48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPkdlbmVyYXRvcjo8L3N0cm9uZz4gQ29udmVydHMgPGVtPktpbmV0aWMgRW5lcmd5PC9lbT4gaW50byA8ZW0+RWxlY3RyaWNhbCBFbmVyZ3k8L2VtPi4gU3Bpbm5pbmcgYSBjb2lsIGluIGEgbWFnbmV0aWMgZmllbGQgaW5kdWNlcyBjdXJyZW50IChGYXJhZGF5J3MgTGF3KS48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+NC4gVHJhbnNmb3JtZXJzICYgUG93ZXIgVHJhbnNtaXNzaW9uPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij5BIDxzdHJvbmc+VHJhbnNmb3JtZXI8L3N0cm9uZz4gdXNlcyBpbmR1Y3Rpb24gdG8gY2hhbmdlIHRoZSB2b2x0YWdlIG9mIEFDIGVsZWN0cmljaXR5LiBJdCBoYXMgdHdvIGNvaWxzIChQcmltYXJ5IGFuZCBTZWNvbmRhcnkpIHdyYXBwZWQgYXJvdW5kIGFuIGlyb24gY29yZS48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9Imxpc3QtZGlzYyBtbC04IG1iLTQgc3BhY2UteS0xIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5TdGVwLVVwOjwvc3Ryb25nPiBJbmNyZWFzZXMgdm9sdGFnZSBmb3IgZWZmaWNpZW50IGxvbmctZGlzdGFuY2UgdHJhbnNtaXNzaW9uLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+U3RlcC1Eb3duOjwvc3Ryb25nPiBEZWNyZWFzZXMgdm9sdGFnZSBmb3Igc2FmZSBob21lIHVzZS48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+NS4gRWxlY3RyaWNhbCB2cy4gRWxlY3Ryb25pY3M8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPjxzdHJvbmc+RWxlY3RyaWNhbDwvc3Ryb25nPiBkZXZpY2VzIHByaW1hcmlseSB1c2UgZWxlY3RyaWNpdHkgZm9yIGVuZXJneSAoaGVhdGluZywgbGlnaHRpbmcsIG1vdG9ycykuIDxzdHJvbmc+RWxlY3Ryb25pY3M8L3N0cm9uZz4gdXNlIGVsZWN0cmljaXR5IHRvIHByb2Nlc3MgaW5mb3JtYXRpb24gKGNvbXB1dGVycywgc2Vuc29ycywgcGhvbmVzKSB1c2luZyBjb21wb25lbnRzIGxpa2UgdHJhbnNpc3RvcnMgYW5kIG1pY3JvY2hpcHMuPC9wPgogICAgICAgICAgICAgICAgICAgICAgICBgLAogICAgICAgICAgICAgICAgICAgICAgICBzaW1UeXBlOiAnZWxlY3Ryb21lY2hhbmljYWxMYWInLAogICAgICAgICAgICAgICAgICAgICAgICBxdWl6OiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJBIGdlbmVyYXRvciBjb252ZXJ0cyBfX18gZW5lcmd5IGludG8gX19fIGVuZXJneS4iLCBvcHRpb25zOiBbIkVsZWN0cmljYWwgLT4gS2luZXRpYyIsICJLaW5ldGljIC0+IEVsZWN0cmljYWwiLCAiVGhlcm1hbCAtPiBLaW5ldGljIiwgIlNvbGFyIC0+IFdpbmQiXSwgYTogMSB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiV2hpY2ggZGV2aWNlIGNoYW5nZXMgdGhlIHZvbHRhZ2Ugb2YgQUMgZWxlY3RyaWNpdHk/Iiwgb3B0aW9uczogWyJNb3RvciIsICJCYXR0ZXJ5IiwgIlRyYW5zZm9ybWVyIiwgIlJlc2lzdG9yIl0sIGE6IDIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIkZhcmFkYXkncyBMYXcgcmVsYXRlcyB0bzoiLCBvcHRpb25zOiBbIlN0YXRpYyBGcmljdGlvbiIsICJJbmR1Y3Rpb24gb2YgQ3VycmVudCIsICJPaG0ncyBMYXciLCAiR3Jhdml0eSJdLCBhOiAxIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJFbGVjdHJvbmljcyBwcmltYXJpbHkgdXNlIGVsZWN0cmljaXR5IHRvOiIsIG9wdGlvbnM6IFsiQ3JlYXRlIEhlYXQiLCAiUHJvY2VzcyBJbmZvcm1hdGlvbiIsICJTcGluIFdoZWVscyIsICJMaWdodCBSb29tcyJdLCBhOiAxIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJJbiBhIG1vdG9yLCBjdXJyZW50IGluIGEgbWFnbmV0aWMgZmllbGQgY3JlYXRlczoiLCBvcHRpb25zOiBbIk1vdGlvbiAoVG9ycXVlKSIsICJDb2xkIiwgIlNpbGVuY2UiLCAiR3Jhdml0eSJdLCBhOiAwIH0KICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ3NvdW5kJzogewogICAgICAgICAgICAgICAgdGl0bGU6ICJTb3VuZCAmIExpZ2h0IiwKICAgICAgICAgICAgICAgIHBhc3N3b3JkSGFzaDogIjM2MTAzOTIiLAogICAgICAgICAgICAgICAgbGVzc29uczogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdsMScsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnTGVzc29uIDE6IFRoZSBTY2llbmNlIG9mIFNvdW5kJywKICAgICAgICAgICAgICAgICAgICAgICAgbGVzc29uOiBgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9InRleHQtMnhsIGZvbnQtYm9sZCBtYi00IHRleHQtYmx1ZS04MDAiPlRoZSBTY2llbmNlIG9mIFNvdW5kPC9oMz4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+MS4gU291bmQgJiBWaWJyYXRpb248L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPjxzdHJvbmc+U291bmQgaXMgdmlicmF0aW9uLjwvc3Ryb25nPiBXaGVuIGFuIG9iamVjdCB2aWJyYXRlcyAobW92ZXMgYmFjayBhbmQgZm9ydGggcXVpY2tseSksIGl0IHB1c2hlcyBhZ2FpbnN0IHRoZSBhaXIgbW9sZWN1bGVzIGFyb3VuZCBpdC4gVGhlc2UgbW9sZWN1bGVzIGJ1bXAgaW50byB0aGVpciBuZWlnaGJvcnMsIHBhc3NpbmcgdGhlIGVuZXJneSBhbG9uZy48L3A+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjIuIEhvdyBTb3VuZCBUcmF2ZWxzPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij5Tb3VuZCBuZWVkcyBhIDxzdHJvbmc+bWVkaXVtPC9zdHJvbmc+IHRvIHRyYXZlbCB0aHJvdWdoLCBzdWNoIGFzIGFpciwgd2F0ZXIsIG9yIHNvbGlkcy4gSXQgY2Fubm90IHRyYXZlbCB0aHJvdWdoIGEgdmFjdXVtIChsaWtlIHNwYWNlKSBiZWNhdXNlIHRoZXJlIGFyZSBubyBwYXJ0aWNsZXMgdG8gY2FycnkgdGhlIHZpYnJhdGlvbi48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+SXQgdHJhdmVscyBhcyBhIDxzdHJvbmc+TG9uZ2l0dWRpbmFsIFdhdmU8L3N0cm9uZz4sIGNvbnNpc3Rpbmcgb2Y6PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJsaXN0LWRpc2MgbWwtOCBtYi00IHNwYWNlLXktMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+Q29tcHJlc3Npb25zOjwvc3Ryb25nPiBBcmVhcyB3aGVyZSBwYXJ0aWNsZXMgYXJlIGJ1bmNoZWQgdG9nZXRoZXIgKEhpZ2ggUHJlc3N1cmUpLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+UmFyZWZhY3Rpb25zOjwvc3Ryb25nPiBBcmVhcyB3aGVyZSBwYXJ0aWNsZXMgYXJlIHNwcmVhZCBhcGFydCAoTG93IFByZXNzdXJlKS48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+My4gV2F2ZSBQcm9wZXJ0aWVzPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0ibGlzdC1kaXNjIG1sLTggbWItNCBzcGFjZS15LTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPldhdmVsZW5ndGg6PC9zdHJvbmc+IFRoZSBkaXN0YW5jZSBiZXR3ZWVuIHR3byBjb21wcmVzc2lvbnMgKG9yIHBlYWtzKS48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPkZyZXF1ZW5jeTo8L3N0cm9uZz4gSG93IG1hbnkgd2F2ZXMgcGFzcyBhIHBvaW50IGluIG9uZSBzZWNvbmQgKG1lYXN1cmVkIGluIEhlcnR6LCBIeikuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5BbXBsaXR1ZGU6PC9zdHJvbmc+IFRoZSBoZWlnaHQgb2YgdGhlIHdhdmUgKG9yIGRlbnNpdHkgb2YgY29tcHJlc3Npb24pLCByZXByZXNlbnRpbmcgZW5lcmd5L2xvdWRuZXNzLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj40LiBQaXRjaCAmIExvdWRuZXNzPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJnLWJsdWUtNTAgcC00IHJvdW5kZWQtbGcgYm9yZGVyLWwtNCBib3JkZXItYmx1ZS01MDAgbWItNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5QaXRjaDwvc3Ryb25nPiBpcyBkZXRlcm1pbmVkIGJ5IDxzdHJvbmc+RnJlcXVlbmN5PC9zdHJvbmc+LiBIaWdoIEZyZXF1ZW5jeSA9IEhpZ2ggUGl0Y2ggKHNxdWVha3kpLiBMb3cgRnJlcXVlbmN5ID0gTG93IFBpdGNoIChkZWVwKS48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im10LTIiPjxzdHJvbmc+TG91ZG5lc3M8L3N0cm9uZz4gaXMgZGV0ZXJtaW5lZCBieSA8c3Ryb25nPkFtcGxpdHVkZTwvc3Ryb25nPi4gSGlnaCBBbXBsaXR1ZGUgPSBMb3VkIHNvdW5kLiBMb3cgQW1wbGl0dWRlID0gUXVpZXQgc291bmQuPC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjUuIFNvdW5kIEVuZXJneTwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+WWVzLCBzb3VuZCBoYXMgZW5lcmd5ISBJdCBpcyBhIGZvcm0gb2YgPHN0cm9uZz5tZWNoYW5pY2FsIGVuZXJneTwvc3Ryb25nPi4gSGlnaGVyIGFtcGxpdHVkZSB3YXZlcyBjYXJyeSBtb3JlIGVuZXJneS4gVGhpcyBpcyB3aHkgbG91ZCBzb3VuZHMgY2FuIHNoYWtlIHdpbmRvd3Mgb3IgZXZlbiBicmVhayBnbGFzcy48L3A+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjYuIEhvdyBXZSBIZWFyPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij5PdXIgZWFycyBhY3QgbGlrZSBmdW5uZWxzIGNhdGNoaW5nIHNvdW5kIHdhdmVzLiBUaGUgd2F2ZXMgaGl0IHRoZSA8c3Ryb25nPmVhcmRydW08L3N0cm9uZz4sIG1ha2luZyBpdCB2aWJyYXRlLiBUaGVzZSB2aWJyYXRpb25zIHRyYXZlbCB0aHJvdWdoIHRpbnkgYm9uZXMgdG8gdGhlIGNvY2hsZWEsIHdoaWNoIGNvbnZlcnRzIHRoZW0gaW50byBlbGVjdHJpY2FsIHNpZ25hbHMgZm9yIHRoZSBicmFpbi48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIGAsCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbVR5cGU6ICdzb3VuZExhYicsCiAgICAgICAgICAgICAgICAgICAgICAgIHF1aXo6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIlNvdW5kIGlzIHByb2R1Y2VkIGJ5OiIsIG9wdGlvbnM6IFsiSGVhdCIsICJWaWJyYXRpb24iLCAiTGlnaHQiLCAiTWFnbmV0aXNtIl0sIGE6IDEgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIlNvdW5kIGNhbm5vdCB0cmF2ZWwgdGhyb3VnaDoiLCBvcHRpb25zOiBbIldhdGVyIiwgIkFpciIsICJWYWN1dW0gKFNwYWNlKSIsICJTdGVlbCJdLCBhOiAyIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJXaGljaCBwcm9wZXJ0eSBkZXRlcm1pbmVzIFBpdGNoPyIsIG9wdGlvbnM6IFsiQW1wbGl0dWRlIiwgIkZyZXF1ZW5jeSIsICJTcGVlZCIsICJDb2xvciJdLCBhOiAxIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJXaGljaCBwcm9wZXJ0eSBkZXRlcm1pbmVzIExvdWRuZXNzPyIsIG9wdGlvbnM6IFsiQW1wbGl0dWRlIiwgIkZyZXF1ZW5jeSIsICJXYXZlbGVuZ3RoIiwgIlBoYXNlIl0sIGE6IDAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIlNvdW5kIHRyYXZlbHMgYXMgYSBfX18gd2F2ZS4iLCBvcHRpb25zOiBbIlRyYW5zdmVyc2UiLCAiTG9uZ2l0dWRpbmFsIiwgIkVsZWN0cm9tYWduZXRpYyIsICJTdGF0aWMiXSwgYTogMSB9CiAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdsMicsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnTGVzc29uIDI6IEFkdmFuY2VkIFNvdW5kIFBoeXNpY3MnLAogICAgICAgICAgICAgICAgICAgICAgICBsZXNzb246IGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIG1iLTQgdGV4dC1ibHVlLTgwMCI+QWR2YW5jZWQgU291bmQgUGh5c2ljczwvaDM+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjEuIFNvdW5kIHZzLiBMaWdodDwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGdhcC00IG1iLTQgdGV4dC1zbSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctYmx1ZS01MCBwLTMgcm91bmRlZCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZyBjbGFzcz0iYmxvY2sgdGV4dC1ibHVlLTgwMCBtYi0xIj5Tb3VuZCBXYXZlczwvc3Ryb25nPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9Imxpc3QtZGlzYyBtbC00IHNwYWNlLXktMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+TWVjaGFuaWNhbCBXYXZlIChOZWVkcyBtZWRpdW0pPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5Mb25naXR1ZGluYWwgKENvbXByZXNzaW9uL1JhcmVmYWN0aW9uKTwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+U2xvdyAofjM0MyBtL3MgaW4gYWlyKTwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmcteWVsbG93LTUwIHAtMyByb3VuZGVkIGJvcmRlciBib3JkZXIteWVsbG93LTIwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmcgY2xhc3M9ImJsb2NrIHRleHQteWVsbG93LTgwMCBtYi0xIj5MaWdodCBXYXZlczwvc3Ryb25nPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9Imxpc3QtZGlzYyBtbC00IHNwYWNlLXktMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+RWxlY3Ryb21hZ25ldGljIFdhdmUgKE5vIG1lZGl1bSk8L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlRyYW5zdmVyc2UgKFVwL0Rvd24pPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5GYXN0ICh+MzAwLDAwMCwwMDAgbS9zKTwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+Mi4gU3BlZWQgJiBQcm9wYWdhdGlvbjwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+VGhlIHNwZWVkIG9mIHNvdW5kIGRlcGVuZHMgb24gdGhlIDxzdHJvbmc+bWVkaXVtPC9zdHJvbmc+IGFuZCA8c3Ryb25nPnRlbXBlcmF0dXJlPC9zdHJvbmc+LiBJdCB0cmF2ZWxzIGZhc3Rlc3QgaW4gc29saWRzIChtb2xlY3VsZXMgYXJlIHRpZ2h0bHkgcGFja2VkKSwgc2xvd2VyIGluIGxpcXVpZHMsIGFuZCBzbG93ZXN0IGluIGdhc2VzLjwvcD4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+My4gVGhlIERvcHBsZXIgRWZmZWN0PC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij5UaGUgY2hhbmdlIGluIGZyZXF1ZW5jeSBvZiBhIHdhdmUgZm9yIGFuIG9ic2VydmVyIG1vdmluZyByZWxhdGl2ZSB0byBpdHMgc291cmNlLiBUaGluayBvZiBhIHNpcmVuIHBhc3NpbmcgYnk6IDxzdHJvbmc+SGlnaCBQaXRjaDwvc3Ryb25nPiBhcyBpdCBhcHByb2FjaGVzICh3YXZlcyBidW5jaCB1cCksIDxzdHJvbmc+TG93IFBpdGNoPC9zdHJvbmc+IGFzIGl0IGxlYXZlcyAod2F2ZXMgc3ByZWFkIG91dCkuPC9wPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj40LiBJbnRlcmZlcmVuY2UgJiBOb2lzZSBDYW5jZWxsYXRpb248L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPjxzdHJvbmc+Q29uc3RydWN0aXZlIEludGVyZmVyZW5jZTo8L3N0cm9uZz4gV2F2ZXMgYWxpZ24gKHBlYWsgbWVldHMgcGVhaykg4oaSIExvdWRlciBzb3VuZC48YnI+PHN0cm9uZz5EZXN0cnVjdGl2ZSBJbnRlcmZlcmVuY2U6PC9zdHJvbmc+IFdhdmVzIG1pc2FsaWduIChwZWFrIG1lZXRzIHRyb3VnaCkg4oaSIFNpbGVuY2UuIDxicj48ZW0+Tm9pc2UtY2FuY2VsaW5nIGhlYWRwaG9uZXM8L2VtPiB1c2UgZGVzdHJ1Y3RpdmUgaW50ZXJmZXJlbmNlIGJ5IGNyZWF0aW5nIGFuICJhbnRpLW5vaXNlIiB3YXZlIHRvIGNhbmNlbCBvdXQgYmFja2dyb3VuZCBub2lzZS48L3A+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjUuIFJlc29uYW5jZSAmIFNvbmljIEJvb208L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPjxzdHJvbmc+UmVzb25hbmNlOjwvc3Ryb25nPiBXaGVuIGFuIG9iamVjdCBpcyBmb3JjZWQgdG8gdmlicmF0ZSBhdCBpdHMgbmF0dXJhbCBmcmVxdWVuY3ksIGFtcGxpdHVkZSBpbmNyZWFzZXMgZHJhbWF0aWNhbGx5IChlLmcuLCBzaGF0dGVyaW5nIGdsYXNzIHdpdGggdm9pY2UpLjxicj48c3Ryb25nPlNvbmljIEJvb206PC9zdHJvbmc+IFdoZW4gYW4gb2JqZWN0IHRyYXZlbHMgZmFzdGVyIHRoYW4gc291bmQsIGl0IGJyZWFrcyB0aGUgc291bmQgYmFycmllciwgY3JlYXRpbmcgYSBzaG9ja3dhdmUgaGVhcmQgYXMgYSBsb3VkIGJvb20uPC9wPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj42LiBSZWZsZWN0aW9uICYgRWNob2xvY2F0aW9uPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij5Tb3VuZCBib3VuY2VzIG9mZiBzdXJmYWNlcyAoRWNobykuIEJhdHMgYW5kIHN1Ym1hcmluZXMgdXNlIDxzdHJvbmc+RWNob2xvY2F0aW9uIChTb25hcik8L3N0cm9uZz4gdG8gbmF2aWdhdGUgYnkgbGlzdGVuaW5nIGZvciB0aGVzZSByZWZsZWN0aW9ucy48L3A+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjcuIFR5cGVzIG9mIFNvdW5kPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij48c3Ryb25nPkluZnJhc291bmQ6PC9zdHJvbmc+IDwgMjAgSHogKEVsZXBoYW50cykuIDxzdHJvbmc+QXVkaWJsZTo8L3N0cm9uZz4gMjAgSHogLSAyMCBrSHogKEh1bWFucykuIDxzdHJvbmc+VWx0cmFzb3VuZDo8L3N0cm9uZz4gPiAyMCBrSHogKEJhdHMsIE1lZGljYWwgaW1hZ2luZykuPC9wPgogICAgICAgICAgICAgICAgICAgICAgICBgLAogICAgICAgICAgICAgICAgICAgICAgICBzaW1UeXBlOiAnYWR2YW5jZWRTb3VuZExhYicsCiAgICAgICAgICAgICAgICAgICAgICAgIHF1aXo6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIlNvdW5kIHRyYXZlbHMgZmFzdGVzdCBpbjoiLCBvcHRpb25zOiBbIkdhc2VzIiwgIkxpcXVpZHMiLCAiU29saWRzIiwgIlZhY3V1bSJdLCBhOiAyIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJUaGUgRG9wcGxlciBFZmZlY3QgZXhwbGFpbnMgYSBjaGFuZ2UgaW46Iiwgb3B0aW9uczogWyJMb3VkbmVzcyIsICJQaXRjaC9GcmVxdWVuY3kiLCAiU3BlZWQiLCAiVGltYnJlIl0sIGE6IDEgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIk5vaXNlIGNhbmNlbGluZyBoZWFkcGhvbmVzIHVzZToiLCBvcHRpb25zOiBbIkNvbnN0cnVjdGl2ZSBJbnRlcmZlcmVuY2UiLCAiRGVzdHJ1Y3RpdmUgSW50ZXJmZXJlbmNlIiwgIlJlc29uYW5jZSIsICJSZWZsZWN0aW9uIl0sIGE6IDEgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIkZyZXF1ZW5jaWVzIGFib3ZlIGh1bWFuIGhlYXJpbmcgYXJlIGNhbGxlZDoiLCBvcHRpb25zOiBbIkluZnJhc291bmQiLCAiU3VwZXJzb25pYyIsICJVbHRyYXNvdW5kIiwgIkh5cGVyc29uaWMiXSwgYTogMiB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiQSBTb25pYyBCb29tIG9jY3VycyB3aGVuIGFuIG9iamVjdDoiLCBvcHRpb25zOiBbIlN0b3BzIG1vdmluZyIsICJUcmF2ZWxzIGZhc3RlciB0aGFuIHNvdW5kIiwgIlZpYnJhdGVzIiwgIkhpdHMgd2F0ZXIiXSwgYTogMSB9CiAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdsMycsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnTGVzc29uIDM6IFRoZSBOYXR1cmUgb2YgTGlnaHQnLAogICAgICAgICAgICAgICAgICAgICAgICBsZXNzb246IGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIG1iLTQgdGV4dC1ibHVlLTgwMCI+VGhlIE5hdHVyZSBvZiBMaWdodDwvaDM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+MS4gV2hhdCBpcyBMaWdodD88L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPkxpZ2h0IGlzIGEgZm9ybSBvZiBlbmVyZ3kgdGhhdCB0cmF2ZWxzIGFzIGFuIDxzdHJvbmc+RWxlY3Ryb21hZ25ldGljIFdhdmU8L3N0cm9uZz4uIFVubGlrZSBzb3VuZCwgaXQgZG9lcyBub3QgbmVlZCBhIG1lZGl1bSAoYWlyLCB3YXRlcikgdG8gdHJhdmVsOyBpdCBjYW4gbW92ZSB0aHJvdWdoIHRoZSB2YWN1dW0gb2Ygc3BhY2UuPC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjIuIFRoZSBFbGVjdHJvbWFnbmV0aWMgU3BlY3RydW08L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPlZpc2libGUgbGlnaHQgaXMganVzdCBhIHRpbnkgcGFydCBvZiB0aGUgPHN0cm9uZz5FbGVjdHJvbWFnbmV0aWMgKEVNKSBTcGVjdHJ1bTwvc3Ryb25nPi4gVGhlIHNwZWN0cnVtIGluY2x1ZGVzIFJhZGlvIFdhdmVzIChsb3dlc3QgZW5lcmd5KSwgTWljcm93YXZlcywgSW5mcmFyZWQsIFZpc2libGUgTGlnaHQsIFVsdHJhdmlvbGV0LCBYLXJheXMsIGFuZCBHYW1tYSBSYXlzIChoaWdoZXN0IGVuZXJneSkuPC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjMuIFdhdmUtUGFydGljbGUgRHVhbGl0eTwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+SXMgbGlnaHQgYSB3YXZlIG9yIGEgcGFydGljbGU/IEl0J3MgYm90aCEgTGlnaHQgYmVoYXZlcyBsaWtlIGEgd2F2ZSAoaW50ZXJmZXJlbmNlLCBkaWZmcmFjdGlvbikgYnV0IGlzIG1hZGUgb2YgdGlueSBwYWNrZXRzIG9mIGVuZXJneSBjYWxsZWQgPHN0cm9uZz5QaG90b25zPC9zdHJvbmc+IChwYXJ0aWNsZXMpLiBQaG90b25zIGNhcnJ5IGVuZXJneSBwcm9wb3J0aW9uYWwgdG8gdGhlaXIgZnJlcXVlbmN5IChFPWhmKS48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+NC4gSG93IExpZ2h0IFRyYXZlbHM8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPkxpZ2h0IHRyYXZlbHMgaW4gc3RyYWlnaHQgbGluZXMgKFJlY3RpbGluZWFyIFByb3BhZ2F0aW9uKSB1bnRpbCBpdCBpbnRlcmFjdHMgd2l0aCBhbiBvYmplY3QuPC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJsaXN0LWRpc2MgbWwtOCBtYi00IHNwYWNlLXktMSI+PGxpPjxzdHJvbmc+UmVmbGVjdGlvbjo8L3N0cm9uZz4gTGlnaHQgYm91bmNlcyBvZmYgc3VyZmFjZXMgKGUuZy4sIG1pcnJvcnMpLiBBbmdsZSBvZiBJbmNpZGVuY2UgPSBBbmdsZSBvZiBSZWZsZWN0aW9uLjwvbGk+PGxpPjxzdHJvbmc+UmVmcmFjdGlvbjo8L3N0cm9uZz4gTGlnaHQgYmVuZHMgd2hlbiBwYXNzaW5nIGZyb20gb25lIG1lZGl1bSB0byBhbm90aGVyIChlLmcuLCBhaXIgdG8gd2F0ZXIpIGJlY2F1c2UgaXRzIHNwZWVkIGNoYW5nZXMuPC9saT48bGk+PHN0cm9uZz5BYnNvcnB0aW9uOjwvc3Ryb25nPiBMaWdodCBlbmVyZ3kgaXMgdGFrZW4gaW4gYnkgdGhlIG9iamVjdCBhbmQgY29udmVydGVkIHRvIGhlYXQuPC9saT48L3VsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjUuIENvbG9yICYgQ29tcG9zaXRpb248L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPjxzdHJvbmc+V2hpdGUgTGlnaHQ8L3N0cm9uZz4gaXMgYSBtaXh0dXJlIG9mIGFsbCB2aXNpYmxlIGNvbG9ycyAoUk9ZR0JJVikuIFlvdSBjYW4gc2VlIHRoaXMgd2hlbiBhIHByaXNtIHNwbGl0cyB3aGl0ZSBsaWdodCBpbnRvIGEgcmFpbmJvdy48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+PHN0cm9uZz5XaHkgYXJlIG9iamVjdHMgY29sb3JlZD88L3N0cm9uZz4gQW4gb2JqZWN0J3MgY29sb3IgaXMgZGV0ZXJtaW5lZCBieSB0aGUgbGlnaHQgaXQgPGVtPnJlZmxlY3RzPC9lbT4uIEEgcmVkIGFwcGxlIGFic29yYnMgYWxsIGNvbG9ycyBleGNlcHQgcmVkLCB3aGljaCBpdCByZWZsZWN0cyB0byB5b3VyIGV5ZXMuPC9wPgogICAgICAgICAgICAgICAgICAgICAgICBgLAogICAgICAgICAgICAgICAgICAgICAgICBzaW1UeXBlOiAnbGlnaHRMYWInLAogICAgICAgICAgICAgICAgICAgICAgICBxdWl6OiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJMaWdodCBpcyBhIGZvcm0gb2Y6Iiwgb3B0aW9uczogWyJNZWNoYW5pY2FsIFdhdmUiLCAiRWxlY3Ryb21hZ25ldGljIFJhZGlhdGlvbiIsICJTb3VuZCIsICJTdGF0aWMgRWxlY3RyaWNpdHkiXSwgYTogMSB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiV2hpY2ggaGFzIHRoZSBoaWdoZXN0IGVuZXJneT8iLCBvcHRpb25zOiBbIlJhZGlvIFdhdmVzIiwgIlZpc2libGUgTGlnaHQiLCAiR2FtbWEgUmF5cyIsICJNaWNyb3dhdmVzIl0sIGE6IDIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIldoZW4gbGlnaHQgYm91bmNlcyBvZmYgYSBtaXJyb3IsIGl0IGlzIGNhbGxlZDoiLCBvcHRpb25zOiBbIlJlZnJhY3Rpb24iLCAiUmVmbGVjdGlvbiIsICJEaWZmcmFjdGlvbiIsICJBYnNvcnB0aW9uIl0sIGE6IDEgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIldoeSBkb2VzIGEgbGVhZiBsb29rIGdyZWVuPyIsIG9wdGlvbnM6IFsiSXQgYWJzb3JicyBncmVlbiBsaWdodCIsICJJdCByZWZsZWN0cyBncmVlbiBsaWdodCIsICJJdCBlbWl0cyBncmVlbiBsaWdodCIsICJJdCBpcyB0cmFuc3BhcmVudCJdLCBhOiAxIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJMaWdodCBjb25zaXN0cyBvZiBwYXJ0aWNsZXMgY2FsbGVkOiIsIG9wdGlvbnM6IFsiRWxlY3Ryb25zIiwgIlByb3RvbnMiLCAiUGhvdG9ucyIsICJOZXV0cm9ucyJdLCBhOiAyIH0KICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZDogJ2w0JywKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdMZXNzb24gNDogUHJvcGVydGllcyBvZiBMaWdodCAmIE9wdGljcycsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlc3NvbjogYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJ0ZXh0LTJ4bCBmb250LWJvbGQgbWItNCB0ZXh0LWJsdWUtODAwIj5Qcm9wZXJ0aWVzIG9mIExpZ2h0ICYgT3B0aWNzPC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjEuIFdhdmUgUHJvcGVydGllcyBvZiBMaWdodDwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+TGlnaHQgYmVoYXZlcyBhcyBhIHRyYW5zdmVyc2UgZWxlY3Ryb21hZ25ldGljIHdhdmUuPC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJsaXN0LWRpc2MgbWwtOCBtYi00IHNwYWNlLXktMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+QW1wbGl0dWRlOjwvc3Ryb25nPiBEZXRlcm1pbmVzIHRoZSA8c3Ryb25nPkludGVuc2l0eSAoQnJpZ2h0bmVzcyk8L3N0cm9uZz4gb2YgdGhlIGxpZ2h0LiBIaWdoZXIgYW1wbGl0dWRlID0gQnJpZ2h0ZXIgbGlnaHQuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5GcmVxdWVuY3k6PC9zdHJvbmc+IERldGVybWluZXMgdGhlIDxzdHJvbmc+Q29sb3I8L3N0cm9uZz4gKEVuZXJneSkuIEhpZ2hlciBmcmVxdWVuY3kgPSBCbHVlL1Zpb2xldCAoSGlnaCBFbmVyZ3kpLiBMb3dlciBmcmVxdWVuY3kgPSBSZWQgKExvdyBFbmVyZ3kpLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+U3BlZWQgb2YgTGlnaHQgKGMpOjwvc3Ryb25nPiBJbiBhIHZhY3V1bSwgbGlnaHQgdHJhdmVscyBhdCBhcHByb3hpbWF0ZWx5IDxzdHJvbmc+MzAwLDAwMCwwMDAgbS9zPC9zdHJvbmc+LiBJdCBpcyB0aGUgY29zbWljIHNwZWVkIGxpbWl0LjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj4yLiBSZWZsZWN0aW9uIHZzLiBSZWZyYWN0aW9uPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgZ2FwLTQgbWItNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctZ3JheS01MCBwLTMgcm91bmRlZCBib3JkZXIiPjxzdHJvbmc+UmVmbGVjdGlvbjwvc3Ryb25nPjxicj5MaWdodCBib3VuY2VzIG9mZiBhIHN1cmZhY2UuIDxicj48ZW0+TGF3IG9mIFJlZmxlY3Rpb246PC9lbT4gQW5nbGUgb2YgSW5jaWRlbmNlID0gQW5nbGUgb2YgUmVmbGVjdGlvbi48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy1ibHVlLTUwIHAtMyByb3VuZGVkIGJvcmRlciI+PHN0cm9uZz5SZWZyYWN0aW9uPC9zdHJvbmc+PGJyPkxpZ2h0IGJlbmRzIHdoZW4gcGFzc2luZyBpbnRvIGEgZGlmZmVyZW50IG1lZGl1bSAoZS5nLiwgQWlyIHRvIEdsYXNzKSBiZWNhdXNlIGl0cyBzcGVlZCBjaGFuZ2VzLjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjMuIFJlZnJhY3RpdmUgSW5kZXggKG4pPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij5UaGUgPHN0cm9uZz5SZWZyYWN0aXZlIEluZGV4PC9zdHJvbmc+IG1lYXN1cmVzIGhvdyBtdWNoIGEgbWF0ZXJpYWwgc2xvd3MgZG93biBsaWdodC4gPGJyPkZvcm11bGE6IG4gPSBjIC8gdiAoU3BlZWQgaW4gdmFjdXVtIC8gU3BlZWQgaW4gbWVkaXVtKS4gPGJyPkhpZ2hlciBuIG1lYW5zIGxpZ2h0IHRyYXZlbHMgc2xvd2VyIGFuZCBiZW5kcyBtb3JlLjwvcD4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+NC4gRGlmZnJhY3Rpb248L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPjxzdHJvbmc+RGlmZnJhY3Rpb248L3N0cm9uZz4gaXMgdGhlIGJlbmRpbmcgb2Ygd2F2ZXMgYXJvdW5kIG9ic3RhY2xlcyBvciB0aHJvdWdoIG9wZW5pbmdzLiBJdCBpcyBtb3N0IG5vdGljZWFibGUgd2hlbiB0aGUgb3BlbmluZyBzaXplIGlzIGNsb3NlIHRvIHRoZSB3YXZlbGVuZ3RoIG9mIHRoZSBsaWdodC4gVGhpcyBjcmVhdGVzIGludGVyZmVyZW5jZSBwYXR0ZXJucyAobGlnaHQgYW5kIGRhcmsgYmFuZHMpLjwvcD4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIG1iLTIgdGV4dC1ncmF5LTcwMCI+NS4gQ3VydmVkIE1pcnJvcnM8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJsaXN0LWRpc2MgbWwtOCBtYi00IHNwYWNlLXktMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+Q29uY2F2ZSBNaXJyb3IgKENvbnZlcmdpbmcpOjwvc3Ryb25nPiBDdXJ2ZXMgaW53YXJkIChsaWtlIGEgY2F2ZSkuIENhbiBmb2N1cyBsaWdodCB0byBhIHBvaW50LiBDYW4gY3JlYXRlIG1hZ25pZmllZCBvciBpbnZlcnRlZCBpbWFnZXMgZGVwZW5kaW5nIG9uIGRpc3RhbmNlLiAoZS5nLiwgTWFrZXVwIG1pcnJvcnMsIEhlYWRsaWdodHMpLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+Q29udmV4IE1pcnJvciAoRGl2ZXJnaW5nKTo8L3N0cm9uZz4gQ3VydmVzIG91dHdhcmQuIEFsd2F5cyBjcmVhdGVzIGEgc21hbGxlciwgdXByaWdodCwgdmlydHVhbCBpbWFnZS4gT2ZmZXJzIGEgd2lkZXIgZmllbGQgb2Ygdmlldy4gKGUuZy4sIFNlY3VyaXR5IG1pcnJvcnMsIENhciBzaWRlIG1pcnJvcnMpLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj7wn5SsIEV4cGVyaW1lbnRzIHRvIFRyeSBhdCBIb21lPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJnLWdyZWVuLTUwIHAtNCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItZ3JlZW4tMjAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9Imxpc3QtZGlzYyBtbC02IHNwYWNlLXktMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPlRoZSBCcm9rZW4gUGVuY2lsOjwvc3Ryb25nPiBQbGFjZSBhIHBlbmNpbCBpbiBhIGNsZWFyIGdsYXNzIG9mIHdhdGVyLiBMb29rIGZyb20gdGhlIHNpZGUuIFRoZSBwZW5jaWwgYXBwZWFycyBicm9rZW4gb3Igc2hpZnRlZCBkdWUgdG8gPHN0cm9uZz5SZWZyYWN0aW9uPC9zdHJvbmc+LjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPkNEIFJhaW5ib3c6PC9zdHJvbmc+IFNoaW5lIGEgZmxhc2hsaWdodCBvbiB0aGUgYmFjayBvZiBhbiBvbGQgQ0QvRFZELiBUaGUgdGlueSB0cmFja3MgYWN0IGFzIGEgZGlmZnJhY3Rpb24gZ3JhdGluZywgc3BsaXR0aW5nIGxpZ2h0IGludG8gYSByYWluYm93IHZpYSA8c3Ryb25nPkRpZmZyYWN0aW9uPC9zdHJvbmc+LjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPlNwb29uIE9wdGljczo8L3N0cm9uZz4gTG9vayBhdCB5b3VyIHJlZmxlY3Rpb24gaW4gYSBzaGlueSBzcG9vbi4gVGhlIGluc2lkZSAoQ29uY2F2ZSkgZmxpcHMgeW91IHVwc2lkZSBkb3duLiBUaGUgYmFjayAoQ29udmV4KSBtYWtlcyB5b3UgbG9vayBzbWFsbCBhbmQgdXByaWdodC48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgYCwKICAgICAgICAgICAgICAgICAgICAgICAgc2ltVHlwZTogJ29wdGljc0xhYicsCiAgICAgICAgICAgICAgICAgICAgICAgIHF1aXo6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIldoaWNoIHByb3BlcnR5IG9mIGEgbGlnaHQgd2F2ZSBkZXRlcm1pbmVzIGl0cyBicmlnaHRuZXNzPyIsIG9wdGlvbnM6IFsiRnJlcXVlbmN5IiwgIldhdmVsZW5ndGgiLCAiQW1wbGl0dWRlIiwgIlNwZWVkIl0sIGE6IDIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIlJlZnJhY3RpdmUgSW5kZXggaXMgYSBtZWFzdXJlIG9mOiIsIG9wdGlvbnM6IFsiSG93IG11Y2ggbGlnaHQgYmVuZHMvc2xvd3MiLCAiVGhlIGNvbG9yIG9mIGxpZ2h0IiwgIlRoZSByZWZsZWN0aW9uIGFuZ2xlIiwgIkRpZmZyYWN0aW9uIl0sIGE6IDAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIkEgQ29udmV4IG1pcnJvciBhbHdheXMgcHJvZHVjZXMgYW4gaW1hZ2UgdGhhdCBpczoiLCBvcHRpb25zOiBbIlVwc2lkZSBkb3duIiwgIkxhcmdlciIsICJTbWFsbGVyIGFuZCB1cHJpZ2h0IiwgIlJlYWwiXSwgYTogMiB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiVGhlIGJlbmRpbmcgb2YgbGlnaHQgYXJvdW5kIGEgY29ybmVyIGlzIGNhbGxlZDoiLCBvcHRpb25zOiBbIlJlZnJhY3Rpb24iLCAiUmVmbGVjdGlvbiIsICJEaWZmcmFjdGlvbiIsICJEaXNwZXJzaW9uIl0sIGE6IDIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIkxpZ2h0IHRyYXZlbHMgZmFzdGVzdCBpbjoiLCBvcHRpb25zOiBbIldhdGVyIiwgIkdsYXNzIiwgIlZhY3V1bSIsICJEaWFtb25kIl0sIGE6IDIgfQogICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9LAogICAgICAgICAgICAnbWF0aCc6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiTWF0aCAmIE1vbmV5IiwKICAgICAgICAgICAgICAgIHBhc3N3b3JkSGFzaDogIjMwMTQ0ODIiLAogICAgICAgICAgICAgICAgbGVzc29uczogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdsMScsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnQ2FuIE1hdGggSGVscCBZb3UgU2F2ZSBNb25leT8nLAogICAgICAgICAgICAgICAgICAgICAgICBsZXNzb246IGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIG1iLTQgdGV4dC1ibHVlLTgwMCI+Q2FuIE1hdGggSGVscCBZb3UgU2F2ZSBNb25leT88L2gzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPkFic29sdXRlbHkhIFVuZGVyc3RhbmRpbmcgdGhlIG1hdGggYmVoaW5kIG1vbmV5IC0gc3BlY2lmaWNhbGx5IDxzdHJvbmc+cGVyY2VudGFnZXM8L3N0cm9uZz4gYW5kIDxzdHJvbmc+aW50ZXJlc3Q8L3N0cm9uZz4gLSBpcyB0aGUga2V5IHRvIGJ1aWxkaW5nIHdlYWx0aCBhbmQgYXZvaWRpbmcgZGVidCB0cmFwcy48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj4xLiBUaGUgUG93ZXIgb2YgUGVyY2VudGFnZXM8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPlBlcmNlbnRhZ2VzIGFyZSBldmVyeXdoZXJlIGluIGZpbmFuY2UuIEEgc21hbGwgZGlmZmVyZW5jZSBpbiBwZXJjZW50YWdlIHJhdGVzIGNhbiBtZWFuIHRob3VzYW5kcyBvZiBkb2xsYXJzIG92ZXIgdGltZS48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9Imxpc3QtZGlzYyBtbC04IG1iLTQgc3BhY2UteS0xIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5JbnRlcmVzdCBSYXRlczo8L3N0cm9uZz4gVGhlIGNvc3Qgb2YgYm9ycm93aW5nIG1vbmV5IG9yIHRoZSByZXdhcmQgZm9yIHNhdmluZyBpdC48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPkluZmxhdGlvbjo8L3N0cm9uZz4gVGhlIHJhdGUgYXQgd2hpY2ggcHJpY2VzIHJpc2UsIHJlZHVjaW5nIHlvdXIgcHVyY2hhc2luZyBwb3dlciAodXN1YWxseSB+Mi0zJSBwZXIgeWVhcikuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCBtYi0yIHRleHQtZ3JheS03MDAiPjIuIFNpbXBsZSB2cy4gQ29tcG91bmQgSW50ZXJlc3Q8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPlRoaXMgaXMgdGhlIG1vc3QgaW1wb3J0YW50IGNvbmNlcHQgaW4gZmluYW5jZS48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy1ibHVlLTUwIHAtNCByb3VuZGVkLWxnIGJvcmRlci1sLTQgYm9yZGVyLWJsdWUtNTAwIG1iLTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+U2ltcGxlIEludGVyZXN0Ojwvc3Ryb25nPiBDYWxjdWxhdGVkIG9ubHkgb24gdGhlIHByaW5jaXBhbCBhbW91bnQuIDxicj48ZW0+Rm9ybXVsYTo8L2VtPiBBID0gUCgxICsgcnQpPC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtdC0yIj48c3Ryb25nPkNvbXBvdW5kIEludGVyZXN0Ojwvc3Ryb25nPiBDYWxjdWxhdGVkIG9uIHRoZSBwcmluY2lwYWwgYW1vdW50IEFORCB0aGUgYWNjdW11bGF0ZWQgaW50ZXJlc3QuICJJbnRlcmVzdCBvbiBpbnRlcmVzdC4iIDxicj48ZW0+Rm9ybXVsYTo8L2VtPiBBID0gUCgxICsgci9uKTxzdXA+KG50KTwvc3VwPjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPjxzdHJvbmc+Rm9yIEludmVzdG1lbnRzOjwvc3Ryb25nPiBDb21wb3VuZCBpbnRlcmVzdCBpcyB5b3VyIGJlc3QgZnJpZW5kLiBJdCBhbGxvd3MgeW91ciBtb25leSB0byBncm93IGV4cG9uZW50aWFsbHkuPC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im1iLTQiPjxzdHJvbmc+Rm9yIExvYW5zOjwvc3Ryb25nPiBDb21wb3VuZCBpbnRlcmVzdCBpcyB5b3VyIGVuZW15LiBDcmVkaXQgY2FyZHMgb2Z0ZW4gY29tcG91bmQgZGFpbHksIGNhdXNpbmcgZGVidCB0byBzcGlyYWwgb3V0IG9mIGNvbnRyb2wuPC9wPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgbWItMiB0ZXh0LWdyYXktNzAwIj4zLiBUaGUgUnVsZSBvZiA3MjwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ibWItNCI+QSBxdWljayBtZW50YWwgbWF0aCB0cmljayB0byBlc3RpbWF0ZSBob3cgbG9uZyBpdCB0YWtlcyB0byBkb3VibGUgeW91ciBtb25leS48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0iZm9udC1tb25vIGJnLWdyYXktMTAwIHAtMiByb3VuZGVkIHRleHQtY2VudGVyIj5ZZWFycyB0byBEb3VibGUg4omIIDcyIC8gSW50ZXJlc3QgUmF0ZTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi00Ij48ZW0+RXhhbXBsZTo8L2VtPiBBdCA2JSBpbnRlcmVzdCwgeW91ciBtb25leSBkb3VibGVzIGluIDcyLzYgPSAxMiB5ZWFycy48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIGAsCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbVR5cGU6ICdmaW5hbmNpYWxDYWxjdWxhdG9yJywKICAgICAgICAgICAgICAgICAgICAgICAgcXVpejogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiV2hpY2ggdHlwZSBvZiBpbnRlcmVzdCBncm93cyBmYXN0ZXI/Iiwgb3B0aW9uczogWyJTaW1wbGUgSW50ZXJlc3QiLCAiQ29tcG91bmQgSW50ZXJlc3QiLCAiRml4ZWQgSW50ZXJlc3QiLCAiTGluZWFyIEludGVyZXN0Il0sIGE6IDEgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIlRoZSBSdWxlIG9mIDcyIGVzdGltYXRlczoiLCBvcHRpb25zOiBbIkluZmxhdGlvbiByYXRlIiwgIlRpbWUgdG8gZG91YmxlIGludmVzdG1lbnQiLCAiVGF4IHBlcmNlbnRhZ2UiLCAiTG9hbiBwYXltZW50cyJdLCBhOiAxIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHE6ICJJZiB5b3UgaGF2ZSBhIGxvYW4sIHlvdSB3YW50IHRoZSBpbnRlcmVzdCByYXRlIHRvIGJlOiIsIG9wdGlvbnM6IFsiSGlnaCIsICJMb3ciLCAiVmFyaWFibGUiLCAiTmVnYXRpdmUiXSwgYTogMSB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBxOiAiU2ltcGxlIGludGVyZXN0IGlzIGNhbGN1bGF0ZWQgb246Iiwgb3B0aW9uczogWyJQcmluY2lwYWwgb25seSIsICJQcmluY2lwYWwgKyBJbnRlcmVzdCIsICJUaW1lIG9ubHkiLCAiUmF0ZSBvbmx5Il0sIGE6IDAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcTogIkF0IDglIGludGVyZXN0LCBob3cgbWFueSB5ZWFycyB0byBkb3VibGUgeW91ciBtb25leSAoUnVsZSBvZiA3Mik/Iiwgb3B0aW9uczogWyI4IiwgIjkiLCAiNzIiLCAiNiJdLCBhOiAxIH0KICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIC8vIC0tLSBBUFAgU1RBVEUgJiBVSSBMT0dJQyAtLS0KICAgICAgICBjb25zdCBBcHAgPSB7CiAgICAgICAgICAgIHN0YXRlOiB7CiAgICAgICAgICAgICAgICBjYXRlZ29yeTogbnVsbCwKICAgICAgICAgICAgICAgIGxlc3NvbklkOiBudWxsLAogICAgICAgICAgICAgICAgdGFiOiAnbGVzc29uJywKICAgICAgICAgICAgICAgIHVubG9ja2VkOiBbXSwgLy8gU3RvcmVzIElEcyBvZiB1bmxvY2tlZCBjYXRlZ29yaWVzCiAgICAgICAgICAgICAgICBwZW5kaW5nQ2F0ZWdvcnk6IG51bGwKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJOYXYoKTsKICAgICAgICAgICAgICAgIC8vIEFkZCBFbnRlciBrZXkgc3VwcG9ydCBmb3IgcGFzc3dvcmQgbW9kYWwKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC1pbnB1dCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIEFwcC5zdWJtaXRQYXNzd29yZCgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICByZW5kZXJOYXY6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hdi1idXR0b25zJyk7CiAgICAgICAgICAgICAgICBjb25zdCBjYXRlZ29yaWVzID0gT2JqZWN0LmtleXMoY3VycmljdWx1bSk7CiAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGNhdGVnb3JpZXMuZm9yRWFjaChjYXRLZXkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhdCA9IGN1cnJpY3VsdW1bY2F0S2V5XTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1NlbGVjdGVkID0gdGhpcy5zdGF0ZS5jYXRlZ29yeSA9PT0gY2F0S2V5OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzVW5sb2NrZWQgPSB0aGlzLnN0YXRlLnVubG9ja2VkLmluY2x1ZGVzKGNhdEtleSk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgbGV0IGNsYXNzZXMgPSAicHgtMiBweS0yIHJvdW5kZWQtbGcgdGV4dC1zbSBmb250LWJvbGQgdHJhbnNpdGlvbi1hbGwgYm9yZGVyLTIgIjsKICAgICAgICAgICAgICAgICAgICBpZiAoaXNTZWxlY3RlZCkgewogICAgICAgICAgICAgICAgICAgICAgICBjbGFzc2VzICs9ICJiZy1ncmVlbi1wcmltYXJ5IHRleHQtd2hpdGUgYm9yZGVyLWdyZWVuLXByaW1hcnkgc2hhZG93LWxnIjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBjbGFzc2VzICs9ICJiZy1icmFuZC1kYXJrIHRleHQtZ3JheS0zMDAgYm9yZGVyLWdyYXktNjAwIGhvdmVyOmJvcmRlci13aGl0ZSBob3Zlcjp0ZXh0LXdoaXRlIjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTmFtZSA9IGNsYXNzZXM7CiAgICAgICAgICAgICAgICAgICAgYnRuLmlubmVySFRNTCA9IGAke2lzVW5sb2NrZWQgPyAn8J+UkycgOiAn8J+Ukid9ICR7Y2F0LnRpdGxlfWA7CiAgICAgICAgICAgICAgICAgICAgYnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNlbGVjdENhdGVnb3J5KGNhdEtleSk7CiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGJ0bik7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIHNlbGVjdENhdGVnb3J5OiBmdW5jdGlvbihjYXRLZXkpIHsKICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGFscmVhZHkgdW5sb2NrZWQKICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnVubG9ja2VkLmluY2x1ZGVzKGNhdEtleSkpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRDYXRlZ29yeShjYXRLZXkpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnBlbmRpbmdDYXRlZ29yeSA9IGNhdEtleTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dQYXNzd29yZE1vZGFsKGN1cnJpY3VsdW1bY2F0S2V5XS50aXRsZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBsb2FkQ2F0ZWdvcnk6IGZ1bmN0aW9uKGNhdEtleSkgewogICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5jYXRlZ29yeSA9IGNhdEtleTsKICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUubGVzc29uSWQgPSBudWxsOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nlc3Npb24tc3RhdHVzJykudGV4dENvbnRlbnQgPSBjdXJyaWN1bHVtW2NhdEtleV0udGl0bGU7CiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck5hdigpOwogICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJMZXNzb25MaXN0KCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIEF1dG8tbG9hZCBmaXJzdCBsZXNzb24KICAgICAgICAgICAgICAgIHRoaXMubG9hZExlc3NvbihjdXJyaWN1bHVtW2NhdEtleV0ubGVzc29uc1swXSk7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBzaG93UGFzc3dvcmRNb2RhbDogZnVuY3Rpb24odGl0bGUpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC10aXRsZScpLnRleHRDb250ZW50ID0gYEVudGVyIHBhc3N3b3JkIGZvciAke3RpdGxlfWA7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwtaW5wdXQnKS52YWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmQtbW9kYWwnKTsKICAgICAgICAgICAgICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOwogICAgICAgICAgICAgICAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnZmxleCcpOwogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwtaW5wdXQnKS5mb2N1cygpLCA1MCk7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBjbG9zZU1vZGFsOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkLW1vZGFsJyk7CiAgICAgICAgICAgICAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgICAgICAgICAgICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2ZsZXgnKTsKICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucGVuZGluZ0NhdGVnb3J5ID0gbnVsbDsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGNhbmNlbFBhc3N3b3JkOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VNb2RhbCgpOwogICAgICAgICAgICAgICAgdGhpcy5zaG93QWxlcnQoIlNpZ24tdXAgZm9yIFdvcmtzaG9wIHRvIFJlY2VpdmUgUGFzc3dvcmQuIiwgImVycm9yIik7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBzaW1wbGVIYXNoOiBmdW5jdGlvbihzdHIpIHsKICAgICAgICAgICAgICAgIGxldCBoYXNoID0gMDsKICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hhciA9IHN0ci5jaGFyQ29kZUF0KGkpOwogICAgICAgICAgICAgICAgICAgIGhhc2ggPSAoaGFzaCA8PCA1KSAtIGhhc2ggKyBjaGFyOwogICAgICAgICAgICAgICAgICAgIGhhc2ggfD0gMDsgLy8gQ29udmVydCB0byAzMmJpdCBpbnRlZ2VyCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gaGFzaC50b1N0cmluZygpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgc3VibWl0UGFzc3dvcmQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgY29uc3QgcGFzc3dvcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwtaW5wdXQnKS52YWx1ZTsKICAgICAgICAgICAgICAgIGNvbnN0IGNhdEtleSA9IHRoaXMuc3RhdGUucGVuZGluZ0NhdGVnb3J5OwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiAoY2F0S2V5KSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRIYXNoID0gdGhpcy5zaW1wbGVIYXNoKHBhc3N3b3JkKTsKICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXRIYXNoID09PSBjdXJyaWN1bHVtW2NhdEtleV0ucGFzc3dvcmRIYXNoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUudW5sb2NrZWQucHVzaChjYXRLZXkpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTW9kYWwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93QWxlcnQoIkFjY2VzcyBHcmFudGVkISIsICJzdWNjZXNzIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZENhdGVnb3J5KGNhdEtleSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93QWxlcnQoIkluY29ycmVjdCBQYXNzd29yZC4iLCAiZXJyb3IiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0FsZXJ0KCJJbmNvcnJlY3QgUGFzc3dvcmQuIiwgImVycm9yIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBzaG93QWxlcnQ6IGZ1bmN0aW9uKG1zZywgdHlwZSkgewogICAgICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxlcnQtbW9kYWwnKTsKICAgICAgICAgICAgICAgIGNvbnN0IGljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxlcnQtaWNvbicpOwogICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGVydC1tZXNzYWdlJyk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIG1lc3NhZ2UudGV4dENvbnRlbnQgPSBtc2c7CiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ3N1Y2Nlc3MnKSB7CiAgICAgICAgICAgICAgICAgICAgaWNvbi50ZXh0Q29udGVudCA9ICfinIUnOwogICAgICAgICAgICAgICAgICAgIGljb24uY2xhc3NOYW1lID0gJ3RleHQtNHhsIG1iLTIgdGV4dC1ncmVlbi01MDAnOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpY29uLnRleHRDb250ZW50ID0gJ+KdjCc7CiAgICAgICAgICAgICAgICAgICAgaWNvbi5jbGFzc05hbWUgPSAndGV4dC00eGwgbWItMiB0ZXh0LXJlZC01MDAnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsKICAgICAgICAgICAgICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ2ZsZXgnKTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIHJlbmRlckxlc3Nvbkxpc3Q6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlc3Nvbi1saXN0Jyk7CiAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmICghdGhpcy5zdGF0ZS5jYXRlZ29yeSkgcmV0dXJuOwoKICAgICAgICAgICAgICAgIGNvbnN0IGxlc3NvbnMgPSBjdXJyaWN1bHVtW3RoaXMuc3RhdGUuY2F0ZWdvcnldLmxlc3NvbnM7CiAgICAgICAgICAgICAgICBsZXNzb25zLmZvckVhY2gobCA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICAgICAgZGl2LmNsYXNzTmFtZSA9IGBwLTMgcm91bmRlZC1sZyBib3JkZXIgY3Vyc29yLXBvaW50ZXIgdHJhbnNpdGlvbiBob3ZlcjpzaGFkb3ctbWQgJHt0aGlzLnN0YXRlLmxlc3NvbklkID09PSBsLmlkID8gJ2JvcmRlci1ncmVlbi01MDAgYmctZ3JlZW4tNTAnIDogJ2JvcmRlci1ncmF5LTIwMCBiZy13aGl0ZSd9YDsKICAgICAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LXNtIHRleHQtZ3JheS04MDAiPiR7bC50aXRsZX08L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgIGRpdi5vbmNsaWNrID0gKCkgPT4gdGhpcy5sb2FkTGVzc29uKGwpOwogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChkaXYpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBsb2FkTGVzc29uOiBmdW5jdGlvbihsZXNzb24pIHsKICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUubGVzc29uSWQgPSBsZXNzb24uaWQ7CiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckxlc3Nvbkxpc3QoKTsgLy8gVXBkYXRlIGFjdGl2ZSBzdHlsaW5nCgogICAgICAgICAgICAgICAgLy8gSGlkZSBXZWxjb21lLCBTaG93IFRvcGljCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2VsY29tZS12aWV3JykuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9waWMtdmlldycpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOwoKICAgICAgICAgICAgICAgIC8vIFNldCBIZWFkZXIgSW5mbwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NydW1iLWNhdGVnb3J5JykudGV4dENvbnRlbnQgPSBjdXJyaWN1bHVtW3RoaXMuc3RhdGUuY2F0ZWdvcnldLnRpdGxlOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvcGljLXRpdGxlJykudGV4dENvbnRlbnQgPSBsZXNzb24udGl0bGU7CgogICAgICAgICAgICAgICAgLy8gSW5qZWN0IENvbnRlbnQKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYW5lbC1sZXNzb24nKS5pbm5lckhUTUwgPSBsZXNzb24ubGVzc29uOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBTZXR1cCBRdWl6CiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclF1aXoobGVzc29uLnF1aXopOwoKICAgICAgICAgICAgICAgIC8vIFNldHVwIFNpbXVsYXRpb24KICAgICAgICAgICAgICAgIHRoaXMubG9hZFNpbXVsYXRpb24obGVzc29uLnNpbVR5cGUpOwoKICAgICAgICAgICAgICAgIC8vIERlZmF1bHQgdG8gTGVzc29uIFRhYgogICAgICAgICAgICAgICAgdGhpcy5zZXRUYWIoJ2xlc3NvbicpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgc2V0VGFiOiBmdW5jdGlvbih0YWJOYW1lKSB7CiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnRhYiA9IHRhYk5hbWU7CiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgVGFiIEJ1dHRvbnMKICAgICAgICAgICAgICAgIFsnbGVzc29uJywgJ3NpbXVsYXRpb24nLCAncXVpeiddLmZvckVhY2godCA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHRhYi0ke3R9YCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgcGFuZWwtJHt0fWApOwogICAgICAgICAgICAgICAgICAgIGlmICh0ID09PSB0YWJOYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyZWVuLXByaW1hcnknLCAnYm9yZGVyLWdyZWVuLXByaW1hcnknKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS01MDAnLCAnYm9yZGVyLXRyYW5zcGFyZW50Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhbmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LWdyZWVuLXByaW1hcnknLCAnYm9yZGVyLWdyZWVuLXByaW1hcnknKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ3RleHQtZ3JheS01MDAnLCAnYm9yZGVyLXRyYW5zcGFyZW50Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhbmVsLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiAodGFiTmFtZSA9PT0gJ3NpbXVsYXRpb24nICYmIFNpbXVsYXRpb25zLmFjdGl2ZSA9PT0gJ3N0YXRpY0VsZWN0cmljaXR5JykgewogICAgICAgICAgICAgICAgICAgIFNpbXVsYXRpb25zLnN0YXRpY0VsZWN0cmljaXR5LnN0YXJ0KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodGFiTmFtZSA9PT0gJ3NpbXVsYXRpb24nICYmIFNpbXVsYXRpb25zLmFjdGl2ZSA9PT0gJ29wdGljc0xhYicpIHsKICAgICAgICAgICAgICAgICAgICBTaW11bGF0aW9ucy5vcHRpY3NMYWIuc3RhcnQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh0YWJOYW1lID09PSAnc2ltdWxhdGlvbicgJiYgU2ltdWxhdGlvbnMuYWN0aXZlID09PSAnbWF0dGVyTGFiJykgewogICAgICAgICAgICAgICAgICAgIFNpbXVsYXRpb25zLm1hdHRlckxhYi5zdGFydCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHRhYk5hbWUgPT09ICdzaW11bGF0aW9uJyAmJiBTaW11bGF0aW9ucy5hY3RpdmUgPT09ICdlbmVyZ3lMYWInKSB7CiAgICAgICAgICAgICAgICAgICAgU2ltdWxhdGlvbnMuZW5lcmd5TGFiLnN0YXJ0KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodGFiTmFtZSA9PT0gJ3NpbXVsYXRpb24nICYmIFNpbXVsYXRpb25zLmFjdGl2ZSA9PT0gJ2hlYXRHYXNMYWInKSB7CiAgICAgICAgICAgICAgICAgICAgU2ltdWxhdGlvbnMuaGVhdEdhc0xhYi5zdGFydCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHRhYk5hbWUgPT09ICdzaW11bGF0aW9uJyAmJiBTaW11bGF0aW9ucy5hY3RpdmUgPT09ICdjaGVtaXN0cnlMYWInKSB7CiAgICAgICAgICAgICAgICAgICAgU2ltdWxhdGlvbnMuY2hlbWlzdHJ5TGFiLnN0YXJ0KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodGFiTmFtZSA9PT0gJ3NpbXVsYXRpb24nICYmIFNpbXVsYXRpb25zLmFjdGl2ZSA9PT0gJ21vdGlvbkxhYicpIHsKICAgICAgICAgICAgICAgICAgICBTaW11bGF0aW9ucy5tb3Rpb25MYWIuc3RhcnQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh0YWJOYW1lID09PSAnc2ltdWxhdGlvbicgJiYgU2ltdWxhdGlvbnMuYWN0aXZlID09PSAnZm9yY2VzTGFiJykgewogICAgICAgICAgICAgICAgICAgIFNpbXVsYXRpb25zLmZvcmNlc0xhYi5zdGFydCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHRhYk5hbWUgPT09ICdzaW11bGF0aW9uJyAmJiBTaW11bGF0aW9ucy5hY3RpdmUgPT09ICdmb3JjZXNMYWInKSB7CiAgICAgICAgICAgICAgICAgICAgU2ltdWxhdGlvbnMuZm9yY2VzTGFiLnN0YXJ0KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodGFiTmFtZSA9PT0gJ3NpbXVsYXRpb24nICYmIFNpbXVsYXRpb25zLmFjdGl2ZSA9PT0gJ25ld3RvbkxhYicpIHsKICAgICAgICAgICAgICAgICAgICBTaW11bGF0aW9ucy5uZXd0b25MYWIuc3RhcnQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh0YWJOYW1lID09PSAnc2ltdWxhdGlvbicgJiYgU2ltdWxhdGlvbnMuYWN0aXZlID09PSAnZW5lcmd5UmFtcExhYicpIHsKICAgICAgICAgICAgICAgICAgICBTaW11bGF0aW9ucy5lbmVyZ3lSYW1wTGFiLnN0YXJ0KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodGFiTmFtZSA9PT0gJ3NpbXVsYXRpb24nICYmIFNpbXVsYXRpb25zLmFjdGl2ZSA9PT0gJ2ZpbmFuY2lhbENhbGN1bGF0b3InKSB7CiAgICAgICAgICAgICAgICAgICAgU2ltdWxhdGlvbnMuZmluYW5jaWFsQ2FsY3VsYXRvci51cGRhdGUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIHJlbmRlclF1aXo6IGZ1bmN0aW9uKHF1ZXN0aW9ucykgewogICAgICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1aXotY29udGFpbmVyJyk7CiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHREaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVpei1yZXN1bHRzJyk7CiAgICAgICAgICAgICAgICBjb25zdCBzdWJtaXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLXN1Ym1pdC1xdWl6Jyk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsKICAgICAgICAgICAgICAgIHJlc3VsdERpdi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgICAgICAgICAgICAgIHJlc3VsdERpdi5pbm5lckhUTUwgPSAnJzsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgKCFxdWVzdGlvbnMgfHwgcXVlc3Rpb25zLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnPHAgY2xhc3M9InRleHQtZ3JheS01MDAgaXRhbGljIj5ObyBxdWl6IGF2YWlsYWJsZSBmb3IgdGhpcyBsZXNzb24uPC9wPic7CiAgICAgICAgICAgICAgICAgICAgc3VibWl0QnRuLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBzdWJtaXRCdG4uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7CiAgICAgICAgICAgICAgICBxdWVzdGlvbnMuZm9yRWFjaCgocSwgaWR4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICAgICAgICAgIHFEaXYuY2xhc3NOYW1lID0gJ2JvcmRlci1iIGJvcmRlci1ncmF5LTEwMCBwYi00JzsKICAgICAgICAgICAgICAgICAgICBsZXQgaHRtbCA9IGA8cCBjbGFzcz0iZm9udC1ib2xkIHRleHQtZ3JheS04MDAgbWItMyI+JHtpZHggKyAxfS4gJHtxLnF9PC9wPjxkaXYgY2xhc3M9InNwYWNlLXktMiI+YDsKICAgICAgICAgICAgICAgICAgICBxLm9wdGlvbnMuZm9yRWFjaCgob3B0LCBvSWR4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTMgY3Vyc29yLXBvaW50ZXIgcC0yIHJvdW5kZWQgaG92ZXI6YmctZ3JheS01MCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJxJHtpZHh9IiB2YWx1ZT0iJHtvSWR4fSIgY2xhc3M9ImZvcm0tcmFkaW8gdGV4dC1ncmVlbi02MDAgaC00IHctNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRleHQtZ3JheS03MDAiPiR7b3B0fTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+JzsKICAgICAgICAgICAgICAgICAgICBxRGl2LmlubmVySFRNTCA9IGh0bWw7CiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHFEaXYpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgc3VibWl0QnRuLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHNjb3JlID0gMDsKICAgICAgICAgICAgICAgICAgICBxdWVzdGlvbnMuZm9yRWFjaCgocSwgaWR4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbE9wdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGBpbnB1dFtuYW1lPSJxJHtpZHh9Il1gKTsKICAgICAgICAgICAgICAgICAgICAgICAgYWxsT3B0aW9ucy5mb3JFYWNoKG9wdCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdiZy1ncmVlbi0xMDAnLCAnYmctcmVkLTEwMCcsICdib3JkZXItZ3JlZW4tNTAwJywgJ2JvcmRlci1yZWQtNTAwJywgJ2JvcmRlcicpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgaW5wdXRbbmFtZT0icSR7aWR4fSJdOmNoZWNrZWRgKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29ycmVjdElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgaW5wdXRbbmFtZT0icSR7aWR4fSJdW3ZhbHVlPSIke3EuYX0iXWApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQoc2VsZWN0ZWQudmFsdWUpID09PSBxLmEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZSsrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYmctZ3JlZW4tMTAwJywgJ2JvcmRlcicsICdib3JkZXItZ3JlZW4tNTAwJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYmctcmVkLTEwMCcsICdib3JkZXInLCAnYm9yZGVyLXJlZC01MDAnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb3JyZWN0SW5wdXQpIGNvcnJlY3RJbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2JnLWdyZWVuLTEwMCcsICdib3JkZXInLCAnYm9yZGVyLWdyZWVuLTUwMCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoY29ycmVjdElucHV0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JyZWN0SW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdiZy1ncmVlbi0xMDAnLCAnYm9yZGVyJywgJ2JvcmRlci1ncmVlbi01MDAnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHJlc3VsdERpdi5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9InRleHQtMnhsIGZvbnQtYm9sZCAke3Njb3JlID09PSBxdWVzdGlvbnMubGVuZ3RoID8gJ3RleHQtZ3JlZW4tNjAwJyA6ICd0ZXh0LW9yYW5nZS01MDAnfSI+WW91IHNjb3JlZCAke3Njb3JlfSAvICR7cXVlc3Rpb25zLmxlbmd0aH08L3NwYW4+YDsKICAgICAgICAgICAgICAgICAgICByZXN1bHREaXYuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgbG9hZFNpbXVsYXRpb246IGZ1bmN0aW9uKHR5cGUpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGhvc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWhvc3QnKTsKICAgICAgICAgICAgICAgIGhvc3QuaW5uZXJIVE1MID0gJyc7IAogICAgICAgICAgICAgICAgU2ltdWxhdGlvbnMuYWN0aXZlID0gdHlwZTsKCiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ3BsYWNlaG9sZGVyJykgewogICAgICAgICAgICAgICAgICAgIGhvc3QuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9ImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGgtZnVsbCB0ZXh0LWdyYXktNDAwIHB5LTEwIj48ZGl2IGNsYXNzPSJ0ZXh0LTR4bCBtYi0yIj7wn5qnPC9kaXY+PHA+SW50ZXJhY3RpdmUgc2ltdWxhdGlvbiBjb21pbmcgc29vbi48L3A+PC9kaXY+YDsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoU2ltdWxhdGlvbnNbdHlwZV0pIHsKICAgICAgICAgICAgICAgICAgICBTaW11bGF0aW9uc1t0eXBlXS5yZW5kZXIoaG9zdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICAvLyAtLS0gU0lNVUxBVElPTiBFTkdJTkVTIC0tLQogICAgICAgIGNvbnN0IFNpbXVsYXRpb25zID0gewogICAgICAgICAgICBhY3RpdmU6IG51bGwsCgogICAgICAgICAgICAvLyBTVEFUSUMgRUxFQ1RSSUNJVFkgU0lNVUxBVElPTgogICAgICAgICAgICBzdGF0aWNFbGVjdHJpY2l0eTogewogICAgICAgICAgICAgICAgY2FudmFzOiBudWxsLAogICAgICAgICAgICAgICAgY3R4OiBudWxsLAogICAgICAgICAgICAgICAgYW5pbUlkOiBudWxsLAogICAgICAgICAgICAgICAgYmFsbG9vbjogeyB4OiAyNTAsIHk6IDIwMCwgcjogNDAsIGNoYXJnZTogMCB9LAogICAgICAgICAgICAgICAgc3dlYXRlcjogeyB4OiAxMDAsIHk6IDIwMCwgdzogMTUwLCBoOiAzMDAsIGNoYXJnZXM6IFtdIH0sCiAgICAgICAgICAgICAgICB3YWxsOiB7IHg6IDYwMCwgeTogMjAwLCB3OiA1MCwgaDogMzAwLCBjaGFyZ2VzOiBbXSB9LAogICAgICAgICAgICAgICAgaXNEcmFnZ2luZzogZmFsc2UsCgogICAgICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbihjb250YWluZXIpIHsKICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBoLWZ1bGwgdy1mdWxsIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0iZm9udC1ib2xkIHRleHQtbGcgbWItMiB0ZXh0LWdyYXktNzAwIj5TdGF0aWMgRWxlY3RyaWNpdHkgTGFiPC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJlbGF0aXZlIGJnLWdyYXktMTAwIGJvcmRlci0yIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1pbm5lciBjdXJzb3ItY3Jvc3NoYWlyIG92ZXJmbG93LWhpZGRlbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGNhbnZhcyBpZD0ic2UtY2FudmFzIiB3aWR0aD0iNzAwIiBoZWlnaHQ9IjQwMCI+PC9jYW52YXM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWJzb2x1dGUgdG9wLTIgbGVmdC0xLzIgLXRyYW5zbGF0ZS14LTEvMiB0ZXh0LXhzIHRleHQtZ3JheS01MDAgYmctd2hpdGUvODAgcC0yIHJvdW5kZWQgcG9pbnRlci1ldmVudHMtbm9uZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERyYWcgdGhlIGJhbGxvb24uPGJyPlJ1YiBvbiBzd2VhdGVyIHRvIGdhaW4gZWxlY3Ryb25zLjxicj5Nb3ZlIG5lYXIgd2FsbCB0byBzZWUgcG9sYXJpemF0aW9uLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGdhcC00IG10LTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iU2ltdWxhdGlvbnMuc3RhdGljRWxlY3RyaWNpdHkucmVzZXQoKSIgY2xhc3M9InB4LTQgcHktMiBiZy1ncmF5LTIwMCBob3ZlcjpiZy1ncmF5LTMwMCByb3VuZGVkIGZvbnQtYm9sZCB0ZXh0LWdyYXktNzAwIj5SZXNldCBCYWxsb29uPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2UtY2FudmFzJyk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXQoKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gRXZlbnQgTGlzdGVuZXJzCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHRoaXMuaGFuZGxlRG93bihlKSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgKGUpID0+IHRoaXMuaGFuZGxlTW92ZShlKSk7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoKSA9PiB0aGlzLmhhbmRsZVVwKCkpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQoKTsKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYmFsbG9vbiA9IHsgeDogMzUwLCB5OiAyMDAsIHI6IDQ1LCBjaGFyZ2U6IDAsIHZ4OiAwLCB2eTogMCB9OwogICAgICAgICAgICAgICAgICAgIHRoaXMuc3dlYXRlci5jaGFyZ2VzID0gW107CiAgICAgICAgICAgICAgICAgICAgLy8gUG9wdWxhdGUgc3dlYXRlciB3aXRoICsvLSBwYWlycwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZCA9IDE1OwogICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPDMwOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zd2VhdGVyLmNoYXJnZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiB0aGlzLnN3ZWF0ZXIueCAtIHRoaXMuc3dlYXRlci53LzIgKyBwYWQgKyBNYXRoLnJhbmRvbSgpKih0aGlzLnN3ZWF0ZXIudyAtIHBhZCoyIC0gMTApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogdGhpcy5zd2VhdGVyLnkgLSB0aGlzLnN3ZWF0ZXIuaC8yICsgcGFkICsgTWF0aC5yYW5kb20oKSoodGhpcy5zd2VhdGVyLmggLSBwYWQqMiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncGFpcicgLy8gQ29udGFpbnMgYm90aCArIGFuZCAtIGluaXRpYWxseQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy53YWxsLmNoYXJnZXMgPSBbXTsKICAgICAgICAgICAgICAgICAgICAvLyBQb3B1bGF0ZSB3YWxsIHdpdGggKy8tIHBhaXJzCiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8MjA7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndhbGwuY2hhcmdlcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IHRoaXMud2FsbC54ICsgNSArIE1hdGgucmFuZG9tKCkqKHRoaXMud2FsbC53IC0gMjUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogdGhpcy53YWxsLnkgLSB0aGlzLndhbGwuaC8yICsgcGFkICsgTWF0aC5yYW5kb20oKSoodGhpcy53YWxsLmggLSBwYWQqMiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlWDogMCAvLyBXaWxsIGJlIHNldCByZWxhdGl2ZSB0byB3YWxsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLndhbGwuY2hhcmdlcy5mb3JFYWNoKGMgPT4gYy5iYXNlWCA9IGMueCk7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIHN0YXJ0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmFuaW1JZCkgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltSWQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMubG9vcCgpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBoYW5kbGVEb3duOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IHRoaXMuY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG14ID0gZS5jbGllbnRYIC0gcmVjdC5sZWZ0OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG15ID0gZS5jbGllbnRZIC0gcmVjdC50b3A7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZHggPSBteCAtIHRoaXMuYmFsbG9vbi54OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGR5ID0gbXkgLSB0aGlzLmJhbGxvb24ueTsKICAgICAgICAgICAgICAgICAgICBpZiAoZHgqZHggKyBkeSpkeSA8IHRoaXMuYmFsbG9vbi5yICogdGhpcy5iYWxsb29uLnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0RyYWdnaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWxsb29uLnZ4ID0gMDsgdGhpcy5iYWxsb29uLnZ5ID0gMDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIGhhbmRsZU1vdmU6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNEcmFnZ2luZykgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmJhbGxvb24ueCA9IGUuY2xpZW50WCAtIHJlY3QubGVmdDsKICAgICAgICAgICAgICAgICAgICB0aGlzLmJhbGxvb24ueSA9IGUuY2xpZW50WSAtIHJlY3QudG9wOwoKICAgICAgICAgICAgICAgICAgICAvLyBCb3VuZGFyeSBjaGVja3MKICAgICAgICAgICAgICAgICAgICB0aGlzLmJhbGxvb24ueCA9IE1hdGgubWF4KHRoaXMuYmFsbG9vbi5yLCBNYXRoLm1pbih0aGlzLmNhbnZhcy53aWR0aCAtIHRoaXMuYmFsbG9vbi5yLCB0aGlzLmJhbGxvb24ueCkpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYmFsbG9vbi55ID0gTWF0aC5tYXgodGhpcy5iYWxsb29uLnIsIE1hdGgubWluKHRoaXMuY2FudmFzLmhlaWdodCAtIHRoaXMuYmFsbG9vbi5yLCB0aGlzLmJhbGxvb24ueSkpOwoKICAgICAgICAgICAgICAgICAgICAvLyBSdWJiaW5nIGxvZ2ljCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1N3ZWF0ZXJJbnRlcmFjdGlvbigpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBoYW5kbGVVcDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0RyYWdnaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIGNoZWNrU3dlYXRlckludGVyYWN0aW9uOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAvLyBJZiBiYWxsb29uIG92ZXJsYXBzIHN3ZWF0ZXIgY2hhcmdlcywgcGljayB1cCBlbGVjdHJvbnMKICAgICAgICAgICAgICAgICAgICB0aGlzLnN3ZWF0ZXIuY2hhcmdlcy5mb3JFYWNoKGMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYy50eXBlID09PSAncGFpcicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGR4ID0gdGhpcy5iYWxsb29uLnggLSBjLng7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkeSA9IHRoaXMuYmFsbG9vbi55IC0gYy55OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGR4KmR4ICsgZHkqZHkgPCB0aGlzLmJhbGxvb24uciAqIHRoaXMuYmFsbG9vbi5yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYy50eXBlID0gJ3Bvcyc7IC8vIEVsZWN0cm9uIGxlZnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJhbGxvb24uY2hhcmdlKys7IC8vIEJhbGxvb24gZ2FpbnMgZWxlY3Ryb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBsb29wOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVBoeXNpY3MoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmxvb3AoKSk7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIHVwZGF0ZVBoeXNpY3M6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRHJhZ2dpbmcpIHJldHVybjsKCiAgICAgICAgICAgICAgICAgICAgLy8gQXR0cmFjdGlvbiB0byBTd2VhdGVyIChQb3NpdGl2ZSkKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5iYWxsb29uLmNoYXJnZSA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZHggPSB0aGlzLnN3ZWF0ZXIueCAtIHRoaXMuYmFsbG9vbi54OwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkeSA9IHRoaXMuc3dlYXRlci55IC0gdGhpcy5iYWxsb29uLnk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBNYXRoLnNxcnQoZHgqZHggKyBkeSpkeSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXN0ID4gdGhpcy5iYWxsb29uLnIgKyB0aGlzLnN3ZWF0ZXIudy8yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJhbGxvb24udnggKz0gKGR4IC8gZGlzdCkgKiAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJhbGxvb24udnkgKz0gKGR5IC8gZGlzdCkgKiAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vIEF0dHJhY3Rpb24gdG8gV2FsbCAoSW5kdWNlZCBQb2xhcml6YXRpb24pCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYmFsbG9vbi5jaGFyZ2UgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGR4ID0gdGhpcy53YWxsLnggLSB0aGlzLmJhbGxvb24ueDsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzdCA9IE1hdGguYWJzKGR4KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3QgPCAxNTApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmFsbG9vbi52eCArPSAwLjg7IC8vIFB1bGwgdG93YXJkcyB3YWxsCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vIEZyaWN0aW9uIC8gRGFtcGluZwogICAgICAgICAgICAgICAgICAgIHRoaXMuYmFsbG9vbi52eCAqPSAwLjkyOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYmFsbG9vbi52eSAqPSAwLjkyOwoKICAgICAgICAgICAgICAgICAgICB0aGlzLmJhbGxvb24ueCArPSB0aGlzLmJhbGxvb24udng7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWxsb29uLnkgKz0gdGhpcy5iYWxsb29uLnZ5OwoKICAgICAgICAgICAgICAgICAgICAvLyBXYWxsIENvbGxpc2lvbgogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJhbGxvb24ueCArIHRoaXMuYmFsbG9vbi5yID4gdGhpcy53YWxsLngpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWxsb29uLnggPSB0aGlzLndhbGwueCAtIHRoaXMuYmFsbG9vbi5yOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJhbGxvb24udnggPSAwOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvLyBTd2VhdGVyIENvbGxpc2lvbiAoU29mdCkKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5iYWxsb29uLnggLSB0aGlzLmJhbGxvb24uciA8IHRoaXMuc3dlYXRlci54ICsgdGhpcy5zd2VhdGVyLncvMikgewogICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVzdCBsZXQgaXQgc3RpY2sKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIGRyYXc6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuY3R4OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHcgPSB0aGlzLmNhbnZhcy53aWR0aDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBoID0gdGhpcy5jYW52YXMuaGVpZ2h0OwoKICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIHcsIGgpOwoKICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IFN3ZWF0ZXIKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmY2E1YTUnOyAvLyBQaW5rIHN3ZWF0ZXIKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QodGhpcy5zd2VhdGVyLnggLSB0aGlzLnN3ZWF0ZXIudy8yLCB0aGlzLnN3ZWF0ZXIueSAtIHRoaXMuc3dlYXRlci5oLzIsIHRoaXMuc3dlYXRlci53LCB0aGlzLnN3ZWF0ZXIuaCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMDAwJzsKICAgICAgICAgICAgICAgICAgICBjdHguZm9udCA9ICdib2xkIDE4cHggc2Fucy1zZXJpZic7CiAgICAgICAgICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgiU3dlYXRlciIsIHRoaXMuc3dlYXRlci54LCB0aGlzLnN3ZWF0ZXIueSArIHRoaXMuc3dlYXRlci5oIC8gMiArIDIwKTsKICAgICAgICAgICAgICAgICAgICBjdHgudGV4dEFsaWduID0gJ3N0YXJ0JzsgLy8gUmVzZXQKCiAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBTd2VhdGVyIENoYXJnZXMKICAgICAgICAgICAgICAgICAgICB0aGlzLnN3ZWF0ZXIuY2hhcmdlcy5mb3JFYWNoKGMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjdHguZm9udCA9ICdib2xkIDE4cHggc2Fucy1zZXJpZic7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2UxMWQ0OCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgnKycsIGMueCwgYy55KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMudHlwZSA9PT0gJ3BhaXInKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzYjgyZjYnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCctJywgYy54ICsgOCwgYy55KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzI1NjNlYic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoJy0nLCBjLnggKyAxMCwgYy55KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IFdhbGwKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmZGUwNDcnOyAvLyBZZWxsb3cgd2FsbAogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCh0aGlzLndhbGwueCwgdGhpcy53YWxsLnkgLSB0aGlzLndhbGwuaC8yLCB0aGlzLndhbGwudywgdGhpcy53YWxsLmgpOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzAwMCc7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZvbnQgPSAnYm9sZCAxOHB4IHNhbnMtc2VyaWYnOwogICAgICAgICAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJzsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIldhbGwiLCB0aGlzLndhbGwueCArIHRoaXMud2FsbC53IC8gMiwgdGhpcy53YWxsLnkgKyB0aGlzLndhbGwuaCAvIDIgKyAyMCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9ICdzdGFydCc7IC8vIFJlc2V0CgogICAgICAgICAgICAgICAgICAgIC8vIERyYXcgV2FsbCBDaGFyZ2VzIChQb2xhcml6YXRpb24pCiAgICAgICAgICAgICAgICAgICAgdGhpcy53YWxsLmNoYXJnZXMuZm9yRWFjaChjID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHJlcHVsc2lvbiBvZiBlbGVjdHJvbnMgaWYgYmFsbG9vbiBpcyBuZWFyCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvZmZzZXRYID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYmFsbG9vbi5jaGFyZ2UgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXN0ID0gTWF0aC5hYnModGhpcy5iYWxsb29uLnggLSBjLmJhc2VYKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXN0IDwgMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0WCA9ICgyMDAgLSBkaXN0KSAqIDAuMjsgLy8gTW92ZSByaWdodAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXhYID0gdGhpcy53YWxsLnggKyB0aGlzLndhbGwudyAtIDE1OwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXggPSBjLmJhc2VYICsgMTAgKyBvZmZzZXRYOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXggPiBtYXhYKSBleCA9IG1heFg7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBjdHguZm9udCA9ICdib2xkIDE4cHggc2Fucy1zZXJpZic7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2UxMWQ0OCc7IGN0eC5maWxsVGV4dCgnKycsIGMuYmFzZVgsIGMueSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzI1NjNlYic7IGN0eC5maWxsVGV4dCgnLScsIGV4LCBjLnkpOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IEJhbGxvb24KICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmY2QzNGQnOyAvLyBZZWxsb3cgYmFsbG9vbgogICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgICAgICBjdHguZWxsaXBzZSh0aGlzLmJhbGxvb24ueCwgdGhpcy5iYWxsb29uLnksIHRoaXMuYmFsbG9vbi5yLCB0aGlzLmJhbGxvb24uciAqIDEuMSwgMCwgMCwgTWF0aC5QSSAqIDIpOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyNkOTc3MDYnOyBjdHgubGluZVdpZHRoID0gMjsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgIC8vIFN0cmluZwogICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyh0aGlzLmJhbGxvb24ueCwgdGhpcy5iYWxsb29uLnkgKyB0aGlzLmJhbGxvb24uciAqIDEuMDUpOwogICAgICAgICAgICAgICAgICAgIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHRoaXMuYmFsbG9vbi54ICsgMTAsIHRoaXMuYmFsbG9vbi55ICsgMTAwLCB0aGlzLmJhbGxvb24ueCAtIDUsIHRoaXMuYmFsbG9vbi55ICsgMTUwKTsKICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzAwMCc7IGN0eC5saW5lV2lkdGggPSAxOyBjdHguc3Ryb2tlKCk7CgogICAgICAgICAgICAgICAgICAgIC8vIERyYXcgQmFsbG9vbiBDaGFyZ2VzCiAgICAgICAgICAgICAgICAgICAgY3R4LmZvbnQgPSAnYm9sZCAxOHB4IHNhbnMtc2VyaWYnOwogICAgICAgICAgICAgICAgICAgIC8vIEluaXRpYWwgcGFpcnMKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNlMTFkNDgnOyBjdHguZmlsbFRleHQoJysnLCB0aGlzLmJhbGxvb24ueCAtIDEyLCB0aGlzLmJhbGxvb24ueSAtIDEwKTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMyNTYzZWInOyBjdHguZmlsbFRleHQoJy0nLCB0aGlzLmJhbGxvb24ueCArIDUsIHRoaXMuYmFsbG9vbi55IC0gMTApOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2UxMWQ0OCc7IGN0eC5maWxsVGV4dCgnKycsIHRoaXMuYmFsbG9vbi54IC0gMTIsIHRoaXMuYmFsbG9vbi55ICsgMjApOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzI1NjNlYic7IGN0eC5maWxsVGV4dCgnLScsIHRoaXMuYmFsbG9vbi54ICsgNSwgdGhpcy5iYWxsb29uLnkgKyAyMCk7CgogICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhIGVsZWN0cm9ucwogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5iYWxsb29uLmNoYXJnZTsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFuZ2xlID0gaSAqIChNYXRoLlBJICogMiAvIE1hdGgubWF4KDEsIHRoaXMuYmFsbG9vbi5jaGFyZ2UpKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuYmFsbG9vbi5yIC0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXggPSB0aGlzLmJhbGxvb24ueCArIE1hdGguY29zKGFuZ2xlKSAqIHI7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV5ID0gdGhpcy5iYWxsb29uLnkgKyBNYXRoLnNpbihhbmdsZSkgKiByOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMyNTYzZWInOyBjdHguZmlsbFRleHQoJy0nLCBleCwgZXkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIENJUkNVSVQgQlVJTERFUiBTSU1VTEFUSU9OCiAgICAgICAgICAgIGNpcmN1aXRCdWlsZGVyOiB7CiAgICAgICAgICAgICAgICBtb2RlOiAnc2ltcGxlJywgLy8gc2ltcGxlLCBzZXJpZXMsIHBhcmFsbGVsLCBhY2RjCiAgICAgICAgICAgICAgICBzd2l0Y2hDbG9zZWQ6IGZhbHNlLAogICAgICAgICAgICAgICAgYWNNb2RlOiBmYWxzZSwgLy8gZmFsc2UgPSBEQywgdHJ1ZSA9IEFDCiAgICAgICAgICAgICAgICBhbmltSWQ6IG51bGwsCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHJlbmRlcjogZnVuY3Rpb24oY29udGFpbmVyKSB7CiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgaC1mdWxsIHctZnVsbCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LWxnIG1iLTIgdGV4dC1ncmF5LTcwMCI+Q2lyY3VpdCBMYWIgRXhwbG9yZXI8L2gzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGdhcC0yIG1iLTQgYmctZ3JheS0xMDAgcC0xIHJvdW5kZWQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iU2ltdWxhdGlvbnMuY2lyY3VpdEJ1aWxkZXIuc2V0TW9kZSgnc2ltcGxlJykiIGlkPSJjYi1idG4tc2ltcGxlIiBjbGFzcz0icHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBmb250LWJvbGQgYmctd2hpdGUgc2hhZG93IHRleHQtYmx1ZS02MDAiPlNpbXBsZTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iU2ltdWxhdGlvbnMuY2lyY3VpdEJ1aWxkZXIuc2V0TW9kZSgnc2VyaWVzJykiIGlkPSJjYi1idG4tc2VyaWVzIiBjbGFzcz0icHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBmb250LWJvbGQgdGV4dC1ncmF5LTUwMCBob3ZlcjpiZy1ncmF5LTIwMCI+U2VyaWVzPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJTaW11bGF0aW9ucy5jaXJjdWl0QnVpbGRlci5zZXRNb2RlKCdwYXJhbGxlbCcpIiBpZD0iY2ItYnRuLXBhcmFsbGVsIiBjbGFzcz0icHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBmb250LWJvbGQgdGV4dC1ncmF5LTUwMCBob3ZlcjpiZy1ncmF5LTIwMCI+UGFyYWxsZWw8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IlNpbXVsYXRpb25zLmNpcmN1aXRCdWlsZGVyLnNldE1vZGUoJ2FjZGMnKSIgaWQ9ImNiLWJ0bi1hY2RjIiBjbGFzcz0icHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBmb250LWJvbGQgdGV4dC1ncmF5LTUwMCBob3ZlcjpiZy1ncmF5LTIwMCI+QUMgdnMgREM8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJlbGF0aXZlIHctZnVsbCBtYXgtdy1sZyBoLTY0IGJnLWdyYXktNTAgYm9yZGVyLTIgYm9yZGVyLWdyYXktNDAwIHJvdW5kZWQtbGcgc2hhZG93LWlubmVyIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG92ZXJmbG93LWhpZGRlbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGNhbnZhcyBpZD0iY2ItY2FudmFzIiB3aWR0aD0iNTAwIiBoZWlnaHQ9IjI1MCI+PC9jYW52YXM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0iY2ItY29udHJvbHMiIGNsYXNzPSJhYnNvbHV0ZSBib3R0b20tMiBsZWZ0LTEvMiAtdHJhbnNsYXRlLXgtMS8yIGZsZXggZ2FwLTQiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImNiLWRlc2MiIGNsYXNzPSJtdC00IHRleHQtc20gdGV4dC1ncmF5LTYwMCBmb250LW1lZGl1bSB0ZXh0LWNlbnRlciBoLTEwIG1heC13LW1kIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNldE1vZGUoJ3NpbXBsZScpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBzZXRNb2RlOiBmdW5jdGlvbihtKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlID0gbTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnN3aXRjaENsb3NlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYWNNb2RlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIGJ1dHRvbnMKICAgICAgICAgICAgICAgICAgICBbJ3NpbXBsZScsICdzZXJpZXMnLCAncGFyYWxsZWwnLCAnYWNkYyddLmZvckVhY2goayA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBjYi1idG4tJHtrfWApOwogICAgICAgICAgICAgICAgICAgICAgICBpZihrID09PSBtKSBidG4uY2xhc3NOYW1lID0gInB4LTMgcHktMSByb3VuZGVkIHRleHQtc20gZm9udC1ib2xkIGJnLXdoaXRlIHNoYWRvdyB0ZXh0LWJsdWUtNjAwIjsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBidG4uY2xhc3NOYW1lID0gInB4LTMgcHktMSByb3VuZGVkIHRleHQtc20gZm9udC1ib2xkIHRleHQtZ3JheS01MDAgaG92ZXI6YmctZ3JheS0yMDAiOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgY29udHJvbHMKICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250cm9scyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYi1jb250cm9scycpOwogICAgICAgICAgICAgICAgICAgIGlmIChtID09PSAnYWNkYycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbHMuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJTaW11bGF0aW9ucy5jaXJjdWl0QnVpbGRlci50b2dnbGVBQ0RDKCkiIGlkPSJjYi1hY2RjLXRvZ2dsZSIgY2xhc3M9InB4LTQgcHktMiBiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIGZvbnQtYm9sZCByb3VuZGVkIHNoYWRvdyBob3ZlcjpiZy1ibHVlLTcwMCI+U3dpdGNoIHRvIEFDPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYi1kZXNjJykudGV4dENvbnRlbnQgPSAiRGlyZWN0IEN1cnJlbnQgKERDKSBmbG93cyBvbmUgd2F5LiBBbHRlcm5hdGluZyBDdXJyZW50IChBQykgc3dpdGNoZXMgZGlyZWN0aW9uLiI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbHMuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJTaW11bGF0aW9ucy5jaXJjdWl0QnVpbGRlci50b2dnbGVTd2l0Y2goKSIgaWQ9ImNiLXN3aXRjaC1idG4iIGNsYXNzPSJweC00IHB5LTIgYmctZ3JheS0yMDAgdGV4dC1ncmF5LTgwMCBmb250LWJvbGQgcm91bmRlZCBzaGFkb3cgaG92ZXI6YmctZ3JheS0zMDAgYm9yZGVyIGJvcmRlci1ncmF5LTQwMCI+Q2xvc2UgU3dpdGNoPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtID09PSAnc2ltcGxlJykgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NiLWRlc2MnKS50ZXh0Q29udGVudCA9ICJBIHNpbXBsZSBjaXJjdWl0IGhhcyBhIHNpbmdsZSBwYXRoIGZvciBlbGVjdHJvbnMgdG8gZmxvdy4iOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobSA9PT0gJ3NlcmllcycpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYi1kZXNjJykudGV4dENvbnRlbnQgPSAiSW4gU2VyaWVzLCBjb21wb25lbnRzIGFyZSBsaW5lZCB1cC4gSWYgb25lIGJyZWFrcywgdGhlIGNpcmN1aXQgb3BlbnMuIjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG0gPT09ICdwYXJhbGxlbCcpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYi1kZXNjJykudGV4dENvbnRlbnQgPSAiSW4gUGFyYWxsZWwsIGNvbXBvbmVudHMgaGF2ZSBzZXBhcmF0ZSBicmFuY2hlcy4gQ3VycmVudCBzcGxpdHMuIjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuYW5pbUlkKSBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1JZCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltYXRlKCk7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIHRvZ2dsZVN3aXRjaDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hDbG9zZWQgPSAhdGhpcy5zd2l0Y2hDbG9zZWQ7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NiLXN3aXRjaC1idG4nKTsKICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnN3aXRjaENsb3NlZCkgewogICAgICAgICAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSAiT3BlbiBTd2l0Y2giOwogICAgICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NOYW1lID0gInB4LTQgcHktMiBiZy1ncmVlbi02MDAgdGV4dC13aGl0ZSBmb250LWJvbGQgcm91bmRlZCBzaGFkb3cgaG92ZXI6YmctZ3JlZW4tNzAwIGJvcmRlciBib3JkZXItZ3JlZW4tODAwIjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSAiQ2xvc2UgU3dpdGNoIjsKICAgICAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTmFtZSA9ICJweC00IHB5LTIgYmctZ3JheS0yMDAgdGV4dC1ncmF5LTgwMCBmb250LWJvbGQgcm91bmRlZCBzaGFkb3cgaG92ZXI6YmctZ3JheS0zMDAgYm9yZGVyIGJvcmRlci1ncmF5LTQwMCI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICB0b2dnbGVBQ0RDOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFjTW9kZSA9ICF0aGlzLmFjTW9kZTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2ItYWNkYy10b2dnbGUnKTsKICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmFjTW9kZSkgewogICAgICAgICAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSAiU3dpdGNoIHRvIERDIjsKICAgICAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTmFtZSA9ICJweC00IHB5LTIgYmctcHVycGxlLTYwMCB0ZXh0LXdoaXRlIGZvbnQtYm9sZCByb3VuZGVkIHNoYWRvdyBob3ZlcjpiZy1wdXJwbGUtNzAwIjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSAiU3dpdGNoIHRvIEFDIjsKICAgICAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTmFtZSA9ICJweC00IHB5LTIgYmctYmx1ZS02MDAgdGV4dC13aGl0ZSBmb250LWJvbGQgcm91bmRlZCBzaGFkb3cgaG92ZXI6YmctYmx1ZS03MDAiOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgYW5pbWF0ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NiLWNhbnZhcycpOwogICAgICAgICAgICAgICAgICAgIGlmKCFjYW52YXMpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCB3ID0gY2FudmFzLndpZHRoOyBjb25zdCBoID0gY2FudmFzLmhlaWdodDsKICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lID0gRGF0ZS5ub3coKSAvIDEwMDA7CgogICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLHcsaCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVDYXAgPSAncm91bmQnOwogICAgICAgICAgICAgICAgICAgIGN0eC5saW5lSm9pbiA9ICdyb3VuZCc7CgogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRyYXdCYXR0ZXJ5ID0gKHgsIHksIHZlcnRpY2FsPXRydWUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyMzNzQxNTEnOwogICAgICAgICAgICAgICAgICAgICAgICBpZih2ZXJ0aWNhbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKHgtMTAsIHktMTApOyBjdHgubGluZVRvKHgrMTAsIHktMTApOyBjdHguc3Ryb2tlKCk7IC8vIExvbmcgKFBvcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyh4LTUsIHkrMTApOyBjdHgubGluZVRvKHgrNSwgeSsxMCk7IGN0eC5zdHJva2UoKTsgLy8gU2hvcnQgKE5lZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5mb250ID0gIjEycHggQXJpYWwiOyBjdHguZmlsbFN0eWxlID0gIiMzNzQxNTEiOyBjdHguZmlsbFRleHQoIisiLCB4KzE1LCB5LTUpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZHJhd0FDU291cmNlID0gKHgsIHkpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyMzNzQxNTEnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoeCwgeSwgMTUsIDAsIE1hdGguUEkqMik7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZvbnQgPSAiMTZweCBBcmlhbCI7IGN0eC5maWxsU3R5bGUgPSAiIzM3NDE1MSI7IGN0eC5maWxsVGV4dCgifiIsIHgtNSwgeSs1KTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBjb25zdCBkcmF3QnVsYiA9ICh4LCB5LCBvbikgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzM3NDE1MSc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBvbiA/ICcjZmVmMDhhJyA6ICcjZTVlN2ViJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHgsIHksIDE1LCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpbGFtZW50CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyh4LTgsIHkrOCk7IGN0eC5saW5lVG8oeC0zLCB5KTsgY3R4LmxpbmVUbyh4KzMsIHkpOyBjdHgubGluZVRvKHgrOCwgeSs4KTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNoYWRvd0JsdXIgPSAyMDsgY3R4LnNoYWRvd0NvbG9yID0gJyNmYWNjMTUnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1MywgMjI0LCA3MSwgMC41KSc7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc2hhZG93Qmx1ciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBjb25zdCBkcmF3U3dpdGNoID0gKHgsIHksIGNsb3NlZCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzM3NDE1MSc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyh4LTE1LCB5LCAzLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoeCsxNSwgeSwgMywgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKHgtMTUsIHkpOyAKICAgICAgICAgICAgICAgICAgICAgICAgaWYoY2xvc2VkKSBjdHgubGluZVRvKHgrMTUsIHkpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGN0eC5saW5lVG8oeCsxMiwgeS0xNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBjb25zdCBkcmF3RWxlY3Ryb24gPSAoeCwgeSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzYjgyZjYnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoeCwgeSwgMywgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAvLyBDaXJjdWl0IFBhdGhzCiAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyM5Y2EzYWYnOyAvLyBXaXJlIGNvbG9yCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgbGV0IHBhdGggPSBbXTsKICAgICAgICAgICAgICAgICAgICBsZXQgYnVsYnMgPSBbXTsKICAgICAgICAgICAgICAgICAgICBsZXQgc291cmNlUG9zID0ge3g6IDUwLCB5OiBoLzJ9OwogICAgICAgICAgICAgICAgICAgIGxldCBzd2l0Y2hQb3MgPSB7eDogdy8yLCB5OiAzMH07CgogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdzaW1wbGUnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlY3Rhbmd1bGFyIGxvb3AKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKDUwLCAzMCk7IGN0eC5saW5lVG8oNDUwLCAzMCk7IC8vIFRvcAogICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKDQ1MCwgMjIwKTsgLy8gUmlnaHQKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyg1MCwgMjIwKTsgLy8gQm90dG9tCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oNTAsIDMwKTsgLy8gTGVmdAogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBkcmF3QmF0dGVyeSg1MCwgaC8yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZHJhd1N3aXRjaCh3LzIsIDMwLCB0aGlzLnN3aXRjaENsb3NlZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRyYXdCdWxiKDQ1MCwgaC8yLCB0aGlzLnN3aXRjaENsb3NlZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnN3aXRjaENsb3NlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQW5pbWF0ZSBlbGVjdHJvbnMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwZWVkID0gMTAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGVyaW1ldGVyID0gKDQwMCArIDE5MCkgKiAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY291bnQgPSAyMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPGNvdW50OyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlzdCA9ICh0aW1lICogc3BlZWQgKyBpICogKHBlcmltZXRlci9jb3VudCkpICUgcGVyaW1ldGVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBleCwgZXk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGlzdCA8IDQwMCkgeyBleCA9IDUwICsgZGlzdDsgZXkgPSAzMDsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoZGlzdCA8IDQwMCArIDE5MCkgeyBleCA9IDQ1MDsgZXkgPSAzMCArIChkaXN0IC0gNDAwKTsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoZGlzdCA8IDgwMCArIDE5MCkgeyBleCA9IDQ1MCAtIChkaXN0IC0gNTkwKTsgZXkgPSAyMjA7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsgZXggPSA1MDsgZXkgPSAyMjAgLSAoZGlzdCAtIDk5MCk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmF3RWxlY3Ryb24oZXgsIGV5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5tb2RlID09PSAnc2VyaWVzJykgewogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8oNTAsIDMwKTsgY3R4LmxpbmVUbyg0NTAsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyg0NTAsIDIyMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oNTAsIDIyMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oNTAsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgZHJhd0JhdHRlcnkoNTAsIGgvMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGRyYXdTd2l0Y2gody8yLCAzMCwgdGhpcy5zd2l0Y2hDbG9zZWQpOwogICAgICAgICAgICAgICAgICAgICAgICBkcmF3QnVsYig0NTAsIGgvMyArIDIwLCB0aGlzLnN3aXRjaENsb3NlZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRyYXdCdWxiKDQ1MCwgaCoyLzMgLSAyMCwgdGhpcy5zd2l0Y2hDbG9zZWQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5zd2l0Y2hDbG9zZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwZWVkID0gMTAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGVyaW1ldGVyID0gKDQwMCArIDE5MCkgKiAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY291bnQgPSAyMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPGNvdW50OyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlzdCA9ICh0aW1lICogc3BlZWQgKyBpICogKHBlcmltZXRlci9jb3VudCkpICUgcGVyaW1ldGVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBleCwgZXk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGlzdCA8IDQwMCkgeyBleCA9IDUwICsgZGlzdDsgZXkgPSAzMDsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoZGlzdCA8IDQwMCArIDE5MCkgeyBleCA9IDQ1MDsgZXkgPSAzMCArIChkaXN0IC0gNDAwKTsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoZGlzdCA8IDgwMCArIDE5MCkgeyBleCA9IDQ1MCAtIChkaXN0IC0gNTkwKTsgZXkgPSAyMjA7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsgZXggPSA1MDsgZXkgPSAyMjAgLSAoZGlzdCAtIDk5MCk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmF3RWxlY3Ryb24oZXgsIGV5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5tb2RlID09PSAncGFyYWxsZWwnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1haW4gbG9vcAogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8oNTAsIDMwKTsgY3R4LmxpbmVUbygzNTAsIDMwKTsgLy8gVG9wIG1haW4KICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbygzNTAsIDIyMCk7IGN0eC5saW5lVG8oNTAsIDIyMCk7IC8vIEJvdHRvbSBtYWluCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oNTAsIDMwKTsgLy8gTGVmdCBzb3VyY2UKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQnJhbmNoIDEKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDM1MCwgMzApOyBjdHgubGluZVRvKDM1MCwgMjIwKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBCcmFuY2ggMgogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oNDUwLCAzMCk7IGN0eC5saW5lVG8oNDUwLCAyMjApOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbm5lY3QgYnJhbmNoZXMgdG9wL2JvdHRvbQogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMzUwLCAzMCk7IGN0eC5saW5lVG8oNDUwLCAzMCk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDM1MCwgMjIwKTsgY3R4LmxpbmVUbyg0NTAsIDIyMCk7IGN0eC5zdHJva2UoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGRyYXdCYXR0ZXJ5KDUwLCBoLzIpOwogICAgICAgICAgICAgICAgICAgICAgICBkcmF3U3dpdGNoKDIwMCwgMzAsIHRoaXMuc3dpdGNoQ2xvc2VkKTsKICAgICAgICAgICAgICAgICAgICAgICAgZHJhd0J1bGIoMzUwLCBoLzIsIHRoaXMuc3dpdGNoQ2xvc2VkKTsKICAgICAgICAgICAgICAgICAgICAgICAgZHJhd0J1bGIoNDUwLCBoLzIsIHRoaXMuc3dpdGNoQ2xvc2VkKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuc3dpdGNoQ2xvc2VkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGVlZCA9IDEwMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1haW4gbG9vcCBlbGVjdHJvbnMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPDEwOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlzdCA9ICh0aW1lICogc3BlZWQgKyBpICogNDApICUgMzAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYXdFbGVjdHJvbig1MCArIGRpc3QsIDMwKTsgLy8gVG9wCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhd0VsZWN0cm9uKDM1MCAtIGRpc3QsIDIyMCk7IC8vIEJvdHRvbQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU291cmNlIHZlcnRpY2FsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTw2OyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlzdCA9ICh0aW1lICogc3BlZWQgKyBpICogNDApICUgMTkwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYXdFbGVjdHJvbig1MCwgMjIwIC0gZGlzdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCcmFuY2ggMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8NjsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRpc3QgPSAodGltZSAqIHNwZWVkICsgaSAqIDQwKSAlIDE5MDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmF3RWxlY3Ryb24oMzUwLCAzMCArIGRpc3QpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQnJhbmNoIDIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPDY7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkaXN0ID0gKHRpbWUgKiBzcGVlZCArIGkgKiA0MCkgJSAxOTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhd0VsZWN0cm9uKDQ1MCwgMzAgKyBkaXN0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5tb2RlID09PSAnYWNkYycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKDUwLCAzMCk7IGN0eC5saW5lVG8oNDUwLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oNDUwLCAyMjApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKDUwLCAyMjApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKDUwLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuYWNNb2RlKSBkcmF3QUNTb3VyY2UoNTAsIGgvMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgZHJhd0JhdHRlcnkoNTAsIGgvMik7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBkcmF3QnVsYig0NTAsIGgvMiwgdHJ1ZSk7IC8vIEFsd2F5cyBvbiBpbiB0aGlzIGRlbW8gbW9kZQoKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGVyaW1ldGVyID0gKDQwMCArIDE5MCkgKiAyOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3VudCA9IDIwOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTxjb3VudDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlzdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjTW9kZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9zY2lsbGF0ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvZmZzZXQgPSBNYXRoLnNpbih0aW1lICogNSkgKiA1MDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0ID0gKGkgKiAocGVyaW1ldGVyL2NvdW50KSArIG9mZnNldCArIHBlcmltZXRlcikgJSBwZXJpbWV0ZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZsb3cKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0ID0gKHRpbWUgKiAxMDAgKyBpICogKHBlcmltZXRlci9jb3VudCkpICUgcGVyaW1ldGVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBleCwgZXk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihkaXN0IDwgNDAwKSB7IGV4ID0gNTAgKyBkaXN0OyBleSA9IDMwOyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKGRpc3QgPCA0MDAgKyAxOTApIHsgZXggPSA0NTA7IGV5ID0gMzAgKyAoZGlzdCAtIDQwMCk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoZGlzdCA8IDgwMCArIDE5MCkgeyBleCA9IDQ1MCAtIChkaXN0IC0gNTkwKTsgZXkgPSAyMjA7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyBleCA9IDUwOyBleSA9IDIyMCAtIChkaXN0IC0gOTkwKTsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhd0VsZWN0cm9uKGV4LCBleSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuYW5pbWF0ZSgpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAsCgogICAgICAgICAgICAvLyBFTSBGSUVMRCBMQUIgU0lNVUxBVElPTgogICAgICAgICAgICBlbUZpZWxkTGFiOiB7CiAgICAgICAgICAgICAgICBjdXJyZW50OiAwLAogICAgICAgICAgICAgICAgYW5pbUlkOiBudWxsLAogICAgICAgICAgICAgICAgZWxlY3Ryb25zOiBbXSwKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbihjb250YWluZXIpIHsKICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBoLWZ1bGwganVzdGlmeS1jZW50ZXIgc2VsZWN0LW5vbmUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJmb250LWJvbGQgdGV4dC1sZyBtYi00IHRleHQtZ3JheS03MDAiPkVsZWN0cm9tYWduZXRpc20gRXhwbG9yZXI8L2gzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icmVsYXRpdmUgdy1mdWxsIG1heC13LWxnIGgtNjQgYmctZ3JheS05MDAgcm91bmRlZC1sZyBib3JkZXItMiBib3JkZXItZ3JheS03MDAgc2hhZG93LWlubmVyIG92ZXJmbG93LWhpZGRlbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGNhbnZhcyBpZD0iZW0tY2FudmFzIiB3aWR0aD0iNTAwIiBoZWlnaHQ9IjI1MCI+PC9jYW52YXM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWJzb2x1dGUgdG9wLTIgbGVmdC0yIHRleHQteHMgdGV4dC1ncmF5LTQwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj48ZGl2IGNsYXNzPSJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBiZy1ibHVlLTQwMCI+PC9kaXY+IEVsZWN0cm9uPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj48ZGl2IGNsYXNzPSJ3LTggaC0xIGJnLWdyZWVuLTUwMCI+PC9kaXY+IEItRmllbGQ8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPjxkaXYgY2xhc3M9InctOCBoLTEgYmcteWVsbG93LTUwMCI+PC9kaXY+IEUtRmllbGQgKEZvcmNlKTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InctZnVsbCBtYXgtdy1tZCBtdC02IGJnLWdyYXktMTAwIHAtNCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItZ3JheS0zMDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIG1iLTIgZm9udC1ib2xkIHRleHQtc20gdGV4dC1ncmF5LTcwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPkN1cnJlbnQgKEkpPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0iZW0tY3VycmVudC12YWwiPjAgQTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIGlkPSJlbS1zbGlkZXIiIG1pbj0iLTEwIiBtYXg9IjEwIiB2YWx1ZT0iMCIgY2xhc3M9InctZnVsbCBoLTIgYmctZ3JheS0zMDAgcm91bmRlZC1sZyBhcHBlYXJhbmNlLW5vbmUgY3Vyc29yLXBvaW50ZXIgYWNjZW50LWJsdWUtNjAwIiBvbmlucHV0PSJTaW11bGF0aW9ucy5lbUZpZWxkTGFiLnVwZGF0ZSgpIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LWNlbnRlciBtdC0yIHRleHQteHMgdGV4dC1ncmF5LTUwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vdmUgc2xpZGVyIHRvIGZsb3cgZWxlY3Ryb25zLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtdC00IHRleHQtc20gdGV4dC1ncmF5LTYwMCBtYXgtdy1sZyBiZy1ibHVlLTUwIHAtMyByb3VuZGVkIGJvcmRlciBib3JkZXItYmx1ZS0yMDAgdGV4dC1jZW50ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtYi0yIj48c3Ryb25nPkN1cnJlbnQgJiBGaWVsZHM6PC9zdHJvbmc+IEluY3JlYXNpbmcgY3VycmVudCAoSSkgc3RyZW5ndGhlbnMgdGhlIE1hZ25ldGljIEZpZWxkIChCLUZpZWxkKS4gUmV2ZXJzaW5nIGN1cnJlbnQgcmV2ZXJzZXMgdGhlIGZpZWxkIGRpcmVjdGlvbi48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5CLUZpZWxkIChHcmVlbik6PC9zdHJvbmc+IFRoZSBtYWduZXRpYyBmaWVsZCBjaXJjbGVzIGFyb3VuZCB0aGUgd2lyZS4gPGJyPuKKmSA9IEZpZWxkIGNvbWluZyBPVVQgb2Ygc2NyZWVuLiA8YnI+w5cgPSBGaWVsZCBnb2luZyBJTlRPIHNjcmVlbi48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnQgPSAwOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlY3Ryb25zID0gW107CiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8MjA7IGkrKykgdGhpcy5lbGVjdHJvbnMucHVzaCh7eDogTWF0aC5yYW5kb20oKSo1MDAsIHk6IDEyNSArIChNYXRoLnJhbmRvbSgpLTAuNSkqMTB9KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0KCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbS1zbGlkZXInKS52YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtLWN1cnJlbnQtdmFsJykudGV4dENvbnRlbnQgPSB0aGlzLmN1cnJlbnQgKyAiIEEiOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBzdGFydDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5hbmltSWQpIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbUlkKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgbG9vcDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtLWNhbnZhcycpOwogICAgICAgICAgICAgICAgICAgIGlmKCFjYW52YXMpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCB3ID0gY2FudmFzLndpZHRoOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGggPSBjYW52YXMuaGVpZ2h0OwoKICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIHcsIGgpOwoKICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IFdpcmUKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM0YjU1NjMnOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCBoLzIgLSAxNSwgdywgMzApOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIERyYXcgRS1GaWVsZCAoRHJpdmluZyBGb3JjZSkgaW5zaWRlIHdpcmUKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50ICE9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjZWFiMzA4JzsgLy8gWWVsbG93CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSAyOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnJvd1NpemUgPSA1OwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXIgPSB0aGlzLmN1cnJlbnQgPiAwID8gMSA6IC0xOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCB4PTIwOyB4PHc7IHgrPTYwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB5ID0gaC8yOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyh4LCB5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oeCArIDMwICogZGlyLCB5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFycm93aGVhZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyh4ICsgMzAgKiBkaXIsIHkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyh4ICsgMzAgKiBkaXIgLSBhcnJvd1NpemUgKiBkaXIsIHkgLSBhcnJvd1NpemUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyh4ICsgMzAgKiBkaXIgLSBhcnJvd1NpemUgKiBkaXIsIHkgKyBhcnJvd1NpemUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBFbGVjdHJvbnMKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM2MGE1ZmEnOyAvLyBCbHVlCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlZWQgPSB0aGlzLmN1cnJlbnQgKiAtMC41OyAvLyBFbGVjdHJvbnMgbW92ZSBvcHBvc2l0ZSB0byBjdXJyZW50CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVjdHJvbnMuZm9yRWFjaChlID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgZS54ICs9IHNwZWVkOwogICAgICAgICAgICAgICAgICAgICAgICBpZihlLnggPiB3KSBlLnggPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBpZihlLnggPCAwKSBlLnggPSB3OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5hcmMoZS54LCBlLnksIDQsIDAsIE1hdGguUEkqMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIC8vIERyYXcgTWFnbmV0aWMgRmllbGQgKEItRmllbGQpIFJpbmdzCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudCAhPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVdpZHRoID0gTWF0aC5hYnModGhpcy5jdXJyZW50KSAvIDM7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjMjJjNTVlJzsgLy8gR3JlZW4KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW50ZW5zaXR5ID0gTWF0aC5hYnModGhpcy5jdXJyZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgeD01MDsgeDx3OyB4Kz0xMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5lbGxpcHNlKHgsIGgvMiwgMjAsIDYwLCAwLCAwLCBNYXRoLlBJKjIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IEZpZWxkIEluZGljYXRvcnMgKFggYW5kIERvdHMpCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5mb250ID0gIjIwcHggQXJpYWwiOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgudGV4dEFsaWduID0gImNlbnRlciI7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAibWlkZGxlIjsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ltYm9sVG9wID0gdGhpcy5jdXJyZW50ID4gMCA/ICLiipkiIDogIsOXIjsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ltYm9sQm90ID0gdGhpcy5jdXJyZW50ID4gMCA/ICLDlyIgOiAi4oqZIjsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgeD01MDsgeDx3OyB4Kz01MCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGByZ2JhKDM0LCAxOTcsIDk0LCAke2ludGVuc2l0eS8xMH0pYDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dChzeW1ib2xUb3AsIHgsIGgvMiAtIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dChzeW1ib2xCb3QsIHgsIGgvMiArIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5sb29wKCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgICwKCiAgICAgICAgICAgIC8vIEVMRUNUUk9NRUNIQU5JQ0FMIExBQiBTSU1VTEFUSU9OCiAgICAgICAgICAgIGVsZWN0cm9tZWNoYW5pY2FsTGFiOiB7CiAgICAgICAgICAgICAgICBtb2RlOiAnbW90b3InLCAvLyBtb3RvciwgZ2VuZXJhdG9yLCB0cmFuc2Zvcm1lcgogICAgICAgICAgICAgICAgYW5pbUlkOiBudWxsLAogICAgICAgICAgICAgICAgYW5nbGU6IDAsCiAgICAgICAgICAgICAgICBzcGVlZDogMCwKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbihjb250YWluZXIpIHsKICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBoLWZ1bGwgdy1mdWxsIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0iZm9udC1ib2xkIHRleHQtbGcgbWItMiB0ZXh0LWdyYXktNzAwIj5FbGVjdHJvbWVjaGFuaWNhbCBTeXN0ZW1zPC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBnYXAtMiBtYi00IGJnLWdyYXktMTAwIHAtMSByb3VuZGVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IlNpbXVsYXRpb25zLmVsZWN0cm9tZWNoYW5pY2FsTGFiLnNldE1vZGUoJ21vdG9yJykiIGlkPSJlbWwtYnRuLW1vdG9yIiBjbGFzcz0icHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBmb250LWJvbGQgYmctd2hpdGUgc2hhZG93IHRleHQtYmx1ZS02MDAiPkVsZWN0cmljIE1vdG9yPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJTaW11bGF0aW9ucy5lbGVjdHJvbWVjaGFuaWNhbExhYi5zZXRNb2RlKCdnZW5lcmF0b3InKSIgaWQ9ImVtbC1idG4tZ2VuZXJhdG9yIiBjbGFzcz0icHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBmb250LWJvbGQgdGV4dC1ncmF5LTUwMCBob3ZlcjpiZy1ncmF5LTIwMCI+R2VuZXJhdG9yPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJTaW11bGF0aW9ucy5lbGVjdHJvbWVjaGFuaWNhbExhYi5zZXRNb2RlKCd0cmFuc2Zvcm1lcicpIiBpZD0iZW1sLWJ0bi10cmFuc2Zvcm1lciIgY2xhc3M9InB4LTMgcHktMSByb3VuZGVkIHRleHQtc20gZm9udC1ib2xkIHRleHQtZ3JheS01MDAgaG92ZXI6YmctZ3JheS0yMDAiPlRyYW5zZm9ybWVyPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJyZWxhdGl2ZSB3LWZ1bGwgbWF4LXctbGcgaC02NCBiZy1ncmF5LTUwIGJvcmRlci0yIGJvcmRlci1ncmF5LTQwMCByb3VuZGVkLWxnIHNoYWRvdy1pbm5lciBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBvdmVyZmxvdy1oaWRkZW4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjYW52YXMgaWQ9ImVtbC1jYW52YXMiIHdpZHRoPSI1MDAiIGhlaWdodD0iMjUwIj48L2NhbnZhcz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJlbWwtb3ZlcmxheSIgY2xhc3M9ImFic29sdXRlIGluc2V0LTAgcG9pbnRlci1ldmVudHMtbm9uZSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0iZW1sLWNvbnRyb2xzIiBjbGFzcz0ibXQtNCB3LWZ1bGwgbWF4LXctbWQgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgZ2FwLTIiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0iZW1sLWRlc2MiIGNsYXNzPSJtdC0yIHRleHQtc20gdGV4dC1ncmF5LTYwMCBmb250LW1lZGl1bSB0ZXh0LWNlbnRlciBoLTEyIG1heC13LW1kIGJnLWJsdWUtNTAgcC0yIHJvdW5kZWQgYm9yZGVyIGJvcmRlci1ibHVlLTEwMCI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRNb2RlKCdtb3RvcicpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBzZXRNb2RlOiBmdW5jdGlvbihtKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlID0gbTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFuZ2xlID0gMDsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBbJ21vdG9yJywgJ2dlbmVyYXRvcicsICd0cmFuc2Zvcm1lciddLmZvckVhY2goayA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBlbWwtYnRuLSR7a31gKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoayA9PT0gbSkgYnRuLmNsYXNzTmFtZSA9ICJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCBiZy13aGl0ZSBzaGFkb3cgdGV4dC1ibHVlLTYwMCI7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgYnRuLmNsYXNzTmFtZSA9ICJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIGhvdmVyOmJnLWdyYXktMjAwIjsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udHJvbHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1sLWNvbnRyb2xzJyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVzYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWwtZGVzYycpOwoKICAgICAgICAgICAgICAgICAgICBpZiAobSA9PT0gJ21vdG9yJykgewogICAgICAgICAgICAgICAgICAgICAgICBjb250cm9scy5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTQiPjxsYWJlbCBjbGFzcz0iZm9udC1ib2xkIHRleHQtc20iPkJhdHRlcnkgVm9sdGFnZTo8L2xhYmVsPjxpbnB1dCB0eXBlPSJyYW5nZSIgaWQ9ImVtbC1zbGlkZXIiIG1pbj0iMCIgbWF4PSIxMCIgdmFsdWU9IjAiIGNsYXNzPSJhY2NlbnQtYmx1ZS02MDAiIG9uaW5wdXQ9IlNpbXVsYXRpb25zLmVsZWN0cm9tZWNoYW5pY2FsTGFiLnVwZGF0ZSgpIj48L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgICAgICBkZXNjLnRleHRDb250ZW50ID0gIk1vdG9yOiBFbGVjdHJpY2FsIEVuZXJneSAoQmF0dGVyeSkg4oaSIEtpbmV0aWMgRW5lcmd5IChTcGlubmluZykuIEN1cnJlbnQgaW4gYSBtYWduZXRpYyBmaWVsZCBjcmVhdGVzIHRvcnF1ZSAoTG9yZW50eiBGb3JjZSkuIjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG0gPT09ICdnZW5lcmF0b3InKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xzLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCI+PGxhYmVsIGNsYXNzPSJmb250LWJvbGQgdGV4dC1zbSI+Q3JhbmsgU3BlZWQ6PC9sYWJlbD48aW5wdXQgdHlwZT0icmFuZ2UiIGlkPSJlbWwtc2xpZGVyIiBtaW49IjAiIG1heD0iMTAiIHZhbHVlPSIwIiBjbGFzcz0iYWNjZW50LWdyZWVuLTYwMCIgb25pbnB1dD0iU2ltdWxhdGlvbnMuZWxlY3Ryb21lY2hhbmljYWxMYWIudXBkYXRlKCkiPjwvZGl2PmA7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2MudGV4dENvbnRlbnQgPSAiR2VuZXJhdG9yOiBLaW5ldGljIEVuZXJneSAoU3Bpbm5pbmcpIOKGkiBFbGVjdHJpY2FsIEVuZXJneSAoTGlnaHQpLiBNb3ZpbmcgYSBjb2lsIGluIGEgbWFnbmV0aWMgZmllbGQgaW5kdWNlcyBjdXJyZW50IChGYXJhZGF5J3MgTGF3KS4iOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xzLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCI+PGxhYmVsIGNsYXNzPSJmb250LWJvbGQgdGV4dC1zbSI+U2Vjb25kYXJ5IFR1cm5zOjwvbGFiZWw+PGlucHV0IHR5cGU9InJhbmdlIiBpZD0iZW1sLXNsaWRlciIgbWluPSIxIiBtYXg9IjUiIHZhbHVlPSIyIiBjbGFzcz0iYWNjZW50LXB1cnBsZS02MDAiIG9uaW5wdXQ9IlNpbXVsYXRpb25zLmVsZWN0cm9tZWNoYW5pY2FsTGFiLnVwZGF0ZSgpIj48c3BhbiBpZD0iZW1sLXZhbCI+Mng8L3NwYW4+PC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICAgICAgZGVzYy50ZXh0Q29udGVudCA9ICJUcmFuc2Zvcm1lcjogQUMgRWxlY3RyaWNpdHkg4oaSIE1hZ25ldGljIEZpZWxkIOKGkiBBQyBFbGVjdHJpY2l0eS4gQ2hhbmdlcyB2b2x0YWdlIGJhc2VkIG9uIHR1cm5zIHJhdGlvIChTdGVwLXVwL1N0ZXAtZG93bikuIjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuYW5pbUlkKSBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1JZCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb29wKCk7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtbC1zbGlkZXInKTsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tb2RlID09PSAndHJhbnNmb3JtZXInKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWwtdmFsJykudGV4dENvbnRlbnQgPSBzbGlkZXIudmFsdWUgKyAieCI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBsb29wOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1sLWNhbnZhcycpOwogICAgICAgICAgICAgICAgICAgIGlmKCFjYW52YXMpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCB3ID0gY2FudmFzLndpZHRoOyBjb25zdCBoID0gY2FudmFzLmhlaWdodDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjeCA9IHcvMjsgY29uc3QgY3kgPSBoLzI7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtbC1zbGlkZXInKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSBzbGlkZXIgPyBwYXJzZUZsb2F0KHNsaWRlci52YWx1ZSkgOiAwOwoKICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCx3LGgpOwoKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tb2RlID09PSAnbW90b3InIHx8IHRoaXMubW9kZSA9PT0gJ2dlbmVyYXRvcicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZWY0NDQ0JzsgY3R4LmZpbGxSZWN0KGN4IC0gMTUwLCBjeSAtIDYwLCA0MCwgMTIwKTsgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsgY3R4LmZvbnQgPSAiYm9sZCAyMHB4IEFyaWFsIjsgY3R4LmZpbGxUZXh0KCJOIiwgY3ggLSAxMzUsIGN5ICsgNyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzNiODJmNic7IGN0eC5maWxsUmVjdChjeCArIDExMCwgY3kgLSA2MCwgNDAsIDEyMCk7IGN0eC5maWxsU3R5bGUgPSAnI2ZmZic7IGN0eC5maWxsVGV4dCgiUyIsIGN4ICsgMTI1LCBjeSArIDcpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAncmdiYSgwLDAsMCwwLjEpJzsgY3R4LmxpbmVXaWR0aCA9IDE7IGZvcihsZXQgaT0tNDA7IGk8PTQwOyBpKz0xMCkgeyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oY3gtMTEwLCBjeStpKTsgY3R4LmxpbmVUbyhjeCsxMTAsIGN5K2kpOyBjdHguc3Ryb2tlKCk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gJ21vdG9yJykgdGhpcy5zcGVlZCA9IHZhbCAqIDI7IGVsc2UgdGhpcy5zcGVlZCA9IHZhbCAqIDI7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYW5nbGUgKz0gdGhpcy5zcGVlZCAqIDAuMDU7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7IGN0eC50cmFuc2xhdGUoY3gsIGN5KTsgY3R4LnJvdGF0ZSh0aGlzLmFuZ2xlKTsgY3R4LnN0cm9rZVN0eWxlID0gJyNkOTc3MDYnOyBjdHgubGluZVdpZHRoID0gNDsgY3R4LnN0cm9rZVJlY3QoLTYwLCAtMzAsIDEyMCwgNjApOyBjdHguZmlsbFN0eWxlID0gJyNiNDUzMDknOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoNjAsIDAsIDEwLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOyBjdHgucmVzdG9yZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzM3NDE1MSc7IGN0eC5saW5lV2lkdGggPSAzOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oY3grNjAsIGN5KTsgY3R4LmxpbmVUbyhjeCs2MCwgY3krMTAwKTsgY3R4LmxpbmVUbyhjeC02MCwgY3krMTAwKTsgY3R4LmxpbmVUbyhjeC02MCwgY3kpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdtb3RvcicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZic7IGN0eC5maWxsUmVjdChjeC0yMCwgY3krOTAsIDQwLCAyMCk7IGN0eC5zdHJva2VSZWN0KGN4LTIwLCBjeSs5MCwgNDAsIDIwKTsgY3R4LmZpbGxTdHlsZSA9ICcjMDAwJzsgY3R4LmZpbGxUZXh0KHZhbCA+IDAgPyAi4pqhIiA6ICIiLCBjeC04LCBjeSsxMDcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodmFsID4gMCkgeyBjdHguZmlsbFN0eWxlID0gJyNmYmJmMjQnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoY3gsIGN5KzEwMCwgNCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHZhbCA+IDAgPyBgcmdiYSgyNTMsIDIyNCwgNzEsICR7dmFsLzEwfSlgIDogJyNlNWU3ZWInOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoY3gsIGN5KzEwMCwgMTUsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHZhbCA+IDApIHsgY3R4LnNoYWRvd0JsdXIgPSB2YWwgKiAyOyBjdHguc2hhZG93Q29sb3IgPSAnI2ZhY2MxNSc7IGN0eC5maWxsU3R5bGUgPSAnI2ZhY2MxNSc7IGN0eC5maWxsKCk7IGN0eC5zaGFkb3dCbHVyID0gMDsgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm1vZGUgPT09ICd0cmFuc2Zvcm1lcicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjOWNhM2FmJzsgY3R4LmZpbGxSZWN0KGN4LTgwLCBjeS04MCwgMTYwLCAxNjApOyBjdHguY2xlYXJSZWN0KGN4LTUwLCBjeS01MCwgMTAwLCAxMDApOyBjdHguc3Ryb2tlU3R5bGUgPSAnIzRiNTU2Myc7IGN0eC5saW5lV2lkdGggPSAyOyBjdHguc3Ryb2tlUmVjdChjeC04MCwgY3ktODAsIDE2MCwgMTYwKTsgY3R4LnN0cm9rZVJlY3QoY3gtNTAsIGN5LTUwLCAxMDAsIDEwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjZWY0NDQ0JzsgY3R4LmxpbmVXaWR0aCA9IDM7IGNvbnN0IHBUdXJucyA9IDU7IGZvcihsZXQgaT0wOyBpPHBUdXJuczsgaSsrKSB7IGNvbnN0IHkgPSBjeSAtIDYwICsgKGkgKiAyNSk7IGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyhjeC05MCwgeSk7IGN0eC5saW5lVG8oY3gtNTAsIHkrMTApOyBjdHguc3Ryb2tlKCk7IGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyhjeC05MCwgeSsxMCk7IGN0eC5saW5lVG8oY3gtNTAsIHkrMjApOyBjdHguc3Ryb2tlKCk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IERhdGUubm93KCkgLyA1MDA7IGNvbnN0IGlucHV0ViA9IE1hdGguc2luKHRpbWUpICogMjA7IGN0eC5maWxsU3R5bGUgPSAnI2VmNDQ0NCc7IGN0eC5mb250ID0gIjE0cHggQXJpYWwiOyBjdHguZmlsbFRleHQoIklucHV0IEFDIiwgY3gtMTQwLCBjeSk7IGN0eC5maWxsUmVjdChjeC0xNDAsIGN5KzEwLCA0MCwgaW5wdXRWKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyMzYjgyZjYnOyBjb25zdCBzVHVybnMgPSB2YWwgKiAyOyBjb25zdCBzdGVwID0gMTIwIC8gc1R1cm5zOyBmb3IobGV0IGk9MDsgaTxzVHVybnM7IGkrKykgeyBjb25zdCB5ID0gY3kgLSA2MCArIChpICogc3RlcCk7IGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyhjeCs1MCwgeSk7IGN0eC5saW5lVG8oY3grOTAsIHkrc3RlcC8yKTsgY3R4LnN0cm9rZSgpOyB9CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dFYgPSBpbnB1dFYgKiAoc1R1cm5zIC8gcFR1cm5zKTsgY3R4LmZpbGxTdHlsZSA9ICcjM2I4MmY2JzsgY3R4LmZpbGxUZXh0KCJPdXRwdXQgQUMiLCBjeCsxMDAsIGN5KTsgY3R4LmZpbGxSZWN0KGN4KzEwMCwgY3krMTAsIDQwLCBvdXRwdXRWKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gYHJnYmEoMjU1LCAyNTUsIDAsICR7TWF0aC5hYnMoTWF0aC5zaW4odGltZSkpICogMC41fSlgOyBjdHgubGluZVdpZHRoID0gNTsgY3R4LnN0cm9rZVJlY3QoY3gtNjUsIGN5LTY1LCAxMzAsIDEzMCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMubG9vcCgpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAsCgogICAgICAgICAgICAvLyBTT1VORCBMQUIgU0lNVUxBVElPTgogICAgICAgICAgICBzb3VuZExhYjogewogICAgICAgICAgICAgICAgbW9kZTogJ3Byb3BhZ2F0aW9uJywgLy8gcHJvcGFnYXRpb24sIHdhdmVmb3JtCiAgICAgICAgICAgICAgICBhbmltSWQ6IG51bGwsCiAgICAgICAgICAgICAgICBmcmVxOiAyLAogICAgICAgICAgICAgICAgYW1wOiA1MCwKICAgICAgICAgICAgICAgIHBhcnRpY2xlczogW10sCgogICAgICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbihjb250YWluZXIpIHsKICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBoLWZ1bGwgdy1mdWxsIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0iZm9udC1ib2xkIHRleHQtbGcgbWItMiB0ZXh0LWdyYXktNzAwIj5Tb3VuZCBXYXZlIExhYm9yYXRvcnk8L2gzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGdhcC0yIG1iLTQgYmctZ3JheS0xMDAgcC0xIHJvdW5kZWQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iU2ltdWxhdGlvbnMuc291bmRMYWIuc2V0TW9kZSgncHJvcGFnYXRpb24nKSIgaWQ9InNsLWJ0bi1wcm9wIiBjbGFzcz0icHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBmb250LWJvbGQgYmctd2hpdGUgc2hhZG93IHRleHQtYmx1ZS02MDAiPlBhcnRpY2xlIFByb3BhZ2F0aW9uPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJTaW11bGF0aW9ucy5zb3VuZExhYi5zZXRNb2RlKCd3YXZlZm9ybScpIiBpZD0ic2wtYnRuLXdhdmUiIGNsYXNzPSJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIGhvdmVyOmJnLWdyYXktMjAwIj5XYXZlIFByb3BlcnRpZXM8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJlbGF0aXZlIHctZnVsbCBtYXgtdy1sZyBoLTY0IGJnLWdyYXktOTAwIGJvcmRlci0yIGJvcmRlci1ncmF5LTcwMCByb3VuZGVkLWxnIHNoYWRvdy1pbm5lciBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBvdmVyZmxvdy1oaWRkZW4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjYW52YXMgaWQ9InNsLWNhbnZhcyIgd2lkdGg9IjUwMCIgaGVpZ2h0PSIyNTAiPjwvY2FudmFzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9InNsLW92ZXJsYXkiIGNsYXNzPSJhYnNvbHV0ZSB0b3AtMiBsZWZ0LTIgdGV4dC14cyB0ZXh0LWdyYXktNDAwIHBvaW50ZXItZXZlbnRzLW5vbmUiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InctZnVsbCBtYXgtdy1tZCBtdC02IGJnLWdyYXktMTAwIHAtNCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItZ3JheS0zMDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggZmxleC1jb2wgZ2FwLTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWJldHdlZW4gbWItMSBmb250LWJvbGQgdGV4dC1zbSB0ZXh0LWdyYXktNzAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5GcmVxdWVuY3kgKFBpdGNoKTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0ic2wtZnJlcS12YWwiPkxvdzwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InJhbmdlIiBpZD0ic2wtc2xpZGVyLWZyZXEiIG1pbj0iMSIgbWF4PSIxMCIgdmFsdWU9IjIiIGNsYXNzPSJ3LWZ1bGwgaC0yIGJnLWdyYXktMzAwIHJvdW5kZWQtbGcgYXBwZWFyYW5jZS1ub25lIGN1cnNvci1wb2ludGVyIGFjY2VudC1ibHVlLTYwMCIgb25pbnB1dD0iU2ltdWxhdGlvbnMuc291bmRMYWIudXBkYXRlKCkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIG1iLTEgZm9udC1ib2xkIHRleHQtc20gdGV4dC1ncmF5LTcwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+QW1wbGl0dWRlIChMb3VkbmVzcyk8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9InNsLWFtcC12YWwiPk1lZGl1bTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InJhbmdlIiBpZD0ic2wtc2xpZGVyLWFtcCIgbWluPSIxMCIgbWF4PSIxMDAiIHZhbHVlPSI1MCIgY2xhc3M9InctZnVsbCBoLTIgYmctZ3JheS0zMDAgcm91bmRlZC1sZyBhcHBlYXJhbmNlLW5vbmUgY3Vyc29yLXBvaW50ZXIgYWNjZW50LWdyZWVuLTYwMCIgb25pbnB1dD0iU2ltdWxhdGlvbnMuc291bmRMYWIudXBkYXRlKCkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0ic2wtZGVzYyIgY2xhc3M9Im10LTQgdGV4dC1zbSB0ZXh0LWdyYXktNjAwIGZvbnQtbWVkaXVtIHRleHQtY2VudGVyIG1heC13LW1kIGJnLWJsdWUtNTAgcC0yIHJvdW5kZWQgYm9yZGVyIGJvcmRlci1ibHVlLTEwMCI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0UGFydGljbGVzKCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRNb2RlKCdwcm9wYWdhdGlvbicpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBpbml0UGFydGljbGVzOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnRpY2xlcyA9IFtdOwogICAgICAgICAgICAgICAgICAgIGZvcihsZXQgeD0wOyB4PDUwMDsgeCs9MTApIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCB5PTIwOyB5PDIzMDsgeSs9MjApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFydGljbGVzLnB1c2goe2Jhc2VYOiB4LCB5OiB5LCB4OiB4fSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIHNldE1vZGU6IGZ1bmN0aW9uKG0pIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGUgPSBtOwogICAgICAgICAgICAgICAgICAgIFsncHJvcCcsICd3YXZlJ10uZm9yRWFjaChrID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHNsLWJ0bi0ke2t9YCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKChrID09PSAncHJvcCcgJiYgbSA9PT0gJ3Byb3BhZ2F0aW9uJykgfHwgKGsgPT09ICd3YXZlJyAmJiBtID09PSAnd2F2ZWZvcm0nKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTmFtZSA9ICJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCBiZy13aGl0ZSBzaGFkb3cgdGV4dC1ibHVlLTYwMCI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NOYW1lID0gInB4LTMgcHktMSByb3VuZGVkIHRleHQtc20gZm9udC1ib2xkIHRleHQtZ3JheS01MDAgaG92ZXI6YmctZ3JheS0yMDAiOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlc2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2wtZGVzYycpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2wtb3ZlcmxheScpOwogICAgICAgICAgICAgICAgICAgIGlmIChtID09PSAncHJvcGFnYXRpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2MudGV4dENvbnRlbnQgPSAiVmlzdWFsaXppbmcgU291bmQgYXMgYSBMb25naXR1ZGluYWwgV2F2ZS4gUGFydGljbGVzIHZpYnJhdGUgYmFjayBhbmQgZm9ydGgsIGNyZWF0aW5nIGNvbXByZXNzaW9ucyBhbmQgcmFyZWZhY3Rpb25zLiI7CiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXkuaW5uZXJIVE1MID0gIkRvdHMgPSBBaXIgTW9sZWN1bGVzIjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBkZXNjLnRleHRDb250ZW50ID0gIlZpc3VhbGl6aW5nIFNvdW5kIGFzIGEgVHJhbnN2ZXJzZSBXYXZlZm9ybS4gVGhpcyBncmFwaCByZXByZXNlbnRzIHByZXNzdXJlIG92ZXIgdGltZS9kaXN0YW5jZS4iOwogICAgICAgICAgICAgICAgICAgICAgICBvdmVybGF5LmlubmVySFRNTCA9ICJMaW5lID0gUHJlc3N1cmUgTGV2ZWwiOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoKTsKICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmFuaW1JZCkgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltSWQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMubG9vcCgpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuZnJlcSA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbC1zbGlkZXItZnJlcScpLnZhbHVlKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFtcCA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbC1zbGlkZXItYW1wJykudmFsdWUpOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbC1mcmVxLXZhbCcpLnRleHRDb250ZW50ID0gdGhpcy5mcmVxIDwgNCA/ICJMb3ciIDogKHRoaXMuZnJlcSA+IDcgPyAiSGlnaCIgOiAiTWVkaXVtIik7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NsLWFtcC12YWwnKS50ZXh0Q29udGVudCA9IHRoaXMuYW1wIDwgNDAgPyAiUXVpZXQiIDogKHRoaXMuYW1wID4gNzAgPyAiTG91ZCIgOiAiTWVkaXVtIik7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIGxvb3A6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbC1jYW52YXMnKTsKICAgICAgICAgICAgICAgICAgICBpZighY2FudmFzKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdyA9IGNhbnZhcy53aWR0aDsgY29uc3QgaCA9IGNhbnZhcy5oZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IERhdGUubm93KCkgLyAxMDAwOwoKICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCx3LGgpOwoKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tb2RlID09PSAncHJvcGFnYXRpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzYwYTVmYSc7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbmVYID0gMjAgKyBNYXRoLnNpbih0aW1lICogdGhpcy5mcmVxICogMikgKiAodGhpcy5hbXAgLyA1KTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMzc0MTUxJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDAsIDUwKTsgY3R4LmxpbmVUbyhjb25lWCwgODApOyBjdHgubGluZVRvKGNvbmVYLCAxNzApOyBjdHgubGluZVRvKDAsIDIwMCk7IGN0eC5maWxsKCk7CgogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM2MGE1ZmEnOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnRpY2xlcy5mb3JFYWNoKHAgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGhhc2UgPSBwLmJhc2VYICogMC4wNTsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXNwbGFjZW1lbnQgPSBNYXRoLnNpbih0aW1lICogdGhpcy5mcmVxICogMiAtIHBoYXNlKSAqICh0aGlzLmFtcCAvIDMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVmZmVjdGl2ZURpc3AgPSBkaXNwbGFjZW1lbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocC5iYXNlWCA8IDUwKSBlZmZlY3RpdmVEaXNwICo9IChwLmJhc2VYIC8gNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcC54ID0gcC5iYXNlWCArIGVmZmVjdGl2ZURpc3A7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMocC54LCBwLnksIDIsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjMjJjNTVlJzsgY3R4LmxpbmVXaWR0aCA9IDM7IGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCB4PTA7IHg8dzsgeCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwaGFzZSA9IHggKiAwLjAyICogdGhpcy5mcmVxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeSA9IGgvMiArIE1hdGguc2luKHRpbWUgKiB0aGlzLmZyZXEgKiAyIC0gcGhhc2UpICogdGhpcy5hbXA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4PT09MCkgY3R4Lm1vdmVUbyh4LCB5KTsgZWxzZSBjdHgubGluZVRvKHgsIHkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJ3JnYmEoMjU1LDI1NSwyNTUsMC4yKSc7IGN0eC5saW5lV2lkdGggPSAxOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMCwgaC8yKTsgY3R4LmxpbmVUbyh3LCBoLzIpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZic7IGN0eC5mb250ID0gIjEycHggQXJpYWwiOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIkFtcGxpdHVkZTogIiArIHRoaXMuYW1wLCAxMCwgMjApOyBjdHguZmlsbFRleHQoIkZyZXF1ZW5jeTogIiArIHRoaXMuZnJlcSArICIgSHogKHNpbXVsYXRlZCkiLCAxMCwgNDApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmxvb3AoKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyBBRFZBTkNFRCBTT1VORCBMQUIgU0lNVUxBVElPTgogICAgICAgICAgICBhZHZhbmNlZFNvdW5kTGFiOiB7CiAgICAgICAgICAgICAgICBtb2RlOiAnZG9wcGxlcicsIC8vIGRvcHBsZXIsIGludGVyZmVyZW5jZSwgcmVmbGVjdGlvbgogICAgICAgICAgICAgICAgYW5pbUlkOiBudWxsLAogICAgICAgICAgICAgICAgc291cmNlWDogMCwKICAgICAgICAgICAgICAgIHdhdmVzOiBbXSwKICAgICAgICAgICAgICAgIGxhc3RFbWl0OiAwLAogICAgICAgICAgICAgICAgcHVsc2U6IG51bGwsCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHJlbmRlcjogZnVuY3Rpb24oY29udGFpbmVyKSB7CiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgaC1mdWxsIHctZnVsbCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LWxnIG1iLTIgdGV4dC1ncmF5LTcwMCI+QWR2YW5jZWQgV2F2ZSBQaHlzaWNzPC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBnYXAtMiBtYi00IGJnLWdyYXktMTAwIHAtMSByb3VuZGVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IlNpbXVsYXRpb25zLmFkdmFuY2VkU291bmRMYWIuc2V0TW9kZSgnZG9wcGxlcicpIiBpZD0iYXNsLWJ0bi1kb3BwbGVyIiBjbGFzcz0icHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBmb250LWJvbGQgYmctd2hpdGUgc2hhZG93IHRleHQtYmx1ZS02MDAiPkRvcHBsZXIgRWZmZWN0PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJTaW11bGF0aW9ucy5hZHZhbmNlZFNvdW5kTGFiLnNldE1vZGUoJ2ludGVyZmVyZW5jZScpIiBpZD0iYXNsLWJ0bi1pbnRlcmZlcmVuY2UiIGNsYXNzPSJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIGhvdmVyOmJnLWdyYXktMjAwIj5JbnRlcmZlcmVuY2U8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IlNpbXVsYXRpb25zLmFkdmFuY2VkU291bmRMYWIuc2V0TW9kZSgncmVmbGVjdGlvbicpIiBpZD0iYXNsLWJ0bi1yZWZsZWN0aW9uIiBjbGFzcz0icHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBmb250LWJvbGQgdGV4dC1ncmF5LTUwMCBob3ZlcjpiZy1ncmF5LTIwMCI+UmVmbGVjdGlvbiAoU29uYXIpPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJyZWxhdGl2ZSB3LWZ1bGwgbWF4LXctbGcgaC02NCBiZy1ncmF5LTkwMCBib3JkZXItMiBib3JkZXItZ3JheS03MDAgcm91bmRlZC1sZyBzaGFkb3ctaW5uZXIgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgb3ZlcmZsb3ctaGlkZGVuIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Y2FudmFzIGlkPSJhc2wtY2FudmFzIiB3aWR0aD0iNTAwIiBoZWlnaHQ9IjI1MCI+PC9jYW52YXM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0iYXNsLWRlc2MiIGNsYXNzPSJtdC00IHRleHQtc20gdGV4dC1ncmF5LTYwMCBmb250LW1lZGl1bSB0ZXh0LWNlbnRlciBtYXgtdy1tZCBiZy1ibHVlLTUwIHAtMiByb3VuZGVkIGJvcmRlciBib3JkZXItYmx1ZS0xMDAiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TW9kZSgnZG9wcGxlcicpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBzZXRNb2RlOiBmdW5jdGlvbihtKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlID0gbTsKICAgICAgICAgICAgICAgICAgICB0aGlzLndhdmVzID0gW107CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VYID0gNTA7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wdWxzZSA9IG51bGw7CgogICAgICAgICAgICAgICAgICAgIFsnZG9wcGxlcicsICdpbnRlcmZlcmVuY2UnLCAncmVmbGVjdGlvbiddLmZvckVhY2goayA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBhc2wtYnRuLSR7a31gKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoayA9PT0gbSkgYnRuLmNsYXNzTmFtZSA9ICJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCBiZy13aGl0ZSBzaGFkb3cgdGV4dC1ibHVlLTYwMCI7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgYnRuLmNsYXNzTmFtZSA9ICJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIGhvdmVyOmJnLWdyYXktMjAwIjsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVzYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhc2wtZGVzYycpOwogICAgICAgICAgICAgICAgICAgIGlmIChtID09PSAnZG9wcGxlcicpIGRlc2MudGV4dENvbnRlbnQgPSAiRG9wcGxlciBFZmZlY3Q6IEFzIHRoZSBzb3VyY2UgbW92ZXMsIHdhdmVzIGJ1bmNoIHVwIGluIGZyb250IChIaWdoIFBpdGNoKSBhbmQgc3ByZWFkIG91dCBiZWhpbmQgKExvdyBQaXRjaCkuIjsKICAgICAgICAgICAgICAgICAgICBpZiAobSA9PT0gJ2ludGVyZmVyZW5jZScpIGRlc2MudGV4dENvbnRlbnQgPSAiSW50ZXJmZXJlbmNlOiBUd28gc291cmNlcyBjcmVhdGUgcGF0dGVybnMgb2YgQ29uc3RydWN0aXZlIChsb3VkKSBhbmQgRGVzdHJ1Y3RpdmUgKHF1aWV0KSBpbnRlcmZlcmVuY2UuIjsKICAgICAgICAgICAgICAgICAgICBpZiAobSA9PT0gJ3JlZmxlY3Rpb24nKSBkZXNjLnRleHRDb250ZW50ID0gIlJlZmxlY3Rpb246IFNvdW5kIHdhdmVzIGJvdW5jZSBvZmYgc3VyZmFjZXMuIFRoaXMgaXMgdGhlIHByaW5jaXBsZSBiZWhpbmQgRWNob2VzIGFuZCBTb25hci4iOwoKICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmFuaW1JZCkgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltSWQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMubG9vcCgpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBsb29wOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXNsLWNhbnZhcycpOwogICAgICAgICAgICAgICAgICAgIGlmKCFjYW52YXMpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCB3ID0gY2FudmFzLndpZHRoOyBjb25zdCBoID0gY2FudmFzLmhlaWdodDsKICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lID0gRGF0ZS5ub3coKSAvIDEwMDA7CgogICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLHcsaCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDI7CgogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdkb3BwbGVyJykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZVggPSAodGhpcy5zb3VyY2VYICsgMS41KSAlICh3ICsgNTApOwogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnNvdXJjZVggPiB3KSB0aGlzLnNvdXJjZVggPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMubGFzdEVtaXQgfHwgdGltZSAtIHRoaXMubGFzdEVtaXQgPiAwLjIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2F2ZXMucHVzaCh7eDogdGhpcy5zb3VyY2VYLCB5OiBoLzIsIHI6IDEsIGFnZTogMH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0RW1pdCA9IHRpbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyM2MGE1ZmEnOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy53YXZlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdhdmUgPSB0aGlzLndhdmVzW2ldOyB3YXZlLnIgKz0gMjsgd2F2ZS5hZ2UgKz0gMC4wMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IE1hdGgubWF4KDAsIDEgLSB3YXZlLmFnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMod2F2ZS54LCB3YXZlLnksIHdhdmUuciwgMCwgTWF0aC5QSSoyKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdhdmUuYWdlID4gMSkgdGhpcy53YXZlcy5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTsgY3R4LmZpbGxTdHlsZSA9ICcjZWY0NDQ0JzsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHRoaXMuc291cmNlWCwgaC8yLCA1LCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5tb2RlID09PSAnaW50ZXJmZXJlbmNlJykgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzMSA9IHt4OiB3LzMsIHk6IGgvMn07IGNvbnN0IHMyID0ge3g6IDIqdy8zLCB5OiBoLzJ9OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMubGFzdEVtaXQgfHwgdGltZSAtIHRoaXMubGFzdEVtaXQgPiAwLjMpIHsgdGhpcy53YXZlcy5wdXNoKHt4OiBzMS54LCB5OiBzMS55LCByOiAxLCBhZ2U6IDB9KTsgdGhpcy53YXZlcy5wdXNoKHt4OiBzMi54LCB5OiBzMi55LCByOiAxLCBhZ2U6IDB9KTsgdGhpcy5sYXN0RW1pdCA9IHRpbWU7IH0KICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyM2MGE1ZmEnOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy53YXZlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgeyBsZXQgd2F2ZSA9IHRoaXMud2F2ZXNbaV07IHdhdmUuciArPSAxLjU7IHdhdmUuYWdlICs9IDAuMDE7IGN0eC5nbG9iYWxBbHBoYSA9IE1hdGgubWF4KDAsIDEgLSB3YXZlLmFnZSk7IGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyh3YXZlLngsIHdhdmUueSwgd2F2ZS5yLCAwLCBNYXRoLlBJKjIpOyBjdHguc3Ryb2tlKCk7IGlmICh3YXZlLmFnZSA+IDEpIHRoaXMud2F2ZXMuc3BsaWNlKGksIDEpOyB9CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDE7IGN0eC5maWxsU3R5bGUgPSAnI2VmNDQ0NCc7IGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhzMS54LCBzMS55LCA1LCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoczIueCwgczIueSwgNSwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMubW9kZSA9PT0gJ3JlZmxlY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdhbGxYID0gdyAtIDUwOyBjdHguZmlsbFN0eWxlID0gJyM5Y2EzYWYnOyBjdHguZmlsbFJlY3Qod2FsbFgsIDUwLCAxMCwgaC0xMDApOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHVsc2UpIHRoaXMucHVsc2UgPSB7eDogNTAsIGRpcjogMX07CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHVsc2UueCArPSAzICogdGhpcy5wdWxzZS5kaXI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnB1bHNlLnggPj0gd2FsbFggJiYgdGhpcy5wdWxzZS5kaXIgPT09IDEpIHsgdGhpcy5wdWxzZS5kaXIgPSAtMTsgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHdhbGxYLCBoLzIsIDIwLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOyB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnB1bHNlLnggPCAwKSB7IHRoaXMucHVsc2UueCA9IDUwOyB0aGlzLnB1bHNlLmRpciA9IDE7IH0KICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyMyMmM1NWUnOyBjdHgubGluZVdpZHRoID0gMzsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHRoaXMucHVsc2UueCwgaC8yLCAyMCwgLU1hdGguUEkvMiwgTWF0aC5QSS8yLCB0aGlzLnB1bHNlLmRpciA9PT0gLTEpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2VmNDQ0NCc7IGN0eC5maWxsUmVjdCg0MCwgaC8yIC0gMTAsIDIwLCAyMCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMubG9vcCgpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIExJR0hUIExBQiBTSU1VTEFUSU9OCiAgICAgICAgICAgIGxpZ2h0TGFiOiB7CiAgICAgICAgICAgICAgICBtb2RlOiAncmVmbGVjdGlvbicsCiAgICAgICAgICAgICAgICBhbmltSWQ6IG51bGwsCiAgICAgICAgICAgICAgICBhbmdsZTogNDUsCiAgICAgICAgICAgICAgICB3YXZlbGVuZ3RoOiA1MDAsCiAgICAgICAgICAgICAgICByOiAyNTUsIGc6IDI1NSwgYjogMjU1LAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKGNvbnRhaW5lcikgewogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGgtZnVsbCB3LWZ1bGwiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJmb250LWJvbGQgdGV4dC1sZyBtYi0yIHRleHQtZ3JheS03MDAiPkxpZ2h0ICYgT3B0aWNzIExhYjwvaDM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGZsZXgtd3JhcCBqdXN0aWZ5LWNlbnRlciBnYXAtMiBtYi00IGJnLWdyYXktMTAwIHAtMSByb3VuZGVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IlNpbXVsYXRpb25zLmxpZ2h0TGFiLnNldE1vZGUoJ3JlZmxlY3Rpb24nKSIgaWQ9ImxsLWJ0bi1yZWZsZWN0aW9uIiBjbGFzcz0icHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBmb250LWJvbGQgYmctd2hpdGUgc2hhZG93IHRleHQtYmx1ZS02MDAiPlJlZmxlY3Rpb248L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IlNpbXVsYXRpb25zLmxpZ2h0TGFiLnNldE1vZGUoJ3JlZnJhY3Rpb24nKSIgaWQ9ImxsLWJ0bi1yZWZyYWN0aW9uIiBjbGFzcz0icHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBmb250LWJvbGQgdGV4dC1ncmF5LTUwMCBob3ZlcjpiZy1ncmF5LTIwMCI+UmVmcmFjdGlvbjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iU2ltdWxhdGlvbnMubGlnaHRMYWIuc2V0TW9kZSgnc3BlY3RydW0nKSIgaWQ9ImxsLWJ0bi1zcGVjdHJ1bSIgY2xhc3M9InB4LTMgcHktMSByb3VuZGVkIHRleHQtc20gZm9udC1ib2xkIHRleHQtZ3JheS01MDAgaG92ZXI6YmctZ3JheS0yMDAiPkVNIFNwZWN0cnVtPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJTaW11bGF0aW9ucy5saWdodExhYi5zZXRNb2RlKCdjb2xvcnMnKSIgaWQ9ImxsLWJ0bi1jb2xvcnMiIGNsYXNzPSJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIGhvdmVyOmJnLWdyYXktMjAwIj5Db2xvciBNaXhpbmc8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icmVsYXRpdmUgdy1mdWxsIG1heC13LWxnIGgtNjQgYmctZ3JheS05MDAgYm9yZGVyLTIgYm9yZGVyLWdyYXktNzAwIHJvdW5kZWQtbGcgc2hhZG93LWlubmVyIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG92ZXJmbG93LWhpZGRlbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGNhbnZhcyBpZD0ibGwtY2FudmFzIiB3aWR0aD0iNTAwIiBoZWlnaHQ9IjI1MCI+PC9jYW52YXM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImxsLWNvbnRyb2xzIiBjbGFzcz0idy1mdWxsIG1heC13LW1kIG10LTQgYmctZ3JheS0xMDAgcC00IHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJsbC1kZXNjIiBjbGFzcz0ibXQtNCB0ZXh0LXNtIHRleHQtZ3JheS02MDAgZm9udC1tZWRpdW0gdGV4dC1jZW50ZXIgbWF4LXctbWQgYmctYmx1ZS01MCBwLTIgcm91bmRlZCBib3JkZXIgYm9yZGVyLWJsdWUtMTAwIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNldE1vZGUoJ3JlZmxlY3Rpb24nKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzZXRNb2RlOiBmdW5jdGlvbihtKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlID0gbTsKICAgICAgICAgICAgICAgICAgICBbJ3JlZmxlY3Rpb24nLCAncmVmcmFjdGlvbicsICdzcGVjdHJ1bScsICdjb2xvcnMnXS5mb3JFYWNoKGsgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgbGwtYnRuLSR7a31gKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoayA9PT0gbSkgYnRuLmNsYXNzTmFtZSA9ICJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCBiZy13aGl0ZSBzaGFkb3cgdGV4dC1ibHVlLTYwMCI7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgYnRuLmNsYXNzTmFtZSA9ICJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIGhvdmVyOmJnLWdyYXktMjAwIjsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250cm9scyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsbC1jb250cm9scycpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlc2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGwtZGVzYycpOwogICAgICAgICAgICAgICAgICAgIGlmIChtID09PSAncmVmbGVjdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbHMuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGdhcC00Ij48bGFiZWwgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LXNtIHRleHQtZ3JheS03MDAgdy0yNCI+QW5nbGU6PC9sYWJlbD48aW5wdXQgdHlwZT0icmFuZ2UiIGlkPSJsbC1zbGlkZXIiIG1pbj0iMTAiIG1heD0iODAiIHZhbHVlPSI0NSIgY2xhc3M9InctZnVsbCBhY2NlbnQtYmx1ZS02MDAiIG9uaW5wdXQ9IlNpbXVsYXRpb25zLmxpZ2h0TGFiLnVwZGF0ZSgpIj48c3BhbiBpZD0ibGwtdmFsIiBjbGFzcz0idGV4dC1zbSBmb250LW1vbm8gdy0xMiI+NDXCsDwvc3Bhbj48L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgICAgICBkZXNjLnRleHRDb250ZW50ID0gIlJlZmxlY3Rpb246IExpZ2h0IGJvdW5jZXMgb2ZmIGEgbWlycm9yLiBUaGUgQW5nbGUgb2YgSW5jaWRlbmNlIGVxdWFscyB0aGUgQW5nbGUgb2YgUmVmbGVjdGlvbi4iOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobSA9PT0gJ3JlZnJhY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xzLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCI+PGxhYmVsIGNsYXNzPSJmb250LWJvbGQgdGV4dC1zbSB0ZXh0LWdyYXktNzAwIHctMjQiPkluY2lkZW5jZTo8L2xhYmVsPjxpbnB1dCB0eXBlPSJyYW5nZSIgaWQ9ImxsLXNsaWRlciIgbWluPSIwIiBtYXg9IjgwIiB2YWx1ZT0iNDUiIGNsYXNzPSJ3LWZ1bGwgYWNjZW50LWJsdWUtNjAwIiBvbmlucHV0PSJTaW11bGF0aW9ucy5saWdodExhYi51cGRhdGUoKSI+PHNwYW4gaWQ9ImxsLXZhbCIgY2xhc3M9InRleHQtc20gZm9udC1tb25vIHctMTIiPjQ1wrA8L3NwYW4+PC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICAgICAgZGVzYy50ZXh0Q29udGVudCA9ICJSZWZyYWN0aW9uOiBMaWdodCBiZW5kcyB3aGVuIHBhc3NpbmcgZnJvbSBBaXIgKGZhc3QpIHRvIFdhdGVyIChzbG93KS4gSXQgYmVuZHMgdG93YXJkcyB0aGUgbm9ybWFsLiI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtID09PSAnc3BlY3RydW0nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xzLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCI+PGxhYmVsIGNsYXNzPSJmb250LWJvbGQgdGV4dC1zbSB0ZXh0LWdyYXktNzAwIHctMjQiPldhdmVsZW5ndGg6PC9sYWJlbD48aW5wdXQgdHlwZT0icmFuZ2UiIGlkPSJsbC1zbGlkZXIiIG1pbj0iMzgwIiBtYXg9Ijc1MCIgdmFsdWU9IjUwMCIgY2xhc3M9InctZnVsbCBhY2NlbnQtcHVycGxlLTYwMCIgb25pbnB1dD0iU2ltdWxhdGlvbnMubGlnaHRMYWIudXBkYXRlKCkiPjxzcGFuIGlkPSJsbC12YWwiIGNsYXNzPSJ0ZXh0LXNtIGZvbnQtbW9ubyB3LTE2Ij41MDBubTwvc3Bhbj48L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgICAgICBkZXNjLnRleHRDb250ZW50ID0gIlZpc2libGUgU3BlY3RydW06IERpZmZlcmVudCB3YXZlbGVuZ3RocyBjb3JyZXNwb25kIHRvIGRpZmZlcmVudCBjb2xvcnMuIFNob3J0ZXIgPSBWaW9sZXQvQmx1ZSwgTG9uZ2VyID0gUmVkLiI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtID09PSAnY29sb3JzJykgewogICAgICAgICAgICAgICAgICAgICAgICBjb250cm9scy5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGdhcC00IGp1c3RpZnktY2VudGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LWNlbnRlciI+PGRpdiBjbGFzcz0idGV4dC1yZWQtNjAwIGZvbnQtYm9sZCB0ZXh0LXhzIj5SZWQ8L2Rpdj48aW5wdXQgdHlwZT0icmFuZ2UiIGlkPSJsbC1yIiBtaW49IjAiIG1heD0iMjU1IiB2YWx1ZT0iJHt0aGlzLnJ9IiBjbGFzcz0iaC0yIHctMjAgYWNjZW50LXJlZC02MDAiIG9uaW5wdXQ9IlNpbXVsYXRpb25zLmxpZ2h0TGFiLnVwZGF0ZSgpIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LWNlbnRlciI+PGRpdiBjbGFzcz0idGV4dC1ncmVlbi02MDAgZm9udC1ib2xkIHRleHQteHMiPkdyZWVuPC9kaXY+PGlucHV0IHR5cGU9InJhbmdlIiBpZD0ibGwtZyIgbWluPSIwIiBtYXg9IjI1NSIgdmFsdWU9IiR7dGhpcy5nfSIgY2xhc3M9ImgtMiB3LTIwIGFjY2VudC1ncmVlbi02MDAiIG9uaW5wdXQ9IlNpbXVsYXRpb25zLmxpZ2h0TGFiLnVwZGF0ZSgpIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LWNlbnRlciI+PGRpdiBjbGFzcz0idGV4dC1ibHVlLTYwMCBmb250LWJvbGQgdGV4dC14cyI+Qmx1ZTwvZGl2PjxpbnB1dCB0eXBlPSJyYW5nZSIgaWQ9ImxsLWIiIG1pbj0iMCIgbWF4PSIyNTUiIHZhbHVlPSIke3RoaXMuYn0iIGNsYXNzPSJoLTIgdy0yMCBhY2NlbnQtYmx1ZS02MDAiIG9uaW5wdXQ9IlNpbXVsYXRpb25zLmxpZ2h0TGFiLnVwZGF0ZSgpIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgICAgICAgICBkZXNjLnRleHRDb250ZW50ID0gIkFkZGl0aXZlIENvbG9yIE1peGluZzogQWRqdXN0IGludGVuc2l0aWVzIHRvIGNyZWF0ZSBkaWZmZXJlbnQgY29sb3JzLiBBbGwgbWF4ID0gV2hpdGUuIjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoKTsKICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmFuaW1JZCkgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltSWQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMubG9vcCgpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gJ2NvbG9ycycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yID0gcGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xsLXInKS52YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZyA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsbC1nJykudmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmIgPSBwYXJzZUludChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGwtYicpLnZhbHVlKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGwtc2xpZGVyJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzbGlkZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHBhcnNlSW50KHNsaWRlci52YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGwtdmFsJykudGV4dENvbnRlbnQgPSB0aGlzLm1vZGUgPT09ICdzcGVjdHJ1bScgPyB2YWwgKyAibm0iIDogdmFsICsgIsKwIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdzcGVjdHJ1bScpIHRoaXMud2F2ZWxlbmd0aCA9IHZhbDsgZWxzZSB0aGlzLmFuZ2xlID0gdmFsOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGxvb3A6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsbC1jYW52YXMnKTsKICAgICAgICAgICAgICAgICAgICBpZighY2FudmFzKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdyA9IGNhbnZhcy53aWR0aDsgY29uc3QgaCA9IGNhbnZhcy5oZWlnaHQ7IGNvbnN0IGN4ID0gdy8yOyBjb25zdCBjeSA9IGgvMjsKICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCx3LGgpOwogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdyZWZsZWN0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM5NGEzYjgnOyBjdHguZmlsbFJlY3QoMCwgaC0yMCwgdywgMjApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI2ZmZic7IGN0eC5saW5lV2lkdGggPSAyOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMCwgaC0yMCk7IGN0eC5saW5lVG8odywgaC0yMCk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJ3JnYmEoMjU1LDI1NSwyNTUsMC4zKSc7IGN0eC5zZXRMaW5lRGFzaChbNSw1XSk7IGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyhjeCwgaC0yMCk7IGN0eC5saW5lVG8oY3gsIDIwKTsgY3R4LnN0cm9rZSgpOyBjdHguc2V0TGluZURhc2goW10pOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByYWQgPSAoOTAgLSB0aGlzLmFuZ2xlKSAqIE1hdGguUEkgLyAxODA7IGNvbnN0IGxlbiA9IDMwMDsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRYID0gY3ggLSBNYXRoLmNvcyhyYWQpICogbGVuOyBjb25zdCBzdGFydFkgPSAoaC0yMCkgLSBNYXRoLnNpbihyYWQpICogbGVuOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI2VmNDQ0NCc7IGN0eC5saW5lV2lkdGggPSAzOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oc3RhcnRYLCBzdGFydFkpOyBjdHgubGluZVRvKGN4LCBoLTIwKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmRYID0gY3ggKyBNYXRoLmNvcyhyYWQpICogbGVuOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oY3gsIGgtMjApOyBjdHgubGluZVRvKGVuZFgsIHN0YXJ0WSk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsgY3R4LmZvbnQgPSAiMTRweCBBcmlhbCI7IGN0eC5maWxsVGV4dChgaSA9ICR7dGhpcy5hbmdsZX3CsGAsIGN4IC0gNDAsIGggLSA0MCk7IGN0eC5maWxsVGV4dChgciA9ICR7dGhpcy5hbmdsZX3CsGAsIGN4ICsgMjAsIGggLSA0MCk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm1vZGUgPT09ICdyZWZyYWN0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOyBjdHguZmlsbFJlY3QoMCwgMCwgdywgaC8yKTsgY3R4LmZpbGxTdHlsZSA9ICcjMWUzYThhJzsgY3R4LmZpbGxSZWN0KDAsIGgvMiwgdywgaC8yKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsgY3R4LmZvbnQgPSAiMTJweCBBcmlhbCI7IGN0eC5maWxsVGV4dCgiQWlyIChuPTEuMCkiLCAxMCwgMjApOyBjdHguZmlsbFRleHQoIldhdGVyIChuPTEuMzMpIiwgMTAsIGgtMTApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAncmdiYSgyNTUsMjU1LDI1NSwwLjMpJzsgY3R4LnNldExpbmVEYXNoKFs1LDVdKTsgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKGN4LCAwKTsgY3R4LmxpbmVUbyhjeCwgaCk7IGN0eC5zdHJva2UoKTsgY3R4LnNldExpbmVEYXNoKFtdKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmFkID0gKDkwIC0gdGhpcy5hbmdsZSkgKiBNYXRoLlBJIC8gMTgwOyBjb25zdCBsZW4gPSAyMDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0WCA9IGN4IC0gTWF0aC5jb3MocmFkKSAqIGxlbjsgY29uc3Qgc3RhcnRZID0gKGgvMikgLSBNYXRoLnNpbihyYWQpICogbGVuOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI2VmNDQ0NCc7IGN0eC5saW5lV2lkdGggPSAzOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oc3RhcnRYLCBzdGFydFkpOyBjdHgubGluZVRvKGN4LCBoLzIpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRoZXRhMVJhZCA9IHRoaXMuYW5nbGUgKiBNYXRoLlBJIC8gMTgwOyBjb25zdCBzaW5UaGV0YTIgPSAoMS4wIC8gMS4zMykgKiBNYXRoLnNpbih0aGV0YTFSYWQpOyBjb25zdCB0aGV0YTJSYWQgPSBNYXRoLmFzaW4oc2luVGhldGEyKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kWCA9IGN4ICsgTWF0aC5zaW4odGhldGEyUmFkKSAqIGxlbjsgY29uc3QgZW5kWSA9IChoLzIpICsgTWF0aC5jb3ModGhldGEyUmFkKSAqIGxlbjsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKGN4LCBoLzIpOyBjdHgubGluZVRvKGVuZFgsIGVuZFkpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZic7IGN0eC5maWxsVGV4dChgQW5nbGU6ICR7dGhpcy5hbmdsZX3CsGAsIGN4IC0gNjAsIGgvMiAtIDIwKTsgY3R4LmZpbGxUZXh0KGBSZWZyYWN0ZWQ6ICR7KHRoZXRhMlJhZCAqIDE4MCAvIE1hdGguUEkpLnRvRml4ZWQoMSl9wrBgLCBjeCArIDEwLCBoLzIgKyA0MCk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm1vZGUgPT09ICdzcGVjdHJ1bScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gdGhpcy53YXZlbGVuZ3RoVG9Db2xvcih0aGlzLndhdmVsZW5ndGgpOyBjdHgubGluZVdpZHRoID0gNDsgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmcmVxID0gMTAwMCAvIHRoaXMud2F2ZWxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCB4PTA7IHg8dzsgeCsrKSB7IGNvbnN0IHkgPSBoLzIgKyBNYXRoLnNpbih4ICogZnJlcSAqIDAuMSAtIERhdGUubm93KCkvMTAwKSAqIDUwOyBpZih4PT09MCkgY3R4Lm1vdmVUbyh4LCB5KTsgZWxzZSBjdHgubGluZVRvKHgsIHkpOyB9CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JhZCA9IGN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCg1MCwgaC00MCwgdy01MCwgaC00MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdyYWQuYWRkQ29sb3JTdG9wKDAsICcjOGIwMGZmJyk7IGdyYWQuYWRkQ29sb3JTdG9wKDAuMiwgJyMwMDAwZmYnKTsgZ3JhZC5hZGRDb2xvclN0b3AoMC40LCAnIzAwZmYwMCcpOyBncmFkLmFkZENvbG9yU3RvcCgwLjYsICcjZmZmZjAwJyk7IGdyYWQuYWRkQ29sb3JTdG9wKDAuOCwgJyNmZjdmMDAnKTsgZ3JhZC5hZGRDb2xvclN0b3AoMSwgJyNmZjAwMDAnKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGdyYWQ7IGN0eC5maWxsUmVjdCg1MCwgaC01MCwgdy0xMDAsIDIwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9zID0gNTAgKyAoKHRoaXMud2F2ZWxlbmd0aCAtIDM4MCkgLyAoNzUwIC0gMzgwKSkgKiAody0xMDApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmZmYnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8ocG9zLCBoLTU1KTsgY3R4LmxpbmVUbyhwb3MtNSwgaC02NSk7IGN0eC5saW5lVG8ocG9zKzUsIGgtNjUpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5tb2RlID09PSAnY29sb3JzJykgewogICAgICAgICAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NjcmVlbic7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBgcmdiKCR7dGhpcy5yfSwgMCwgMClgOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoY3gsIGN5LTQwLCA2MCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGByZ2IoMCwgJHt0aGlzLmd9LCAwKWA7IGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhjeC01MCwgY3krNDAsIDYwLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gYHJnYigwLCAwLCAke3RoaXMuYn0pYDsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKGN4KzUwLCBjeSs0MCwgNjAsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmZmYnOyBjdHguZm9udCA9ICIxNHB4IEFyaWFsIjsgY3R4LmZpbGxUZXh0KCJSZWQiLCBjeC0xMCwgY3ktMTEwKTsgY3R4LmZpbGxUZXh0KCJHcmVlbiIsIGN4LTEwMCwgY3krMTEwKTsgY3R4LmZpbGxUZXh0KCJCbHVlIiwgY3grNzAsIGN5KzExMCk7IGN0eC5maWxsU3R5bGUgPSAnIzAwMCc7IGN0eC5maWxsVGV4dCgiTWl4IiwgY3gtMTUsIGN5KzE1KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5sb29wKCkpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHdhdmVsZW5ndGhUb0NvbG9yOiBmdW5jdGlvbihsKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHIsIGcsIGI7IGlmIChsID49IDM4MCAmJiBsIDwgNDQwKSB7IHIgPSAtKGwgLSA0NDApIC8gKDQ0MCAtIDM4MCk7IGcgPSAwOyBiID0gMTsgfSBlbHNlIGlmIChsID49IDQ0MCAmJiBsIDwgNDkwKSB7IHIgPSAwOyBnID0gKGwgLSA0NDApIC8gKDQ5MCAtIDQ0MCk7IGIgPSAxOyB9IGVsc2UgaWYgKGwgPj0gNDkwICYmIGwgPCA1MTApIHsgciA9IDA7IGcgPSAxOyBiID0gLShsIC0gNTEwKSAvICg1MTAgLSA0OTApOyB9IGVsc2UgaWYgKGwgPj0gNTEwICYmIGwgPCA1ODApIHsgciA9IChsIC0gNTEwKSAvICg1ODAgLSA1MTApOyBnID0gMTsgYiA9IDA7IH0gZWxzZSBpZiAobCA+PSA1ODAgJiYgbCA8IDY0NSkgeyByID0gMTsgZyA9IC0obCAtIDY0NSkgLyAoNjQ1IC0gNTgwKTsgYiA9IDA7IH0gZWxzZSBpZiAobCA+PSA2NDUgJiYgbCA8PSA3NTApIHsgciA9IDE7IGcgPSAwOyBiID0gMDsgfSBlbHNlIHsgciA9IDA7IGcgPSAwOyBiID0gMDsgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBgcmdiKCR7TWF0aC5yb3VuZChyICogMjU1KX0sICR7TWF0aC5yb3VuZChnICogMjU1KX0sICR7TWF0aC5yb3VuZChiICogMjU1KX0pYDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIE9QVElDUyBMQUIgU0lNVUxBVElPTiAoTGVzc29uIDQpCiAgICAgICAgICAgIG9wdGljc0xhYjogewogICAgICAgICAgICAgICAgbW9kZTogJ21pcnJvcnMnLCAvLyBtaXJyb3JzLCBkaWZmcmFjdGlvbiwgcHJvcGVydGllcwogICAgICAgICAgICAgICAgYW5pbUlkOiBudWxsLAogICAgICAgICAgICAgICAgLy8gTWlycm9yIHByb3BzCiAgICAgICAgICAgICAgICBtaXJyb3JUeXBlOiAnY29uY2F2ZScsIC8vIGNvbmNhdmUsIGNvbnZleAogICAgICAgICAgICAgICAgb2JqRGlzdDogMTAwLAogICAgICAgICAgICAgICAgZm9jYWxMZW46IDQwLAogICAgICAgICAgICAgICAgLy8gRGlmZnJhY3Rpb24gcHJvcHMKICAgICAgICAgICAgICAgIHNsaXRXaWR0aDogNTAsCiAgICAgICAgICAgICAgICB3YXZlbGVuZ3RoOiA1MDAsIC8vIG5tCiAgICAgICAgICAgICAgICAvLyBQcm9wZXJ0aWVzIHByb3BzCiAgICAgICAgICAgICAgICBhbXA6IDUwLAogICAgICAgICAgICAgICAgZnJlcTogNSwgLy8gcmVsYXRpdmUKCiAgICAgICAgICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKGNvbnRhaW5lcikgewogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGgtZnVsbCB3LWZ1bGwiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJmb250LWJvbGQgdGV4dC1sZyBtYi0yIHRleHQtZ3JheS03MDAiPkFkdmFuY2VkIE9wdGljcyBMYWJvcmF0b3J5PC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggZ2FwLTIgbWItNCBiZy1ncmF5LTEwMCBwLTEgcm91bmRlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJTaW11bGF0aW9ucy5vcHRpY3NMYWIuc2V0TW9kZSgnbWlycm9ycycpIiBpZD0ib2wtYnRuLW1pcnJvcnMiIGNsYXNzPSJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCBiZy13aGl0ZSBzaGFkb3cgdGV4dC1ibHVlLTYwMCI+Q3VydmVkIE1pcnJvcnM8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IlNpbXVsYXRpb25zLm9wdGljc0xhYi5zZXRNb2RlKCdkaWZmcmFjdGlvbicpIiBpZD0ib2wtYnRuLWRpZmZyYWN0aW9uIiBjbGFzcz0icHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBmb250LWJvbGQgdGV4dC1ncmF5LTUwMCBob3ZlcjpiZy1ncmF5LTIwMCI+RGlmZnJhY3Rpb248L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IlNpbXVsYXRpb25zLm9wdGljc0xhYi5zZXRNb2RlKCdwcm9wZXJ0aWVzJykiIGlkPSJvbC1idG4tcHJvcGVydGllcyIgY2xhc3M9InB4LTMgcHktMSByb3VuZGVkIHRleHQtc20gZm9udC1ib2xkIHRleHQtZ3JheS01MDAgaG92ZXI6YmctZ3JheS0yMDAiPldhdmUgUHJvcGVydGllczwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJyZWxhdGl2ZSB3LWZ1bGwgbWF4LXctbGcgaC02NCBiZy1ncmF5LTkwMCBib3JkZXItMiBib3JkZXItZ3JheS03MDAgcm91bmRlZC1sZyBzaGFkb3ctaW5uZXIgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgb3ZlcmZsb3ctaGlkZGVuIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Y2FudmFzIGlkPSJvbC1jYW52YXMiIHdpZHRoPSI1MDAiIGhlaWdodD0iMjUwIj48L2NhbnZhcz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0ib2wtY29udHJvbHMiIGNsYXNzPSJ3LWZ1bGwgbWF4LXctbWQgbXQtNCBiZy1ncmF5LTEwMCBwLTQgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWdyYXktMzAwIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9Im9sLWRlc2MiIGNsYXNzPSJtdC00IHRleHQtc20gdGV4dC1ncmF5LTYwMCBmb250LW1lZGl1bSB0ZXh0LWNlbnRlciBtYXgtdy1tZCBiZy1ibHVlLTUwIHAtMiByb3VuZGVkIGJvcmRlciBib3JkZXItYmx1ZS0xMDAiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TW9kZSgnbWlycm9ycycpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBzZXRNb2RlOiBmdW5jdGlvbihtKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlID0gbTsKICAgICAgICAgICAgICAgICAgICBbJ21pcnJvcnMnLCAnZGlmZnJhY3Rpb24nLCAncHJvcGVydGllcyddLmZvckVhY2goayA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBvbC1idG4tJHtrfWApOwogICAgICAgICAgICAgICAgICAgICAgICBpZihrID09PSBtKSBidG4uY2xhc3NOYW1lID0gInB4LTMgcHktMSByb3VuZGVkIHRleHQtc20gZm9udC1ib2xkIGJnLXdoaXRlIHNoYWRvdyB0ZXh0LWJsdWUtNjAwIjsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBidG4uY2xhc3NOYW1lID0gInB4LTMgcHktMSByb3VuZGVkIHRleHQtc20gZm9udC1ib2xkIHRleHQtZ3JheS01MDAgaG92ZXI6YmctZ3JheS0yMDAiOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250cm9scyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvbC1jb250cm9scycpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlc2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb2wtZGVzYycpOwoKICAgICAgICAgICAgICAgICAgICBpZiAobSA9PT0gJ21pcnJvcnMnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xzLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJmbGV4IGZsZXgtY29sIGdhcC0zIj48ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktY2VudGVyIGdhcC00Ij48bGFiZWw+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJtdHlwZSIgdmFsdWU9ImNvbmNhdmUiIGNoZWNrZWQgb25jaGFuZ2U9IlNpbXVsYXRpb25zLm9wdGljc0xhYi5taXJyb3JUeXBlPSdjb25jYXZlJztTaW11bGF0aW9ucy5vcHRpY3NMYWIudXBkYXRlKCkiPiBDb25jYXZlPC9sYWJlbD48bGFiZWw+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJtdHlwZSIgdmFsdWU9ImNvbnZleCIgb25jaGFuZ2U9IlNpbXVsYXRpb25zLm9wdGljc0xhYi5taXJyb3JUeXBlPSdjb252ZXgnO1NpbXVsYXRpb25zLm9wdGljc0xhYi51cGRhdGUoKSI+IENvbnZleDwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPjxzcGFuIGNsYXNzPSJ0ZXh0LXhzIGZvbnQtYm9sZCB3LTIwIj5PYmplY3QgRGlzdDo8L3NwYW4+PGlucHV0IHR5cGU9InJhbmdlIiBtaW49IjIwIiBtYXg9IjIwMCIgdmFsdWU9IiR7dGhpcy5vYmpEaXN0fSIgY2xhc3M9ImZsZXgtMSIgb25pbnB1dD0iU2ltdWxhdGlvbnMub3B0aWNzTGFiLm9iakRpc3Q9cGFyc2VJbnQodGhpcy52YWx1ZSk7U2ltdWxhdGlvbnMub3B0aWNzTGFiLnVwZGF0ZSgpIj48L2Rpdj48L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgICAgICBkZXNjLnRleHRDb250ZW50ID0gIlJheSBUcmFjaW5nOiBTZWUgaG93IGxpZ2h0IHJheXMgcmVmbGVjdCBvZmYgY3VydmVkIG1pcnJvcnMgdG8gZm9ybSBpbWFnZXMuIENvbmNhdmUgZm9jdXNlczsgQ29udmV4IGRpdmVyZ2VzLiI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtID09PSAnZGlmZnJhY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xzLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+PHNwYW4gY2xhc3M9InRleHQteHMgZm9udC1ib2xkIHctMjAiPlNsaXQgV2lkdGg6PC9zcGFuPjxpbnB1dCB0eXBlPSJyYW5nZSIgbWluPSIxMCIgbWF4PSIxNTAiIHZhbHVlPSIke3RoaXMuc2xpdFdpZHRofSIgY2xhc3M9ImZsZXgtMSIgb25pbnB1dD0iU2ltdWxhdGlvbnMub3B0aWNzTGFiLnNsaXRXaWR0aD1wYXJzZUludCh0aGlzLnZhbHVlKTtTaW11bGF0aW9ucy5vcHRpY3NMYWIudXBkYXRlKCkiPjwvZGl2PmA7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2MudGV4dENvbnRlbnQgPSAiRGlmZnJhY3Rpb246IExpZ2h0IGJlbmRzIHRocm91Z2ggYSBzbGl0LiBOYXJyb3dlciBzbGl0ID0gV2lkZXIgc3ByZWFkIHBhdHRlcm4uIjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG0gPT09ICdwcm9wZXJ0aWVzJykgewogICAgICAgICAgICAgICAgICAgICAgICBjb250cm9scy5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz0iZmxleCBmbGV4LWNvbCBnYXAtMiI+PGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPjxzcGFuIGNsYXNzPSJ0ZXh0LXhzIGZvbnQtYm9sZCB3LTIwIj5BbXBsaXR1ZGU6PC9zcGFuPjxpbnB1dCB0eXBlPSJyYW5nZSIgbWluPSIxMCIgbWF4PSIxMDAiIHZhbHVlPSIke3RoaXMuYW1wfSIgY2xhc3M9ImZsZXgtMSIgb25pbnB1dD0iU2ltdWxhdGlvbnMub3B0aWNzTGFiLmFtcD1wYXJzZUludCh0aGlzLnZhbHVlKTtTaW11bGF0aW9ucy5vcHRpY3NMYWIudXBkYXRlKCkiPjwvZGl2PjxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj48c3BhbiBjbGFzcz0idGV4dC14cyBmb250LWJvbGQgdy0yMCI+RnJlcXVlbmN5Ojwvc3Bhbj48aW5wdXQgdHlwZT0icmFuZ2UiIG1pbj0iMSIgbWF4PSIxMCIgdmFsdWU9IiR7dGhpcy5mcmVxfSIgY2xhc3M9ImZsZXgtMSIgb25pbnB1dD0iU2ltdWxhdGlvbnMub3B0aWNzTGFiLmZyZXE9cGFyc2VJbnQodGhpcy52YWx1ZSk7U2ltdWxhdGlvbnMub3B0aWNzTGFiLnVwZGF0ZSgpIj48L2Rpdj48L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgICAgICBkZXNjLnRleHRDb250ZW50ID0gIlByb3BlcnRpZXM6IEFtcGxpdHVkZSBjb250cm9scyBCcmlnaHRuZXNzLiBGcmVxdWVuY3kgY29udHJvbHMgQ29sb3IuIjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydCgpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uKCkgeyAvKiBUcmlnZ2VyIGxvb3AgcmVkcmF3ICovIH0sCgogICAgICAgICAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuYW5pbUlkKSBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1JZCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb29wKCk7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIGxvb3A6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvbC1jYW52YXMnKTsKICAgICAgICAgICAgICAgICAgICBpZighY2FudmFzKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdyA9IGNhbnZhcy53aWR0aDsgY29uc3QgaCA9IGNhbnZhcy5oZWlnaHQ7IGNvbnN0IGN4ID0gdy8yOyBjb25zdCBjeSA9IGgvMjsKCiAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsdyxoKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gJ21pcnJvcnMnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMyknOyBjdHguc2V0TGluZURhc2goWzUsNV0pOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMCwgY3kpOyBjdHgubGluZVRvKHcsIGN5KTsgY3R4LnN0cm9rZSgpOyBjdHguc2V0TGluZURhc2goW10pOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBNaXJyb3IgKEFyYykKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyM5NGEzYjgnOyBjdHgubGluZVdpZHRoID0gNDsgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtaCA9IDcwOyAvLyBIYWxmIGhlaWdodAogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBSID0gdGhpcy5mb2NhbExlbiAqIDI7IC8vIFJhZGl1cyBvZiBjdXJ2YXR1cmUKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1pcnJvclR5cGUgPT09ICdjb25jYXZlJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29uY2F2ZSApIC0gQ2VudGVyIG9mIGN1cnZhdHVyZSBvbiBMZWZ0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbmdsZSA9IE1hdGguYXNpbihtaCAvIFIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmFyYyhjeCAtIFIsIGN5LCBSLCAtYW5nbGUsIGFuZ2xlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbnZleCAoIC0gQ2VudGVyIG9mIGN1cnZhdHVyZSBvbiBSaWdodAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYW5nbGUgPSBNYXRoLmFzaW4obWggLyBSKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5hcmMoY3ggKyBSLCBjeSwgUiwgTWF0aC5QSSAtIGFuZ2xlLCBNYXRoLlBJICsgYW5nbGUpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9iamVjdAogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvYmpYID0gY3ggLSB0aGlzLm9iakRpc3Q7IGNvbnN0IG9iakggPSA0MDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyNlZjQ0NDQnOyBjdHgubGluZVdpZHRoID0gMzsgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKG9ialgsIGN5KTsgY3R4LmxpbmVUbyhvYmpYLCBjeSAtIG9iakgpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2VmNDQ0NCc7IGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyhvYmpYLCBjeSAtIG9iakgpOyBjdHgubGluZVRvKG9ialggLSA1LCBjeSAtIG9iakggKyA1KTsgY3R4LmxpbmVUbyhvYmpYICsgNSwgY3kgLSBvYmpIICsgNSk7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBJbWFnZSBDYWxjdWxhdGlvbgogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZiA9IHRoaXMuZm9jYWxMZW47IAogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5taXJyb3JUeXBlID09PSAnY29udmV4JykgZiA9IC1mOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXZvaWQgc2luZ3VsYXJpdHkKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRpc3QgPSB0aGlzLm9iakRpc3Q7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhkaXN0IC0gTWF0aC5hYnMoZikpIDwgMiAmJiB0aGlzLm1pcnJvclR5cGUgPT09ICdjb25jYXZlJykgZGlzdCA9IE1hdGguYWJzKGYpICsgMjsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpID0gKGYgKiBkaXN0KSAvIChkaXN0IC0gZik7IAogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtID0gLWRpIC8gZGlzdDsgCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGltZ0ggPSBtICogb2JqSDsgCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGltZ1ggPSBjeCAtIGRpOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBJbWFnZSAoQXJyb3cpCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICdyZ2JhKDEwMCwgMjU1LCAxMDAsIDAuOCknOyBjdHgubGluZVdpZHRoID0gMzsgCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyhpbWdYLCBjeSk7IGN0eC5saW5lVG8oaW1nWCwgY3kgLSBpbWdIKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW1hZ2UgQXJyb3doZWFkCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgxMDAsIDI1NSwgMTAwLCAwLjgpJzsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2lnbiA9IE1hdGguc2lnbihpbWdIKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyAKICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyhpbWdYLCBjeSAtIGltZ0gpOyAKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhpbWdYIC0gNSwgY3kgLSBpbWdIICsgNSAqIHNpZ24pOyAKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhpbWdYICsgNSwgY3kgLSBpbWdIICsgNSAqIHNpZ24pOyAKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGwoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJheXMgKFNpbXBsaWZpZWQpCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICdyZ2JhKDI1NSwgMjU1LCAwLCAwLjUpJzsgY3R4LmxpbmVXaWR0aCA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyhvYmpYLCBjeSAtIG9iakgpOyBjdHgubGluZVRvKGN4LCBjeSAtIG9iakgpOyBjdHgubGluZVRvKGltZ1gsIGN5IC0gaW1nSCk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKG9ialgsIGN5IC0gb2JqSCk7IGN0eC5saW5lVG8oY3gsIGN5KTsgY3R4LmxpbmVUbyhpbWdYLCBjeSAtIGltZ0gpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBMYWJlbHMKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsgY3R4LmZvbnQgPSAiMTJweCBBcmlhbCI7IAogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIk9iamVjdCIsIG9ialggLSAxNSwgY3kgKyAyMCk7IAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1nWCA+IDEwICYmIGltZ1ggPCB3IC0gMTApIGN0eC5maWxsVGV4dCgiSW1hZ2UiLCBpbWdYIC0gMTUsIGN5ICsgMjApOyAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvY2FsIFBvaW50CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZYID0gdGhpcy5taXJyb3JUeXBlID09PSAnY29uY2F2ZScgPyBjeCAtIHRoaXMuZm9jYWxMZW4gOiBjeCArIHRoaXMuZm9jYWxMZW47CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZjYTVhNSc7IGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhmWCwgY3ksIDMsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZic7IGN0eC5maWxsVGV4dCgiRiIsIGZYIC0gNSwgY3kgKyAxNSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm1vZGUgPT09ICdkaWZmcmFjdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMzc0MTUxJzsgY3R4LmZpbGxSZWN0KGN4IC0gNSwgMCwgMTAsIGN5IC0gdGhpcy5zbGl0V2lkdGgvMik7IGN0eC5maWxsUmVjdChjeCAtIDUsIGN5ICsgdGhpcy5zbGl0V2lkdGgvMiwgMTAsIGggLSAoY3kgKyB0aGlzLnNsaXRXaWR0aC8yKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjNjBhNWZhJzsgY3R4LmxpbmVXaWR0aCA9IDI7IGNvbnN0IHRpbWUgPSBEYXRlLm5vdygpIC8gMjAwOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTxjeDsgaSs9MjApIHsgY29uc3QgeCA9IChpICsgdGltZSAqIDEwKSAlIGN4OyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oeCwgNTApOyBjdHgubGluZVRvKHgsIGgtNTApOyBjdHguc3Ryb2tlKCk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ByZWFkID0gKHRoaXMud2F2ZWxlbmd0aCAvIDEwKSAvIHRoaXMuc2xpdFdpZHRoOyAKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCByPTA7IHI8dy1jeDsgcis9MjApIHsgY29uc3QgcmFkaXVzID0gKHIgKyB0aW1lICogMTApICUgKHctY3gpOyBjb25zdCBhbHBoYSA9IDEgLSAocmFkaXVzIC8gKHctY3gpKTsgY3R4LnN0cm9rZVN0eWxlID0gYHJnYmEoOTYsIDE2NSwgMjUwLCAke2FscGhhfSlgOyBjdHguYmVnaW5QYXRoKCk7IGNvbnN0IGFuZ2xlID0gTWF0aC5QSS8yICsgc3ByZWFkICogMjsgY3R4LmFyYyhjeCwgY3ksIHJhZGl1cywgLWFuZ2xlLzIsIGFuZ2xlLzIpOyBjdHguc3Ryb2tlKCk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyNlZjQ0NDQnOyBjdHgubGluZVdpZHRoID0gMjsgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHk9MDsgeTxoOyB5KyspIHsgY29uc3QgZGlzdFkgPSBNYXRoLmFicyh5IC0gY3kpOyBjb25zdCBiZXRhID0gKGRpc3RZICogdGhpcy5zbGl0V2lkdGgpIC8gMjAwMDsgbGV0IGludGVuc2l0eSA9IDE7IGlmIChiZXRhICE9PSAwKSBpbnRlbnNpdHkgPSBNYXRoLnBvdyhNYXRoLnNpbihiZXRhKS9iZXRhLCAyKTsgY29uc3QgcGxvdFggPSB3IC0gMTAgLSBpbnRlbnNpdHkgKiA1MDsgaWYgKHk9PT0wKSBjdHgubW92ZVRvKHBsb3RYLCB5KTsgZWxzZSBjdHgubGluZVRvKHBsb3RYLCB5KTsgfQogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm1vZGUgPT09ICdwcm9wZXJ0aWVzJykgewogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmZyZXFUb0NvbG9yKHRoaXMuZnJlcSk7IGN0eC5saW5lV2lkdGggPSAzOyBjdHguYmVnaW5QYXRoKCk7IGNvbnN0IHRpbWUgPSBEYXRlLm5vdygpIC8gNTAwOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHg9MDsgeDx3OyB4KyspIHsgY29uc3QgeSA9IGN5ICsgTWF0aC5zaW4oeCAqIHRoaXMuZnJlcSAqIDAuMDIgLSB0aW1lICogNSkgKiB0aGlzLmFtcDsgaWYoeD09PTApIGN0eC5tb3ZlVG8oeCwgeSk7IGVsc2UgY3R4LmxpbmVUbyh4LCB5KTsgfQogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZic7IGN0eC5mb250ID0gIjE0cHggQXJpYWwiOyBjdHguZmlsbFRleHQoYEFtcGxpdHVkZSAoQnJpZ2h0bmVzcyk6ICR7dGhpcy5hbXB9YCwgMjAsIDMwKTsgY3R4LmZpbGxUZXh0KGBGcmVxdWVuY3kgKENvbG9yKTogJHt0aGlzLmZyZXF9YCwgMjAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHRoaXMuZnJlcVRvQ29sb3IodGhpcy5mcmVxKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8NTsgaSsrKSB7IGNvbnN0IHB4ID0gKHRpbWUgKiAxMDAgKyBpICogMTAwKSAlIHc7IGNvbnN0IHB5ID0gY3kgKyA4MDsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHB4LCBweSwgMyArIHRoaXMuYW1wLzIwLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOyB9CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2FhYSc7IGN0eC5maWxsVGV4dCgiUGhvdG9ucyIsIDIwLCBjeSArIDg1KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5sb29wKCkpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBmcmVxVG9Db2xvcjogZnVuY3Rpb24oZikgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGh1ZSA9IDI4MCAtIChmICogMjgpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBgaHNsKCR7aHVlfSwgMTAwJSwgNTAlKWA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyBGSU5BTkNJQUwgQ0FMQ1VMQVRPUiBTSU1VTEFUSU9OCiAgICAgICAgICAgIGZpbmFuY2lhbENhbGN1bGF0b3I6IHsKICAgICAgICAgICAgICAgIHA6IDEwMDAsIHI6IDUsIHQ6IDEwLAogICAgICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbihjb250YWluZXIpIHsKICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBoLWZ1bGwgdy1mdWxsIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0iZm9udC1ib2xkIHRleHQtbGcgbWItMiB0ZXh0LWdyYXktNzAwIj5GaW5hbmNpYWwgR3Jvd3RoIEV4cGxvcmVyPC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBnYXAtNCB3LWZ1bGwgbWF4LXctM3hsIG1iLTQgYmctZ3JheS01MCBwLTMgcm91bmRlZCBib3JkZXIgdGV4dC1zbSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleC0xIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayBmb250LWJvbGQgdGV4dC1ibHVlLTYwMCI+UHJpbmNpcGFsICgkKTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYW5nZSIgaWQ9ImZjLXAiIG1pbj0iMTAwIiBtYXg9IjEwMDAwIiBzdGVwPSIxMDAiIHZhbHVlPSIxMDAwIiBjbGFzcz0idy1mdWxsIGFjY2VudC1ibHVlLTYwMCIgb25pbnB1dD0iU2ltdWxhdGlvbnMuZmluYW5jaWFsQ2FsY3VsYXRvci51cGRhdGUoKSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRleHQtcmlnaHQgZm9udC1tb25vIiBpZD0iZmMtcC12YWwiPiQxLDAwMDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgtMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYmxvY2sgZm9udC1ib2xkIHRleHQtZ3JlZW4tNjAwIj5JbnRlcmVzdCBSYXRlICglKTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYW5nZSIgaWQ9ImZjLXIiIG1pbj0iMSIgbWF4PSIyMCIgc3RlcD0iMC41IiB2YWx1ZT0iNSIgY2xhc3M9InctZnVsbCBhY2NlbnQtZ3JlZW4tNjAwIiBvbmlucHV0PSJTaW11bGF0aW9ucy5maW5hbmNpYWxDYWxjdWxhdG9yLnVwZGF0ZSgpIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGV4dC1yaWdodCBmb250LW1vbm8iIGlkPSJmYy1yLXZhbCI+NS4wJTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgtMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYmxvY2sgZm9udC1ib2xkIHRleHQtcHVycGxlLTYwMCI+VGltZSAoWWVhcnMpPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InJhbmdlIiBpZD0iZmMtdCIgbWluPSIxIiBtYXg9IjUwIiBzdGVwPSIxIiB2YWx1ZT0iMTAiIGNsYXNzPSJ3LWZ1bGwgYWNjZW50LXB1cnBsZS02MDAiIG9uaW5wdXQ9IlNpbXVsYXRpb25zLmZpbmFuY2lhbENhbGN1bGF0b3IudXBkYXRlKCkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LXJpZ2h0IGZvbnQtbW9ubyIgaWQ9ImZjLXQtdmFsIj4xMCBZZWFyczwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icmVsYXRpdmUgdy1mdWxsIG1heC13LTN4bCBoLTY0IGJnLXdoaXRlIGJvcmRlci0yIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1pbm5lciBtYi00IGZsZXgiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjYW52YXMgaWQ9ImZjLWNhbnZhcyIgY2xhc3M9InctZnVsbCBoLWZ1bGwiPjwvY2FudmFzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTQgdy1mdWxsIG1heC13LTJ4bCB0ZXh0LWNlbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctYmx1ZS01MCBwLTIgcm91bmRlZCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGV4dC14cyBmb250LWJvbGQgdGV4dC1ncmF5LTUwMCI+U2ltcGxlIEludGVyZXN0IFRvdGFsPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImZjLXNpbXBsZS10b3RhbCIgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIHRleHQtYmx1ZS03MDAiPiQxLDUwMDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJnLWdyZWVuLTUwIHAtMiByb3VuZGVkIGJvcmRlciBib3JkZXItZ3JlZW4tMjAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGV4dC14cyBmb250LWJvbGQgdGV4dC1ncmF5LTUwMCI+Q29tcG91bmQgSW50ZXJlc3QgVG90YWw8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0iZmMtY29tcG91bmQtdG90YWwiIGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWdyZWVuLTcwMCI+JDEsNjI4PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im10LTIgdGV4dC14cyB0ZXh0LWdyYXktNTAwIj5Db21wb3VuZCBJbnRlcmVzdCBhc3N1bWVzIGFubnVhbCBjb21wb3VuZGluZy48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSgpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wID0gcGFyc2VGbG9hdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmMtcCcpLnZhbHVlKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnIgPSBwYXJzZUZsb2F0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmYy1yJykudmFsdWUpOwogICAgICAgICAgICAgICAgICAgIHRoaXMudCA9IHBhcnNlRmxvYXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZjLXQnKS52YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZjLXAtdmFsJykudGV4dENvbnRlbnQgPSAiJCIgKyB0aGlzLnAudG9Mb2NhbGVTdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmMtci12YWwnKS50ZXh0Q29udGVudCA9IHRoaXMuciArICIlIjsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmMtdC12YWwnKS50ZXh0Q29udGVudCA9IHRoaXMudCArICIgWWVhcnMiOwoKICAgICAgICAgICAgICAgICAgICBjb25zdCBzaW1wbGVUb3RhbCA9IHRoaXMucCAqICgxICsgKHRoaXMuci8xMDApICogdGhpcy50KTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wb3VuZFRvdGFsID0gdGhpcy5wICogTWF0aC5wb3coKDEgKyB0aGlzLnIvMTAwKSwgdGhpcy50KTsKCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZjLXNpbXBsZS10b3RhbCcpLnRleHRDb250ZW50ID0gIiQiICsgTWF0aC5yb3VuZChzaW1wbGVUb3RhbCkudG9Mb2NhbGVTdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmMtY29tcG91bmQtdG90YWwnKS50ZXh0Q29udGVudCA9ICIkIiArIE1hdGgucm91bmQoY29tcG91bmRUb3RhbCkudG9Mb2NhbGVTdHJpbmcoKTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3R3JhcGgoKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBkcmF3R3JhcGg6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmYy1jYW52YXMnKTsKICAgICAgICAgICAgICAgICAgICBpZighY2FudmFzKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgaWYoY2FudmFzLndpZHRoICE9PSBjYW52YXMuY2xpZW50V2lkdGgpIHsgY2FudmFzLndpZHRoID0gY2FudmFzLmNsaWVudFdpZHRoOyBjYW52YXMuaGVpZ2h0ID0gY2FudmFzLmNsaWVudEhlaWdodDsgfQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHcgPSBjYW52YXMud2lkdGg7IGNvbnN0IGggPSBjYW52YXMuaGVpZ2h0OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZCA9IDgwOwoKICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCx3LGgpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRNYXggPSB0aGlzLnAgKiBNYXRoLnBvdygoMSArIHRoaXMuci8xMDApLCB0aGlzLnQpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHlTY2FsZSA9IChoIC0gMipwYWQpIC8gY3VycmVudE1heDsKICAgICAgICAgICAgICAgICAgICBjb25zdCB4U2NhbGUgPSAodyAtIDIqcGFkKSAvIHRoaXMudDsKCiAgICAgICAgICAgICAgICAgICAgLy8gTGVnZW5kIChDZW50ZXJlZCBhdCB0b3ApCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVnZW5kWSA9IDIwOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbnRlclggPSB3IC8gMjsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjdHguZm9udCA9ICJib2xkIDEycHggc2Fucy1zZXJpZiI7CiAgICAgICAgICAgICAgICAgICAgY3R4LnRleHRCYXNlbGluZSA9ICJtaWRkbGUiOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIFNpbXBsZSBJbnRlcmVzdCBMZWdlbmQKICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyMyNTYzZWInOwogICAgICAgICAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSAzOwogICAgICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8oY2VudGVyWCAtIDgwLCBsZWdlbmRZKTsKICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKGNlbnRlclggLSA2MCwgbGVnZW5kWSk7CiAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAibGVmdCI7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMjU2M2ViJzsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIlNpbXBsZSIsIGNlbnRlclggLSA1NSwgbGVnZW5kWSk7CgogICAgICAgICAgICAgICAgICAgIC8vIENvbXBvdW5kIEludGVyZXN0IExlZ2VuZAogICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzE2YTM0YSc7CiAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDM7CiAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyhjZW50ZXJYICsgMjAsIGxlZ2VuZFkpOwogICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oY2VudGVyWCArIDQwLCBsZWdlbmRZKTsKICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMTZhMzRhJzsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIkNvbXBvdW5kIiwgY2VudGVyWCArIDQ1LCBsZWdlbmRZKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gQXhlcwogICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjOWNhM2FmJzsgY3R4LmxpbmVXaWR0aCA9IDE7CiAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8ocGFkLCBwYWQpOyBjdHgubGluZVRvKHBhZCwgaCAtIHBhZCk7IGN0eC5saW5lVG8odyAtIHBhZCwgaCAtIHBhZCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpOwoKICAgICAgICAgICAgICAgICAgICAvLyBTaW1wbGUgSW50ZXJlc3QgTGluZSAoQmx1ZSkKICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzI1NjNlYic7IGN0eC5saW5lV2lkdGggPSAzOyBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8PXRoaXMudDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHRoaXMucCAqICgxICsgKHRoaXMuci8xMDApICogaSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHggPSBwYWQgKyBpICogeFNjYWxlOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB5UGxvdCA9IGggLSBwYWQgLSAodmFsIC8gY3VycmVudE1heCkgKiAoaCAtIDIqcGFkKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaT09PTApIGN0eC5tb3ZlVG8oeCwgeVBsb3QpOyBlbHNlIGN0eC5saW5lVG8oeCwgeVBsb3QpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7CgogICAgICAgICAgICAgICAgICAgIC8vIENvbXBvdW5kIEludGVyZXN0IExpbmUgKEdyZWVuKQogICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjMTZhMzRhJzsgY3R4LmxpbmVXaWR0aCA9IDM7IGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTw9dGhpcy50OyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gdGhpcy5wICogTWF0aC5wb3coKDEgKyB0aGlzLnIvMTAwKSwgaSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHggPSBwYWQgKyBpICogeFNjYWxlOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB5UGxvdCA9IGggLSBwYWQgLSAodmFsIC8gY3VycmVudE1heCkgKiAoaCAtIDIqcGFkKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaT09PTApIGN0eC5tb3ZlVG8oeCwgeVBsb3QpOyBlbHNlIGN0eC5saW5lVG8oeCwgeVBsb3QpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7CgogICAgICAgICAgICAgICAgICAgIC8vIExhYmVscwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzZiNzI4MCc7IGN0eC5mb250ID0gIjEwcHggc2Fucy1zZXJpZiI7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gWC1BeGlzCiAgICAgICAgICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9ICJjZW50ZXIiOwogICAgICAgICAgICAgICAgICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAidG9wIjsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIjAiLCBwYWQsIGggLSBwYWQgKyA4KTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQodGhpcy50ICsgIiB5cnMiLCB3IC0gcGFkLCBoIC0gcGFkICsgOCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gWS1BeGlzIExhYmVsIChNYXggVmFsdWUpCiAgICAgICAgICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9ICJyaWdodCI7CiAgICAgICAgICAgICAgICAgICAgY3R4LnRleHRCYXNlbGluZSA9ICJtaWRkbGUiOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgiJCIgKyBNYXRoLnJvdW5kKGN1cnJlbnRNYXgpLnRvTG9jYWxlU3RyaW5nKCksIHBhZCAtIDgsIHBhZCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyBNQVRURVIgTEFCIFNJTVVMQVRJT04KICAgICAgICAgICAgbWF0dGVyTGFiOiB7CiAgICAgICAgICAgICAgICBtb2RlOiAnc3RhdGVzJywgLy8gc3RhdGVzLCBhdG9tCiAgICAgICAgICAgICAgICBhbmltSWQ6IG51bGwsCiAgICAgICAgICAgICAgICB0ZW1wOiAyMCwgLy8gMC0xMDAKICAgICAgICAgICAgICAgIHBhcnRpY2xlczogW10sCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHJlbmRlcjogZnVuY3Rpb24oY29udGFpbmVyKSB7CiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgaC1mdWxsIHctZnVsbCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LWxnIG1iLTIgdGV4dC1ncmF5LTcwMCI+TWF0dGVyICYgRW5lcmd5IExhYjwvaDM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggZ2FwLTIgbWItNCBiZy1ncmF5LTEwMCBwLTEgcm91bmRlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJTaW11bGF0aW9ucy5tYXR0ZXJMYWIuc2V0TW9kZSgnc3RhdGVzJykiIGlkPSJtbC1idG4tc3RhdGVzIiBjbGFzcz0icHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBmb250LWJvbGQgYmctd2hpdGUgc2hhZG93IHRleHQtYmx1ZS02MDAiPlN0YXRlcyBvZiBNYXR0ZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IlNpbXVsYXRpb25zLm1hdHRlckxhYi5zZXRNb2RlKCdhdG9tJykiIGlkPSJtbC1idG4tYXRvbSIgY2xhc3M9InB4LTMgcHktMSByb3VuZGVkIHRleHQtc20gZm9udC1ib2xkIHRleHQtZ3JheS01MDAgaG92ZXI6YmctZ3JheS0yMDAiPkF0b21pYyBTdHJ1Y3R1cmU8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJlbGF0aXZlIHctZnVsbCBtYXgtdy1sZyBoLTY0IGJnLWdyYXktOTAwIGJvcmRlci0yIGJvcmRlci1ncmF5LTcwMCByb3VuZGVkLWxnIHNoYWRvdy1pbm5lciBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBvdmVyZmxvdy1oaWRkZW4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjYW52YXMgaWQ9Im1sLWNhbnZhcyIgd2lkdGg9IjUwMCIgaGVpZ2h0PSIyNTAiPjwvY2FudmFzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9Im1sLW92ZXJsYXkiIGNsYXNzPSJhYnNvbHV0ZSB0b3AtMiBsZWZ0LTIgdGV4dC14cyB0ZXh0LWdyYXktNDAwIHBvaW50ZXItZXZlbnRzLW5vbmUiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9Im1sLWNvbnRyb2xzIiBjbGFzcz0idy1mdWxsIG1heC13LW1kIG10LTQgYmctZ3JheS0xMDAgcC00IHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJtbC1kZXNjIiBjbGFzcz0ibXQtNCB0ZXh0LXNtIHRleHQtZ3JheS02MDAgZm9udC1tZWRpdW0gdGV4dC1jZW50ZXIgbWF4LXctbWQgYmctYmx1ZS01MCBwLTIgcm91bmRlZCBib3JkZXIgYm9yZGVyLWJsdWUtMTAwIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNldE1vZGUoJ3N0YXRlcycpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBzZXRNb2RlOiBmdW5jdGlvbihtKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlID0gbTsKICAgICAgICAgICAgICAgICAgICBbJ3N0YXRlcycsICdhdG9tJ10uZm9yRWFjaChrID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYG1sLWJ0bi0ke2t9YCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGsgPT09IG0pIGJ0bi5jbGFzc05hbWUgPSAicHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBmb250LWJvbGQgYmctd2hpdGUgc2hhZG93IHRleHQtYmx1ZS02MDAiOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGJ0bi5jbGFzc05hbWUgPSAicHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBmb250LWJvbGQgdGV4dC1ncmF5LTUwMCBob3ZlcjpiZy1ncmF5LTIwMCI7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21sLWNvbnRyb2xzJyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVzYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtbC1kZXNjJyk7CgogICAgICAgICAgICAgICAgICAgIGlmIChtID09PSAnc3RhdGVzJykgewogICAgICAgICAgICAgICAgICAgICAgICBjb250cm9scy5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGZsZXgtY29sIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktYmV0d2VlbiB0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LWdyYXktNjAwIj48c3Bhbj5Tb2xpZDwvc3Bhbj48c3Bhbj5MaXF1aWQ8L3NwYW4+PHNwYW4+R2FzPC9zcGFuPjxzcGFuPlBsYXNtYTwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIGlkPSJtbC10ZW1wIiBtaW49IjAiIG1heD0iMTAwIiB2YWx1ZT0iJHt0aGlzLnRlbXB9IiBjbGFzcz0idy1mdWxsIGFjY2VudC1yZWQtNTAwIiBvbmlucHV0PSJTaW11bGF0aW9ucy5tYXR0ZXJMYWIudXBkYXRlKCkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRleHQtY2VudGVyIHRleHQtc20gZm9udC1ib2xkIHRleHQtcmVkLTYwMCIgaWQ9Im1sLXRlbXAtdmFsIj5UZW1wZXJhdHVyZTogTG93PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgICAgICAgICAgZGVzYy50ZXh0Q29udGVudCA9ICJIZWF0IEVuZXJneSBkZXRlcm1pbmVzIHRoZSBzdGF0ZSBvZiBtYXR0ZXIuIEFkZCBoZWF0IHRvIG1vdmUgZnJvbSBTb2xpZCDihpIgTGlxdWlkIOKGkiBHYXMg4oaSIFBsYXNtYS4iOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRQYXJ0aWNsZXMoKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG0gPT09ICdhdG9tJykgewogICAgICAgICAgICAgICAgICAgICAgICBjb250cm9scy5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktY2VudGVyIGdhcC00IHRleHQtc20iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0xIj48ZGl2IGNsYXNzPSJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBiZy1yZWQtNTAwIj48L2Rpdj4gUHJvdG9uICgrKTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0xIj48ZGl2IGNsYXNzPSJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBiZy1ncmF5LTQwMCI+PC9kaXY+IE5ldXRyb24gKDApPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEiPjxkaXYgY2xhc3M9InctMyBoLTMgcm91bmRlZC1mdWxsIGJnLWJsdWUtNDAwIj48L2Rpdj4gRWxlY3Ryb24gKC0pPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgICAgICAgICAgZGVzYy50ZXh0Q29udGVudCA9ICJUaGUgQXRvbTogUHJvdG9ucyBhbmQgTmV1dHJvbnMgZm9ybSB0aGUgZGVuc2UgTnVjbGV1cy4gRWxlY3Ryb25zIG9yYml0IGluIHNoZWxscyBhcm91bmQgaXQuIjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5hbmltSWQpIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbUlkKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgaW5pdFBhcnRpY2xlczogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJ0aWNsZXMgPSBbXTsKICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTwxMDA7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnRpY2xlcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IE1hdGgucmFuZG9tKCkgKiA1MDAsIHk6IE1hdGgucmFuZG9tKCkgKiAyNTAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2eDogMCwgdnk6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlWDogKGkgJSAxMCkgKiAzMCArIDExMCwgYmFzZVk6IE1hdGguZmxvb3IoaSAvIDEwKSAqIDIwICsgNTAKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gJ3N0YXRlcycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21sLXRlbXAnKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2xpZGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXAgPSBwYXJzZUludChzbGlkZXIudmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWwtdGVtcC12YWwnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMudGVtcCA8IDI1KSBsYWJlbC50ZXh0Q29udGVudCA9ICJTdGF0ZTogU29saWQiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZih0aGlzLnRlbXAgPCA1MCkgbGFiZWwudGV4dENvbnRlbnQgPSAiU3RhdGU6IExpcXVpZCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHRoaXMudGVtcCA8IDc1KSBsYWJlbC50ZXh0Q29udGVudCA9ICJTdGF0ZTogR2FzIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgbGFiZWwudGV4dENvbnRlbnQgPSAiU3RhdGU6IFBsYXNtYSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIGxvb3A6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtbC1jYW52YXMnKTsKICAgICAgICAgICAgICAgICAgICBpZighY2FudmFzKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdyA9IGNhbnZhcy53aWR0aDsgY29uc3QgaCA9IGNhbnZhcy5oZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsdyxoKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gJ3N0YXRlcycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlZWQgPSB0aGlzLnRlbXAgLyAxMDsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgaml0dGVyID0gdGhpcy50ZW1wIDwgMjUgPyAxIDogKHRoaXMudGVtcCA8IDUwID8gMyA6IDEwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJ0aWNsZXMuZm9yRWFjaChwID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRlbXAgPCAyNSkgeyBwLnggKz0gKHAuYmFzZVggLSBwLngpICogMC4xICsgKE1hdGgucmFuZG9tKCktMC41KSpqaXR0ZXI7IHAueSArPSAocC5iYXNlWSAtIHAueSkgKiAwLjEgKyAoTWF0aC5yYW5kb20oKS0wLjUpKmppdHRlcjsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGVtcCA8IDUwKSB7IHAudnkgKz0gMC4xOyBpZihwLnkgPiBoLTEwKSBwLnkgPSBoLTEwOyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC52eCArPSAoTWF0aC5yYW5kb20oKS0wLjUpICogc3BlZWQgKiAwLjE7IHAudnkgKz0gKE1hdGgucmFuZG9tKCktMC41KSAqIHNwZWVkICogMC4xOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAudnggKj0gMC45OTsgcC52eSAqPSAwLjk5OyBwLnggKz0gcC52eDsgcC55ICs9IHAudnk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocC54IDwgMCB8fCBwLnggPiB3KSBwLnZ4ICo9IC0xOyBpZihwLnkgPCAwIHx8IHAueSA+IGgpIHAudnkgKj0gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMocC54LCBwLnksIDUsIDAsIE1hdGguUEkqMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50ZW1wID4gNzUpIHsgY3R4LmZpbGxTdHlsZSA9ICcjZWFiMzA4JzsgY3R4LnNoYWRvd0JsdXIgPSAxMDsgY3R4LnNoYWRvd0NvbG9yID0gJyNlYWIzMDgnOyB9IGVsc2UgeyBjdHguZmlsbFN0eWxlID0gJyMzYjgyZjYnOyBjdHguc2hhZG93Qmx1ciA9IDA7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7IGN0eC5zaGFkb3dCbHVyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm1vZGUgPT09ICdhdG9tJykgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjeCA9IHcvMjsgY29uc3QgY3kgPSBoLzI7IGNvbnN0IHRpbWUgPSBEYXRlLm5vdygpIC8gMTAwMDsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8NjsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoY3ggKyBNYXRoLmNvcyhpKSo4LCBjeSArIE1hdGguc2luKGkpKjgsIDgsIDAsIE1hdGguUEkqMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gaSUyPT09MCA/ICcjZWY0NDQ0JyA6ICcjOWNhM2FmJzsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjMDAwJzsgY3R4LmxpbmVXaWR0aCA9IDE7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZic7IGN0eC5mb250ID0gIjEwcHggQXJpYWwiOyBjdHgudGV4dEFsaWduID0gImNlbnRlciI7IGN0eC5maWxsVGV4dChpJTI9PT0wID8gIisiIDogIiIsIGN4ICsgTWF0aC5jb3MoaSkqOCwgY3kgKyBNYXRoLnNpbihpKSo4ICsgMyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJ3JnYmEoMjU1LDI1NSwyNTUsMC4yKSc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmVsbGlwc2UoY3gsIGN5LCA2MCwgMjAsIHRpbWUsIDAsIE1hdGguUEkqMik7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguZWxsaXBzZShjeCwgY3ksIDYwLCAyMCwgdGltZSArIE1hdGguUEkvMywgMCwgTWF0aC5QSSoyKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5lbGxpcHNlKGN4LCBjeSwgNjAsIDIwLCB0aW1lICsgMipNYXRoLlBJLzMsIDAsIE1hdGguUEkqMik7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZHJhd0VsZWN0cm9uID0gKGFuZ2xlT2Zmc2V0KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbmdsZSA9IHRpbWUgKiA1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXggPSBjeCArIE1hdGguY29zKGFuZ2xlKSAqIDYwICogTWF0aC5jb3MoYW5nbGVPZmZzZXQpIC0gTWF0aC5zaW4oYW5nbGUpICogMjAgKiBNYXRoLnNpbihhbmdsZU9mZnNldCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleSA9IGN5ICsgTWF0aC5jb3MoYW5nbGUpICogNjAgKiBNYXRoLnNpbihhbmdsZU9mZnNldCkgKyBNYXRoLnNpbihhbmdsZSkgKiAyMCAqIE1hdGguY29zKGFuZ2xlT2Zmc2V0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhleCwgZXksIDUsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsU3R5bGUgPSAnIzYwYTVmYSc7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGRyYXdFbGVjdHJvbih0aW1lKTsgZHJhd0VsZWN0cm9uKHRpbWUgKyBNYXRoLlBJLzMpOyBkcmF3RWxlY3Ryb24odGltZSArIDIqTWF0aC5QSS8zKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5sb29wKCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8gRU5FUkdZIExBQiBTSU1VTEFUSU9OCiAgICAgICAgICAgIGVuZXJneUxhYjogewogICAgICAgICAgICAgICAgYW5pbUlkOiBudWxsLAogICAgICAgICAgICAgICAgbWFzczogNSwKICAgICAgICAgICAgICAgIGs6IDIsCiAgICAgICAgICAgICAgICBkYW1waW5nOiAwLjAyLAogICAgICAgICAgICAgICAgYmxvY2s6IHsgeTogMTUwLCB2eTogMCB9LAogICAgICAgICAgICAgICAgdGhlcm1hbDogMCwKICAgICAgICAgICAgICAgIGlzRHJhZ2dpbmc6IGZhbHNlLAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKGNvbnRhaW5lcikgewogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGgtZnVsbCB3LWZ1bGwiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJmb250LWJvbGQgdGV4dC1sZyBtYi0yIHRleHQtZ3JheS03MDAiPlNwcmluZyBFbmVyZ3kgTGFiPC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icmVsYXRpdmUgdy1mdWxsIG1heC13LWxnIGgtNjQgYmctZ3JheS01MCBib3JkZXItMiBib3JkZXItZ3JheS00MDAgcm91bmRlZC1sZyBzaGFkb3ctaW5uZXIgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgb3ZlcmZsb3ctaGlkZGVuIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Y2FudmFzIGlkPSJlbC1jYW52YXMiIHdpZHRoPSI1MDAiIGhlaWdodD0iMjUwIj48L2NhbnZhcz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhYnNvbHV0ZSB0b3AtMiBsZWZ0LTIgdGV4dC14cyB0ZXh0LWdyYXktNTAwIHBvaW50ZXItZXZlbnRzLW5vbmUgYmctd2hpdGUvODAgcC0xIHJvdW5kZWQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSI+PGRpdiBjbGFzcz0idy0zIGgtMyBiZy1ibHVlLTUwMCI+PC9kaXY+IEtFPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0xIj48ZGl2IGNsYXNzPSJ3LTMgaC0zIGJnLWdyZWVuLTUwMCI+PC9kaXY+IFBFIChTcHJpbmcpPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0xIj48ZGl2IGNsYXNzPSJ3LTMgaC0zIGJnLW9yYW5nZS01MDAiPjwvZGl2PiBQRSAoR3Jhdml0eSk8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEiPjxkaXYgY2xhc3M9InctMyBoLTMgYmctcmVkLTUwMCI+PC9kaXY+IFRoZXJtYWw8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJlbC1vdmVybGF5IiBjbGFzcz0iYWJzb2x1dGUgYm90dG9tLTIgdGV4dC1zbSB0ZXh0LWdyYXktNTAwIGJnLXdoaXRlLzgwIHB4LTIgcm91bmRlZCBwb2ludGVyLWV2ZW50cy1ub25lIj5EcmFnIHRoZSBtYXNzIHRvIHN0YXJ0PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idy1mdWxsIG1heC13LW1kIG10LTQgYmctZ3JheS0xMDAgcC00IHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCBmbGV4IGdhcC00IGp1c3RpZnktY2VudGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIHRleHQteHMgZm9udC1ib2xkIHRleHQtZ3JheS02MDAiPk1hc3M8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIG1pbj0iMiIgbWF4PSIxMCIgdmFsdWU9IiR7dGhpcy5tYXNzfSIgY2xhc3M9ImFjY2VudC1ibHVlLTYwMCIgb25pbnB1dD0iU2ltdWxhdGlvbnMuZW5lcmd5TGFiLm1hc3M9cGFyc2VJbnQodGhpcy52YWx1ZSkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYmxvY2sgdGV4dC14cyBmb250LWJvbGQgdGV4dC1ncmF5LTYwMCI+U3ByaW5nIFN0aWZmbmVzczwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYW5nZSIgbWluPSIxIiBtYXg9IjEwIiB2YWx1ZT0iJHt0aGlzLmt9IiBjbGFzcz0iYWNjZW50LWdyZWVuLTYwMCIgb25pbnB1dD0iU2ltdWxhdGlvbnMuZW5lcmd5TGFiLms9cGFyc2VJbnQodGhpcy52YWx1ZSkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYmxvY2sgdGV4dC14cyBmb250LWJvbGQgdGV4dC1ncmF5LTYwMCI+RnJpY3Rpb248L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIG1pbj0iMCIgbWF4PSIwLjEiIHN0ZXA9IjAuMDEiIHZhbHVlPSIke3RoaXMuZGFtcGluZ30iIGNsYXNzPSJhY2NlbnQtcmVkLTYwMCIgb25pbnB1dD0iU2ltdWxhdGlvbnMuZW5lcmd5TGFiLmRhbXBpbmc9cGFyc2VGbG9hdCh0aGlzLnZhbHVlKSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im10LTIgdGV4dC1zbSB0ZXh0LWdyYXktNjAwIHRleHQtY2VudGVyIG1heC13LW1kIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYnNlcnZlIGhvdyBlbmVyZ3kgdHJhbnNmb3JtcyBiZXR3ZWVuIEtpbmV0aWMsIFBvdGVudGlhbCAoU3ByaW5nICYgR3Jhdml0eSksIGFuZCBIZWF0LgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VsLWNhbnZhcycpOwogICAgICAgICAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZSkgPT4gdGhpcy5oYW5kbGVEb3duKGUpKTsKICAgICAgICAgICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgKGUpID0+IHRoaXMuaGFuZGxlTW92ZShlKSk7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoKSA9PiB0aGlzLmhhbmRsZVVwKCkpOwoKICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0KCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydCgpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICByZXNldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5ibG9jay55ID0gMTUwOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYmxvY2sudnkgPSAwOwogICAgICAgICAgICAgICAgICAgIHRoaXMudGhlcm1hbCA9IDA7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIGhhbmRsZURvd246IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWwtY2FudmFzJyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBteCA9IGUuY2xpZW50WCAtIHJlY3QubGVmdDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBteSA9IGUuY2xpZW50WSAtIHJlY3QudG9wOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhteCAtIDI1MCkgPCAzMCAmJiBNYXRoLmFicyhteSAtIHRoaXMuYmxvY2sueSkgPCAzMCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRHJhZ2dpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJsb2NrLnZ5ID0gMDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIGhhbmRsZU1vdmU6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNEcmFnZ2luZykgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbC1jYW52YXMnKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG15ID0gZS5jbGllbnRZIC0gcmVjdC50b3A7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgdGhpcy5ibG9jay55ID0gTWF0aC5tYXgoNTAsIE1hdGgubWluKDIzMCwgbXkpKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmJsb2NrLnZ5ID0gMDsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRoZXJtYWwgPSAwOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBoYW5kbGVVcDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0RyYWdnaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIHN0YXJ0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmFuaW1JZCkgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltSWQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMubG9vcCgpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBsb29wOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWwtY2FudmFzJyk7CiAgICAgICAgICAgICAgICAgICAgaWYoIWNhbnZhcykgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHcgPSBjYW52YXMud2lkdGg7IGNvbnN0IGggPSBjYW52YXMuaGVpZ2h0OwoKICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCx3LGgpOwoKICAgICAgICAgICAgICAgICAgICAvLyBQaHlzaWNzCiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzRHJhZ2dpbmcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzcGxhY2VtZW50ID0gdGhpcy5ibG9jay55IC0gMTAwOyAvLyAxMDAgaXMgYW5jaG9yIFkgKyBuYXR1cmFsIGxlbmd0aCBhcHByb3gKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ByaW5nRm9yY2UgPSAtdGhpcy5rICogMC41ICogZGlzcGxhY2VtZW50OyAvLyBrIGlzIHNtYWxsIGhlcmUgZm9yIHZpc3VhbCBzY2FsaW5nCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyYXZpdHlGb3JjZSA9IHRoaXMubWFzcyAqIDAuMjsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGFtcGluZ0ZvcmNlID0gLXRoaXMuZGFtcGluZyAqIHRoaXMuYmxvY2sudnkgKiAxMDsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjY2VsZXJhdGlvbiA9IChzcHJpbmdGb3JjZSArIGdyYXZpdHlGb3JjZSArIGRhbXBpbmdGb3JjZSkgLyB0aGlzLm1hc3M7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmxvY2sudnkgKz0gYWNjZWxlcmF0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJsb2NrLnkgKz0gdGhpcy5ibG9jay52eTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVuZXJneSBMb3NzIHRvIFRoZXJtYWwKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGFtcGluZyA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGhlcm1hbCA9ICh0aGlzLnRoZXJtYWwgfHwgMCkgKyBNYXRoLmFicyhkYW1waW5nRm9yY2UgKiB0aGlzLmJsb2NrLnZ5ICogMC4xKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBTcHJpbmcKICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbygyNTAsIDApOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvaWxzID0gMTA7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ByaW5nTGVuID0gdGhpcy5ibG9jay55OwogICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPD1jb2lsczsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHkgPSAoaS9jb2lscykgKiBzcHJpbmdMZW47CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHggPSAyNTAgKyAoaSUyPT09MCA/IC0xMCA6IDEwKSAqIChpPT09MCB8fCBpPT09Y29pbHMgPyAwIDogMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oeCwgeSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjNGI1NTYzJzsKICAgICAgICAgICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMjsKICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7CgogICAgICAgICAgICAgICAgICAgIC8vIERyYXcgTWFzcwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2VmNDQ0NCc7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDIzMCwgdGhpcy5ibG9jay55LCA0MCwgNDApOwogICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjN2YxZDFkJzsKICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlUmVjdCgyMzAsIHRoaXMuYmxvY2sueSwgNDAsIDQwKTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3doaXRlJzsKICAgICAgICAgICAgICAgICAgICBjdHguZm9udCA9ICcxMnB4IEFyaWFsJzsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQodGhpcy5tYXNzICsgImtnIiwgMjM4LCB0aGlzLmJsb2NrLnkgKyAyNSk7CgogICAgICAgICAgICAgICAgICAgIC8vIEVuZXJneSBDaGFydAogICAgICAgICAgICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLmJsb2NrLnZ5OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3QgPSAodGhpcy5ibG9jay55IC0gMTAwKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBoIC0gdGhpcy5ibG9jay55OwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGNvbnN0IGtlID0gMC41ICogdGhpcy5tYXNzICogdiAqIHYgKiAxMDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBlcGUgPSAwLjUgKiAodGhpcy5rICogMC41KSAqIGRpc3QgKiBkaXN0OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGdwZSA9IHRoaXMubWFzcyAqIDAuMiAqIGhlaWdodDsKICAgICAgICAgICAgICAgICAgICBjb25zdCB0aCA9IHRoaXMudGhlcm1hbCB8fCAwOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvdGFsID0ga2UgKyBlcGUgKyBncGUgKyB0aDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXhCYXIgPSAxNTA7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NhbGUgPSB0b3RhbCA+IDAgPyBtYXhCYXIgLyB0b3RhbCA6IDA7CgogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXJ0WCA9IDQwMDsgY29uc3QgY2hhcnRZID0gMjAwOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhclcgPSAxNTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzYjgyZjYnOyBjdHguZmlsbFJlY3QoY2hhcnRYLCBjaGFydFkgLSBrZSpzY2FsZSwgYmFyVywga2Uqc2NhbGUpOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzIyYzU1ZSc7IGN0eC5maWxsUmVjdChjaGFydFggKyAyMCwgY2hhcnRZIC0gZXBlKnNjYWxlLCBiYXJXLCBlcGUqc2NhbGUpOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2Y5NzMxNic7IGN0eC5maWxsUmVjdChjaGFydFggKyA0MCwgY2hhcnRZIC0gZ3BlKnNjYWxlLCBiYXJXLCBncGUqc2NhbGUpOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2VmNDQ0NCc7IGN0eC5maWxsUmVjdChjaGFydFggKyA2MCwgY2hhcnRZIC0gdGgqc2NhbGUsIGJhclcsIHRoKnNjYWxlKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzAwMCc7CiAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVJlY3QoY2hhcnRYIC0gNSwgY2hhcnRZIC0gbWF4QmFyLCA5MCwgbWF4QmFyKTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgiRW5lcmd5IiwgY2hhcnRYICsgMTAsIGNoYXJ0WSArIDE1KTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5sb29wKCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8gSEVBVCAmIEdBUyBMQUIgU0lNVUxBVElPTgogICAgICAgICAgICBoZWF0R2FzTGFiOiB7CiAgICAgICAgICAgICAgICBtb2RlOiAnZ2FzJywgLy8gZ2FzLCBoZWF0CiAgICAgICAgICAgICAgICBhbmltSWQ6IG51bGwsCiAgICAgICAgICAgICAgICAvLyBHYXMgcHJvcHMKICAgICAgICAgICAgICAgIHZvbHVtZTogNTAsIC8vIDIwLTEwMCAocGlzdG9uIGhlaWdodCBpbnZlcnRlZCkKICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiAzMDAsIC8vIEtlbHZpbgogICAgICAgICAgICAgICAgcHJlc3N1cmU6IDAsCiAgICAgICAgICAgICAgICBwYXJ0aWNsZXM6IFtdLAogICAgICAgICAgICAgICAgLy8gSGVhdCBwcm9wcwogICAgICAgICAgICAgICAgaGVhdE1vZGU6ICdjb25kdWN0aW9uJywgLy8gY29uZHVjdGlvbiwgY29udmVjdGlvbiwgcmFkaWF0aW9uCgogICAgICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbihjb250YWluZXIpIHsKICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBoLWZ1bGwgdy1mdWxsIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0iZm9udC1ib2xkIHRleHQtbGcgbWItMiB0ZXh0LWdyYXktNzAwIj5UaGVybW9keW5hbWljcyAmIEdhcyBMYWI8L2gzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGdhcC0yIG1iLTQgYmctZ3JheS0xMDAgcC0xIHJvdW5kZWQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iU2ltdWxhdGlvbnMuaGVhdEdhc0xhYi5zZXRNb2RlKCdnYXMnKSIgaWQ9ImhnbC1idG4tZ2FzIiBjbGFzcz0icHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBmb250LWJvbGQgYmctd2hpdGUgc2hhZG93IHRleHQtYmx1ZS02MDAiPkdhcyBMYXdzPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJTaW11bGF0aW9ucy5oZWF0R2FzTGFiLnNldE1vZGUoJ2hlYXQnKSIgaWQ9ImhnbC1idG4taGVhdCIgY2xhc3M9InB4LTMgcHktMSByb3VuZGVkIHRleHQtc20gZm9udC1ib2xkIHRleHQtZ3JheS01MDAgaG92ZXI6YmctZ3JheS0yMDAiPkhlYXQgVHJhbnNmZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJlbGF0aXZlIHctZnVsbCBtYXgtdy1sZyBoLTY0IGJnLWdyYXktNTAgYm9yZGVyLTIgYm9yZGVyLWdyYXktNDAwIHJvdW5kZWQtbGcgc2hhZG93LWlubmVyIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG92ZXJmbG93LWhpZGRlbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGNhbnZhcyBpZD0iaGdsLWNhbnZhcyIgd2lkdGg9IjUwMCIgaGVpZ2h0PSIyNTAiPjwvY2FudmFzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImhnbC1vdmVybGF5IiBjbGFzcz0iYWJzb2x1dGUgdG9wLTIgbGVmdC0yIHRleHQteHMgdGV4dC1ncmF5LTUwMCBwb2ludGVyLWV2ZW50cy1ub25lIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJoZ2wtY29udHJvbHMiIGNsYXNzPSJ3LWZ1bGwgbWF4LXctbWQgbXQtNCBiZy1ncmF5LTEwMCBwLTQgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWdyYXktMzAwIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImhnbC1kZXNjIiBjbGFzcz0ibXQtMiB0ZXh0LXNtIHRleHQtZ3JheS02MDAgZm9udC1tZWRpdW0gdGV4dC1jZW50ZXIgbWF4LXctbWQgYmctYmx1ZS01MCBwLTIgcm91bmRlZCBib3JkZXIgYm9yZGVyLWJsdWUtMTAwIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRQYXJ0aWNsZXMoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNldE1vZGUoJ2dhcycpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBpbml0UGFydGljbGVzOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnRpY2xlcyA9IFtdOwogICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPDUwOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJ0aWNsZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBNYXRoLnJhbmRvbSgpICogNDAwICsgNTAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBNYXRoLnJhbmRvbSgpICogMjAwICsgMjUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2eDogKE1hdGgucmFuZG9tKCktMC41KSAqIDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2eTogKE1hdGgucmFuZG9tKCktMC41KSAqIDIKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBzZXRNb2RlOiBmdW5jdGlvbihtKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlID0gbTsKICAgICAgICAgICAgICAgICAgICBbJ2dhcycsICdoZWF0J10uZm9yRWFjaChrID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGhnbC1idG4tJHtrfWApOwogICAgICAgICAgICAgICAgICAgICAgICBpZihrID09PSBtKSBidG4uY2xhc3NOYW1lID0gInB4LTMgcHktMSByb3VuZGVkIHRleHQtc20gZm9udC1ib2xkIGJnLXdoaXRlIHNoYWRvdyB0ZXh0LWJsdWUtNjAwIjsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBidG4uY2xhc3NOYW1lID0gInB4LTMgcHktMSByb3VuZGVkIHRleHQtc20gZm9udC1ib2xkIHRleHQtZ3JheS01MDAgaG92ZXI6YmctZ3JheS0yMDAiOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250cm9scyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZ2wtY29udHJvbHMnKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXNjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hnbC1kZXNjJyk7CgogICAgICAgICAgICAgICAgICAgIGlmIChtID09PSAnZ2FzJykgewogICAgICAgICAgICAgICAgICAgICAgICBjb250cm9scy5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGZsZXgtY29sIGdhcC0zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LXhzIGZvbnQtYm9sZCB3LTI0Ij5Wb2x1bWUgKFBpc3Rvbik6PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIG1pbj0iMjAiIG1heD0iMTAwIiB2YWx1ZT0iJHt0aGlzLnZvbHVtZX0iIGNsYXNzPSJmbGV4LTEgYWNjZW50LWJsdWUtNjAwIiBvbmlucHV0PSJTaW11bGF0aW9ucy5oZWF0R2FzTGFiLnZvbHVtZT1wYXJzZUludCh0aGlzLnZhbHVlKTtTaW11bGF0aW9ucy5oZWF0R2FzTGFiLnVwZGF0ZSgpIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LXhzIGZvbnQtYm9sZCB3LTI0Ij5UZW1wZXJhdHVyZTo8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYW5nZSIgbWluPSIxMDAiIG1heD0iNjAwIiB2YWx1ZT0iJHt0aGlzLnRlbXBlcmF0dXJlfSIgY2xhc3M9ImZsZXgtMSBhY2NlbnQtcmVkLTYwMCIgb25pbnB1dD0iU2ltdWxhdGlvbnMuaGVhdEdhc0xhYi50ZW1wZXJhdHVyZT1wYXJzZUludCh0aGlzLnZhbHVlKTtTaW11bGF0aW9ucy5oZWF0R2FzTGFiLnVwZGF0ZSgpIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9ImhnbC10ZW1wLXZhbCIgY2xhc3M9InRleHQteHMgZm9udC1tb25vIHctMTIiPiR7dGhpcy50ZW1wZXJhdHVyZX1LPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIHRleHQtc20gZm9udC1ib2xkIGJnLXdoaXRlIHAtMiByb3VuZGVkIGJvcmRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlByZXNzdXJlOiA8c3BhbiBpZD0iaGdsLXByZXNzdXJlIiBjbGFzcz0idGV4dC1wdXJwbGUtNjAwIj4tLTwvc3Bhbj4gYXRtPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2MudGV4dENvbnRlbnQgPSAiR2FzIExhd3M6IEFkanVzdCBWb2x1bWUgKFYpIGFuZCBUZW1wZXJhdHVyZSAoVCkgdG8gc2VlIGhvdyBQcmVzc3VyZSAoUCkgY2hhbmdlcy4gKFBWID0gblJUKSI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbHMuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJTaW11bGF0aW9ucy5oZWF0R2FzTGFiLmhlYXRNb2RlPSdjb25kdWN0aW9uJztTaW11bGF0aW9ucy5oZWF0R2FzTGFiLnVwZGF0ZSgpIiBjbGFzcz0icHgtMiBweS0xIHRleHQteHMgYmctd2hpdGUgYm9yZGVyIHJvdW5kZWQgaG92ZXI6YmctZ3JheS0xMDAiPkNvbmR1Y3Rpb248L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IlNpbXVsYXRpb25zLmhlYXRHYXNMYWIuaGVhdE1vZGU9J2NvbnZlY3Rpb24nO1NpbXVsYXRpb25zLmhlYXRHYXNMYWIudXBkYXRlKCkiIGNsYXNzPSJweC0yIHB5LTEgdGV4dC14cyBiZy13aGl0ZSBib3JkZXIgcm91bmRlZCBob3ZlcjpiZy1ncmF5LTEwMCI+Q29udmVjdGlvbjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iU2ltdWxhdGlvbnMuaGVhdEdhc0xhYi5oZWF0TW9kZT0ncmFkaWF0aW9uJztTaW11bGF0aW9ucy5oZWF0R2FzTGFiLnVwZGF0ZSgpIiBjbGFzcz0icHgtMiBweS0xIHRleHQteHMgYmctd2hpdGUgYm9yZGVyIHJvdW5kZWQgaG92ZXI6YmctZ3JheS0xMDAiPlJhZGlhdGlvbjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2MudGV4dENvbnRlbnQgPSAiSGVhdCBUcmFuc2ZlcjogVmlzdWFsaXplIGhvdyBlbmVyZ3kgbW92ZXMgdGhyb3VnaCBtYXRlcmlhbHMgKENvbmR1Y3Rpb24pLCBmbHVpZHMgKENvbnZlY3Rpb24pLCBvciBzcGFjZSAoUmFkaWF0aW9uKS4iOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSgpOwogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuYW5pbUlkKSBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1JZCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb29wKCk7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gJ2dhcycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcFZhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZ2wtdGVtcC12YWwnKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYodGVtcFZhbCkgdGVtcFZhbC50ZXh0Q29udGVudCA9IHRoaXMudGVtcGVyYXR1cmUgKyAiSyI7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IFAgPSAodGhpcy50ZW1wZXJhdHVyZSAvIHRoaXMudm9sdW1lKS50b0ZpeGVkKDIpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwVmFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hnbC1wcmVzc3VyZScpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihwVmFsKSBwVmFsLnRleHRDb250ZW50ID0gUDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIGxvb3A6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZ2wtY2FudmFzJyk7CiAgICAgICAgICAgICAgICAgICAgaWYoIWNhbnZhcykgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHcgPSBjYW52YXMud2lkdGg7IGNvbnN0IGggPSBjYW52YXMuaGVpZ2h0OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGN4ID0gdy8yOyBjb25zdCBjeSA9IGgvMjsKCiAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsdyxoKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gJ2dhcycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3lsVyA9IDIwMDsgY29uc3QgY3lsSCA9IDIwMDsgY29uc3QgY3lsWCA9ICh3IC0gY3lsVykvMjsgY29uc3QgY3lsWSA9IChoIC0gY3lsSCkvMiArIDIwOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmM2Y0ZjYnOyBjdHguZmlsbFJlY3QoY3lsWCwgY3lsWSwgY3lsVywgY3lsSCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjMzc0MTUxJzsgY3R4LmxpbmVXaWR0aCA9IDQ7IGN0eC5zdHJva2VSZWN0KGN5bFgsIGN5bFksIGN5bFcsIGN5bEgpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwaXN0b25IID0gKHRoaXMudm9sdW1lIC8gMTAwKSAqIGN5bEg7IGNvbnN0IHBpc3RvblkgPSBjeWxZICsgY3lsSCAtIHBpc3Rvbkg7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzljYTNhZic7IGN0eC5maWxsUmVjdChjeWxYICsgMiwgcGlzdG9uWSAtIDEwLCBjeWxXIC0gNCwgMTApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM2YjcyODAnOyBjdHguZmlsbFJlY3QoY3ggLSA1LCBjeWxZIC0gNDAsIDEwLCBwaXN0b25ZIC0gKGN5bFkgLSA0MCkpOyBjdHguZmlsbFJlY3QoY3ggLSAyMCwgY3lsWSAtIDQwLCA0MCwgMTApOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGVlZEZhY3RvciA9IE1hdGguc3FydCh0aGlzLnRlbXBlcmF0dXJlKSAqIDAuMTU7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2VmNDQ0NCc7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFydGljbGVzLmZvckVhY2gocCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnggKz0gcC52eCAqIHNwZWVkRmFjdG9yOyBwLnkgKz0gcC52eSAqIHNwZWVkRmFjdG9yOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAueCA8IGN5bFggKyA1IHx8IHAueCA+IGN5bFggKyBjeWxXIC0gNSkgcC52eCAqPSAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwLnkgPCBwaXN0b25ZICsgNSB8fCBwLnkgPiBjeWxZICsgY3lsSCAtIDUpIHAudnkgKj0gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnggPSBNYXRoLm1heChjeWxYICsgNSwgTWF0aC5taW4oY3lsWCArIGN5bFcgLSA1LCBwLngpKTsgcC55ID0gTWF0aC5tYXgocGlzdG9uWSArIDUsIE1hdGgubWluKGN5bFkgKyBjeWxIIC0gNSwgcC55KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMocC54LCBwLnksIDMsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50ZW1wZXJhdHVyZSA+IDMwMCkgeyBjdHguZmlsbFN0eWxlID0gYHJnYmEoMjM5LCA2OCwgNjgsICR7KHRoaXMudGVtcGVyYXR1cmUtMzAwKS8zMDB9KWA7IGN0eC5mb250ID0gIjIwcHggQXJpYWwiOyBjdHguZmlsbFRleHQoIvCflKUiLCBjeCAtIDEwLCBjeWxZICsgY3lsSCArIDI1KTsgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnRlbXBlcmF0dXJlIDwgMzAwKSB7IGN0eC5maWxsU3R5bGUgPSBgcmdiYSg1OSwgMTMwLCAyNDYsICR7KDMwMC10aGlzLnRlbXBlcmF0dXJlKS8yMDB9KWA7IGN0eC5mb250ID0gIjIwcHggQXJpYWwiOyBjdHguZmlsbFRleHQoIuKdhO+4jyIsIGN4IC0gMTAsIGN5bFkgKyBjeWxIICsgMjUpOyB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm1vZGUgPT09ICdoZWF0JykgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lID0gRGF0ZS5ub3coKSAvIDEwMDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhlYXRNb2RlID09PSAnY29uZHVjdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhclcgPSAzMDA7IGNvbnN0IGJhckggPSA0MDsgY29uc3QgYmFyWCA9ICh3IC0gYmFyVykvMjsgY29uc3QgYmFyWSA9IGN5IC0gMjA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWF0UHJvcCA9IChNYXRoLnNpbih0aW1lKSArIDEpIC8gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyYWQgPSBjdHguY3JlYXRlTGluZWFyR3JhZGllbnQoYmFyWCwgMCwgYmFyWCArIGJhclcsIDApOyBncmFkLmFkZENvbG9yU3RvcCgwLCAnI2VmNDQ0NCcpOyBncmFkLmFkZENvbG9yU3RvcChNYXRoLm1heCgwLjEsIGhlYXRQcm9wKSwgJyMzYjgyZjYnKTsgZ3JhZC5hZGRDb2xvclN0b3AoMSwgJyMzYjgyZjYnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBncmFkOyBjdHguZmlsbFJlY3QoYmFyWCwgYmFyWSwgYmFyVywgYmFySCk7IGN0eC5zdHJva2VTdHlsZSA9ICcjMDAwJzsgY3R4LnN0cm9rZVJlY3QoYmFyWCwgYmFyWSwgYmFyVywgYmFySCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOyBjdHguZmlsbFRleHQoIkhlYXQgU291cmNlIiwgYmFyWCAtIDcwLCBiYXJZICsgMjUpOyBjdHguZmlsbFRleHQoIkNvbGQgRW5kIiwgYmFyWCArIGJhclcgKyAxMCwgYmFyWSArIDI1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPDMwOyBpKyspIHsgY29uc3QgcHggPSBiYXJYICsgaSAqIDEwICsgNTsgY29uc3QgcHkgPSBiYXJZICsgMjA7IGNvbnN0IGRpc3QgPSAocHggLSBiYXJYKSAvIGJhclc7IGNvbnN0IGFtcCA9ICgxIC0gZGlzdCkgKiAoaGVhdFByb3AgKiA1KTsgY29uc3QgdmliWCA9IE1hdGguc2luKHRpbWUgKiAyMCArIGkpICogYW1wOyBjb25zdCB2aWJZID0gTWF0aC5jb3ModGltZSAqIDIwICsgaSkgKiBhbXA7IGN0eC5maWxsU3R5bGUgPSAncmdiYSgyNTUsMjU1LDI1NSwwLjUpJzsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHB4ICsgdmliWCwgcHkgKyB2aWJZLCAzLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOyB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5oZWF0TW9kZSA9PT0gJ2NvbnZlY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3RYID0gY3ggLSA3NTsgY29uc3QgcG90WSA9IGN5IC0gNTA7IGNvbnN0IHBvdFcgPSAxNTA7IGNvbnN0IHBvdEggPSAxMDA7IGN0eC5maWxsU3R5bGUgPSAnI2JmZGJmZSc7IGN0eC5maWxsUmVjdChwb3RYLCBwb3RZLCBwb3RXLCBwb3RIKTsgY3R4LnN0cm9rZVN0eWxlID0gJyMwMDAnOyBjdHguc3Ryb2tlUmVjdChwb3RYLCBwb3RZLCBwb3RXLCBwb3RIKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2VmNDQ0NCc7IGZvcihsZXQgaT0wOyBpPDEwOyBpKyspIHsgY29uc3Qgb2Zmc2V0ID0gaSAqIChNYXRoLlBJICogMiAvIDEwKTsgY29uc3QgciA9IDMwOyBjb25zdCBweSA9IGN5ICsgTWF0aC5zaW4odGltZSAqIDIgKyBvZmZzZXQpICogcjsgY29uc3QgdGVtcCA9IChweSAtIHBvdFkpIC8gcG90SDsgY3R4LmZpbGxTdHlsZSA9IHRlbXAgPiAwLjUgPyAnI2VmNDQ0NCcgOiAnIzNiODJmNic7IGNvbnN0IGNlbGxYID0gaSA8IDUgPyBjeCAtIDM1IDogY3ggKyAzNTsgY29uc3QgY2VsbFkgPSBjeTsgY29uc3QgYW5nbGUgPSB0aW1lICogMiArIG9mZnNldDsgY29uc3QgcFggPSBjZWxsWCArIE1hdGguY29zKGFuZ2xlKSAqIDIwICogKGk8NSA/IDEgOiAtMSk7IGNvbnN0IHBZID0gY2VsbFkgKyBNYXRoLnNpbihhbmdsZSkgKiAzMDsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHBYLCBwWSwgNCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMDAwJzsgY3R4LmZpbGxUZXh0KCJIZWF0IFNvdXJjZSIsIGN4IC0gMzAsIHBvdFkgKyBwb3RIICsgMjApOyBjdHguZmlsbFRleHQoIvCflKUiLCBjeCAtIDEwLCBwb3RZICsgcG90SCArIDQwKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmhlYXRNb2RlID09PSAncmFkaWF0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmJiZjI0JzsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKDEwMCwgY3ksIDQwLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOyBjdHguZmlsbFN0eWxlID0gJyMzYjgyZjYnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoNDAwLCBjeSwgMjAsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI2Y1OWUwYic7IGN0eC5saW5lV2lkdGggPSAyOyBjb25zdCB3YXZlQ291bnQgPSA1OyBmb3IobGV0IGk9MDsgaTx3YXZlQ291bnQ7IGkrKykgeyBjb25zdCBwcm9ncmVzcyA9ICh0aW1lICogMC41ICsgaS93YXZlQ291bnQpICUgMTsgY29uc3QgeCA9IDE0MCArIHByb2dyZXNzICogMjQwOyBjb25zdCB5ID0gY3kgKyBNYXRoLnNpbih4ICogMC4xICsgdGltZSAqIDEwKSAqIDEwOyBpZiAoeCA8IDM4MCkgeyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoeCwgeSwgMiwgMCwgTWF0aC5QSSoyKTsgY3R4LnN0cm9rZSgpOyB9IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzAwMCc7IGN0eC5maWxsVGV4dCgiVmFjdXVtIG9mIFNwYWNlIiwgY3ggLSA0MCwgY3kgLSA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5sb29wKCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8gQ0hFTUlTVFJZIExBQiBTSU1VTEFUSU9OCiAgICAgICAgICAgIGNoZW1pc3RyeUxhYjogewogICAgICAgICAgICAgICAgbW9kZTogJ2F0b20nLCAvLyBhdG9tLCBib25kaW5nLCBiYWxhbmNpbmcKICAgICAgICAgICAgICAgIGFuaW1JZDogbnVsbCwKICAgICAgICAgICAgICAgIC8vIEF0b20gcHJvcHMKICAgICAgICAgICAgICAgIHA6IDEsIG46IDAsIGU6IDEsCiAgICAgICAgICAgICAgICAvLyBCb25kaW5nIHByb3BzCiAgICAgICAgICAgICAgICBib25kVHlwZTogJ2lvbmljJywKICAgICAgICAgICAgICAgIC8vIEJhbGFuY2luZyBwcm9wcwogICAgICAgICAgICAgICAgYzE6IDEsIGMyOiAxLCBjMzogMSwgLy8gSDIgKyBPMiAtPiBIMk8KCiAgICAgICAgICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKGNvbnRhaW5lcikgewogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGgtZnVsbCB3LWZ1bGwiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJmb250LWJvbGQgdGV4dC1sZyBtYi0yIHRleHQtZ3JheS03MDAiPkNoZW1pc3RyeSBMYWJvcmF0b3J5PC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBnYXAtMiBtYi00IGJnLWdyYXktMTAwIHAtMSByb3VuZGVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IlNpbXVsYXRpb25zLmNoZW1pc3RyeUxhYi5zZXRNb2RlKCdhdG9tJykiIGlkPSJjbC1idG4tYXRvbSIgY2xhc3M9InB4LTMgcHktMSByb3VuZGVkIHRleHQtc20gZm9udC1ib2xkIGJnLXdoaXRlIHNoYWRvdyB0ZXh0LWJsdWUtNjAwIj5BdG9tIEJ1aWxkZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IlNpbXVsYXRpb25zLmNoZW1pc3RyeUxhYi5zZXRNb2RlKCdib25kaW5nJykiIGlkPSJjbC1idG4tYm9uZGluZyIgY2xhc3M9InB4LTMgcHktMSByb3VuZGVkIHRleHQtc20gZm9udC1ib2xkIHRleHQtZ3JheS01MDAgaG92ZXI6YmctZ3JheS0yMDAiPkJvbmRpbmc8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IlNpbXVsYXRpb25zLmNoZW1pc3RyeUxhYi5zZXRNb2RlKCdiYWxhbmNpbmcnKSIgaWQ9ImNsLWJ0bi1iYWxhbmNpbmciIGNsYXNzPSJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIGhvdmVyOmJnLWdyYXktMjAwIj5CYWxhbmNpbmcgRXE8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJlbGF0aXZlIHctZnVsbCBtYXgtdy1sZyBoLTY0IGJnLWdyYXktNTAgYm9yZGVyLTIgYm9yZGVyLWdyYXktNDAwIHJvdW5kZWQtbGcgc2hhZG93LWlubmVyIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG92ZXJmbG93LWhpZGRlbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGNhbnZhcyBpZD0iY2wtY2FudmFzIiB3aWR0aD0iNTAwIiBoZWlnaHQ9IjI1MCI+PC9jYW52YXM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0iY2wtY29udHJvbHMiIGNsYXNzPSJ3LWZ1bGwgbWF4LXctbWQgbXQtNCBiZy1ncmF5LTEwMCBwLTQgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWdyYXktMzAwIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImNsLWRlc2MiIGNsYXNzPSJtdC00IHRleHQtc20gdGV4dC1ncmF5LTYwMCBmb250LW1lZGl1bSB0ZXh0LWNlbnRlciBtYXgtdy1tZCBiZy1ibHVlLTUwIHAtMiByb3VuZGVkIGJvcmRlciBib3JkZXItYmx1ZS0xMDAiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TW9kZSgnYXRvbScpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBzZXRNb2RlOiBmdW5jdGlvbihtKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlID0gbTsKICAgICAgICAgICAgICAgICAgICBbJ2F0b20nLCAnYm9uZGluZycsICdiYWxhbmNpbmcnXS5mb3JFYWNoKGsgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgY2wtYnRuLSR7a31gKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoayA9PT0gbSkgYnRuLmNsYXNzTmFtZSA9ICJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCBiZy13aGl0ZSBzaGFkb3cgdGV4dC1ibHVlLTYwMCI7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgYnRuLmNsYXNzTmFtZSA9ICJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIGhvdmVyOmJnLWdyYXktMjAwIjsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udHJvbHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2wtY29udHJvbHMnKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXNjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NsLWRlc2MnKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKG0gPT09ICdhdG9tJykgewogICAgICAgICAgICAgICAgICAgICAgICBjb250cm9scy5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkIGdyaWQtY29scy0zIGdhcC0yIHRleHQtY2VudGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxsYWJlbCBjbGFzcz0idGV4dC14cyBmb250LWJvbGQgdGV4dC1yZWQtNjAwIj5Qcm90b25zPC9sYWJlbD48aW5wdXQgdHlwZT0icmFuZ2UiIG1pbj0iMSIgbWF4PSIxMCIgdmFsdWU9IiR7dGhpcy5wfSIgY2xhc3M9InctZnVsbCBhY2NlbnQtcmVkLTYwMCIgb25pbnB1dD0iU2ltdWxhdGlvbnMuY2hlbWlzdHJ5TGFiLnA9cGFyc2VJbnQodGhpcy52YWx1ZSk7U2ltdWxhdGlvbnMuY2hlbWlzdHJ5TGFiLnVwZGF0ZSgpIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxsYWJlbCBjbGFzcz0idGV4dC14cyBmb250LWJvbGQgdGV4dC1ncmF5LTYwMCI+TmV1dHJvbnM8L2xhYmVsPjxpbnB1dCB0eXBlPSJyYW5nZSIgbWluPSIwIiBtYXg9IjEyIiB2YWx1ZT0iJHt0aGlzLm59IiBjbGFzcz0idy1mdWxsIGFjY2VudC1ncmF5LTYwMCIgb25pbnB1dD0iU2ltdWxhdGlvbnMuY2hlbWlzdHJ5TGFiLm49cGFyc2VJbnQodGhpcy52YWx1ZSk7U2ltdWxhdGlvbnMuY2hlbWlzdHJ5TGFiLnVwZGF0ZSgpIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxsYWJlbCBjbGFzcz0idGV4dC14cyBmb250LWJvbGQgdGV4dC1ibHVlLTYwMCI+RWxlY3Ryb25zPC9sYWJlbD48aW5wdXQgdHlwZT0icmFuZ2UiIG1pbj0iMCIgbWF4PSIxMCIgdmFsdWU9IiR7dGhpcy5lfSIgY2xhc3M9InctZnVsbCBhY2NlbnQtYmx1ZS02MDAiIG9uaW5wdXQ9IlNpbXVsYXRpb25zLmNoZW1pc3RyeUxhYi5lPXBhcnNlSW50KHRoaXMudmFsdWUpO1NpbXVsYXRpb25zLmNoZW1pc3RyeUxhYi51cGRhdGUoKSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgICAgICAgICAgZGVzYy50ZXh0Q29udGVudCA9ICJCdWlsZCBhbiBBdG9tISBQcm90b25zIGRlZmluZSB0aGUgZWxlbWVudC4gRWxlY3Ryb25zIGRlZmluZSB0aGUgY2hhcmdlLiI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtID09PSAnYm9uZGluZycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbHMuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWNlbnRlciBnYXAtNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBjdXJzb3ItcG9pbnRlciI+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJidHlwZSIgdmFsdWU9ImlvbmljIiBjaGVja2VkIG9uY2hhbmdlPSJTaW11bGF0aW9ucy5jaGVtaXN0cnlMYWIuYm9uZFR5cGU9J2lvbmljJztTaW11bGF0aW9ucy5jaGVtaXN0cnlMYWIudXBkYXRlKCkiPiBJb25pYyAoTmEgKyBDbCk8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgY3Vyc29yLXBvaW50ZXIiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iYnR5cGUiIHZhbHVlPSJjb3ZhbGVudCIgb25jaGFuZ2U9IlNpbXVsYXRpb25zLmNoZW1pc3RyeUxhYi5ib25kVHlwZT0nY292YWxlbnQnO1NpbXVsYXRpb25zLmNoZW1pc3RyeUxhYi51cGRhdGUoKSI+IENvdmFsZW50IChIICsgSCk8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2MudGV4dENvbnRlbnQgPSAiSW9uaWM6IFRyYW5zZmVyIG9mIGVsZWN0cm9ucyAoQXR0cmFjdGlvbiBvZiBvcHBvc2l0ZXMpLiBDb3ZhbGVudDogU2hhcmluZyBvZiBlbGVjdHJvbnMuIjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG0gPT09ICdiYWxhbmNpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xzLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0yIGZvbnQtbW9ubyB0ZXh0LWxnIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBtaW49IjEiIG1heD0iNSIgdmFsdWU9IiR7dGhpcy5jMX0iIGNsYXNzPSJ3LTEyIHRleHQtY2VudGVyIGJvcmRlciByb3VuZGVkIiBvbmNoYW5nZT0iU2ltdWxhdGlvbnMuY2hlbWlzdHJ5TGFiLmMxPXBhcnNlSW50KHRoaXMudmFsdWUpO1NpbXVsYXRpb25zLmNoZW1pc3RyeUxhYi51cGRhdGUoKSI+IEjigoIgKyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBtaW49IjEiIG1heD0iNSIgdmFsdWU9IiR7dGhpcy5jMn0iIGNsYXNzPSJ3LTEyIHRleHQtY2VudGVyIGJvcmRlciByb3VuZGVkIiBvbmNoYW5nZT0iU2ltdWxhdGlvbnMuY2hlbWlzdHJ5TGFiLmMyPXBhcnNlSW50KHRoaXMudmFsdWUpO1NpbXVsYXRpb25zLmNoZW1pc3RyeUxhYi51cGRhdGUoKSI+IE/igoIg4oaSIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIG1pbj0iMSIgbWF4PSI1IiB2YWx1ZT0iJHt0aGlzLmMzfSIgY2xhc3M9InctMTIgdGV4dC1jZW50ZXIgYm9yZGVyIHJvdW5kZWQiIG9uY2hhbmdlPSJTaW11bGF0aW9ucy5jaGVtaXN0cnlMYWIuYzM9cGFyc2VJbnQodGhpcy52YWx1ZSk7U2ltdWxhdGlvbnMuY2hlbWlzdHJ5TGFiLnVwZGF0ZSgpIj4gSOKCgk8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgICAgICAgICBkZXNjLnRleHRDb250ZW50ID0gIkJhbGFuY2UgdGhlIGVxdWF0aW9uISBNYWtlIHN1cmUgdGhlIG51bWJlciBvZiBIIGFuZCBPIGF0b21zIGlzIHRoZSBzYW1lIG9uIGJvdGggc2lkZXMuIjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydCgpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uKCkgeyAvKiBUcmlnZ2VyIGxvb3AgcmVkcmF3ICovIH0sCgogICAgICAgICAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuYW5pbUlkKSBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1JZCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb29wKCk7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIGxvb3A6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbC1jYW52YXMnKTsKICAgICAgICAgICAgICAgICAgICBpZighY2FudmFzKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdyA9IGNhbnZhcy53aWR0aDsgY29uc3QgaCA9IGNhbnZhcy5oZWlnaHQ7IGNvbnN0IGN4ID0gdy8yOyBjb25zdCBjeSA9IGgvMjsKICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lID0gRGF0ZS5ub3coKSAvIDEwMDA7CgogICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLHcsaCk7CgogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdhdG9tJykgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBOdWNsZXVzCiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPHRoaXMucDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNlZjQ0NDQnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoY3ggKyBNYXRoLmNvcyhpKSoxMCwgY3kgKyBNYXRoLnNpbihpKSoxMCwgOCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsgY3R4LnN0cm9rZVN0eWxlPScjMDAwJzsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPHRoaXMubjsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM5Y2EzYWYnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoY3ggKyBNYXRoLmNvcyhpKzIpKjgsIGN5ICsgTWF0aC5zaW4oaSsyKSo4LCA4LCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOyBjdHguc3Ryb2tlU3R5bGU9JyMwMDAnOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2hlbGxzCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICdyZ2JhKDAsMCwwLDAuMiknOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoY3gsIGN5LCA0MCwgMCwgTWF0aC5QSSoyKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmUgPiAyKSB7IGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhjeCwgY3ksIDcwLCAwLCBNYXRoLlBJKjIpOyBjdHguc3Ryb2tlKCk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVsZWN0cm9ucwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzYjgyZjYnOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLmU7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHIgPSBpIDwgMiA/IDQwIDogNzA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYW5nbGUgPSB0aW1lICogKGk8MiA/IDIgOiAxKSArIChpICogKE1hdGguUEkqMiAvIChpPDI/MjoodGhpcy5lLTIpKSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKGN4ICsgTWF0aC5jb3MoYW5nbGUpKnIsIGN5ICsgTWF0aC5zaW4oYW5nbGUpKnIsIDUsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluZm8KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudHMgPSBbIj8iLCAiSHlkcm9nZW4iLCAiSGVsaXVtIiwgIkxpdGhpdW0iLCAiQmVyeWxsaXVtIiwgIkJvcm9uIiwgIkNhcmJvbiIsICJOaXRyb2dlbiIsICJPeHlnZW4iLCAiRmx1b3JpbmUiLCAiTmVvbiJdOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gZWxlbWVudHNbdGhpcy5wXSB8fCAiVW5rbm93biI7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXJnZSA9IHRoaXMucCAtIHRoaXMuZTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hhcmdlU3RyID0gY2hhcmdlID4gMCA/IGArJHtjaGFyZ2V9YCA6IChjaGFyZ2UgPCAwID8gYCR7Y2hhcmdlfWAgOiAiTmV1dHJhbCIpOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMDAwJzsgY3R4LmZvbnQgPSAiYm9sZCAxNnB4IEFyaWFsIjsgY3R4LnRleHRBbGlnbiA9ICJsZWZ0IjsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGBFbGVtZW50OiAke25hbWV9YCwgMTAsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGBBdG9taWMgIzogJHt0aGlzLnB9YCwgMTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGBNYXNzICM6ICR7dGhpcy5wICsgdGhpcy5ufWAsIDEwLCA3MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dChgTmV0IENoYXJnZTogJHtjaGFyZ2VTdHJ9YCwgMTAsIDkwKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMubW9kZSA9PT0gJ2JvbmRpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJvbmRUeXBlID09PSAnaW9uaWMnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOYSArIENsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXN0ID0gMTAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFYID0gY3ggLSA2MDsgY29uc3QgY2xYID0gY3ggKyA2MDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTmEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZiYmYyNCc7IGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhuYVgsIGN5LCAzMCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsgY3R4LmZpbGxTdHlsZT0nIzAwMCc7IGN0eC50ZXh0QWxpZ249ImNlbnRlciI7IGN0eC5maWxsVGV4dCgiTmEiLCBuYVgsIGN5KzUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyNjY2MnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMobmFYLCBjeSwgNDUsIDAsIE1hdGguUEkqMik7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMyMmM1NWUnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoY2xYLCBjeSwgNDAsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7IGN0eC5maWxsU3R5bGU9JyMwMDAnOyBjdHguZmlsbFRleHQoIkNsIiwgY2xYLCBjeSs1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjY2NjJzsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKGNsWCwgY3ksIDU1LCAwLCBNYXRoLlBJKjIpOyBjdHguc3Ryb2tlKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRWxlY3Ryb24gVHJhbnNmZXIgQW5pbWF0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gKE1hdGguc2luKHRpbWUgKiAyKSArIDEpIC8gMjsgLy8gMCB0byAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOYSBlbGVjdHJvbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXggPSBuYVggKyA0NSAqIE1hdGguY29zKDApICogKDEtdCkgKyAoY2xYIC0gNTUpICogdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV5ID0gY3k7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzYjgyZjYnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoZXgsIGV5LCA1LCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDbCBlbGVjdHJvbnMgKDcgc3RhdGljKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTE7IGk8ODsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IGkgKiAoTWF0aC5QSSoyLzgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhjbFggKyBNYXRoLmNvcyhhKSo1NSwgY3kgKyBNYXRoLnNpbihhKSo1NSwgNSwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOyBjdHguZm9udCA9ICIxNHB4IEFyaWFsIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ID4gMC44KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJOYeKBuiIsIG5hWCwgY3kgLSA0MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJDbOKBuyIsIGNsWCwgY3kgLSA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJJb25pYyBCb25kIEZvcm1lZCEiLCBjeCwgaCAtIDIwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEggKyBICiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gKE1hdGguc2luKHRpbWUpICsgMSkgLyAyOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3QgPSA4MCAqICgxIC0gdCowLjUpOyAvLyBNb3ZlIGNsb3NlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaDFYID0gY3ggLSBkaXN0LzI7IGNvbnN0IGgyWCA9IGN4ICsgZGlzdC8yOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM5Y2EzYWYnOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhoMVgsIGN5LCAyMCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsgY3R4LmZpbGxTdHlsZT0nI2ZmZic7IGN0eC50ZXh0QWxpZ249ImNlbnRlciI7IGN0eC5maWxsVGV4dCgiSCIsIGgxWCwgY3krNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM5Y2EzYWYnOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhoMlgsIGN5LCAyMCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsgY3R4LmZpbGxTdHlsZT0nI2ZmZic7IGN0eC5maWxsVGV4dCgiSCIsIGgyWCwgY3krNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNoYXJlZCBFbGVjdHJvbnMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFuZ2xlID0gdGltZSAqIDU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlMVggPSBoMVggKyBNYXRoLmNvcyhhbmdsZSkqMzA7IGNvbnN0IGUxWSA9IGN5ICsgTWF0aC5zaW4oYW5nbGUpKjMwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZTJYID0gaDJYICsgTWF0aC5jb3MoYW5nbGUgKyBNYXRoLlBJKSozMDsgY29uc3QgZTJZID0gY3kgKyBNYXRoLnNpbihhbmdsZSArIE1hdGguUEkpKjMwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBjbG9zZSwgb3JiaXQgYm90aD8gU2ltcGxpZmllZDoganVzdCBzaG93IHRoZW0gYmV0d2VlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgPiAwLjgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzYjgyZjYnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhjeCwgY3kgLSAxMCwgNSwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoY3gsIGN5ICsgMTAsIDUsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMDAwJzsgY3R4LmZpbGxUZXh0KCJDb3ZhbGVudCBCb25kIChTaGFyaW5nKSIsIGN4LCBoIC0gMjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzYjgyZjYnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhoMVggKyAzMCwgY3ksIDUsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKGgyWCAtIDMwLCBjeSwgNSwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5tb2RlID09PSAnYmFsYW5jaW5nJykgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBIMiArIE8yIC0+IEgyTwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoQ291bnRMID0gdGhpcy5jMSAqIDI7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9Db3VudEwgPSB0aGlzLmMyICogMjsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaENvdW50UiA9IHRoaXMuYzMgKiAyOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvQ291bnRSID0gdGhpcy5jMyAqIDE7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiYWxhbmNlZCA9IChoQ291bnRMID09PSBoQ291bnRSKSAmJiAob0NvdW50TCA9PT0gb0NvdW50Uik7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IExlZnQgU2lkZQogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOyBjdHguZm9udCA9ICIxNHB4IEFyaWFsIjsgY3R4LnRleHRBbGlnbiA9ICJjZW50ZXIiOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIlJlYWN0YW50cyIsIHcvNCwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoYEg6ICR7aENvdW50TH1gLCB3LzQgLSAyMCwgNTApOyBjdHguZmlsbFRleHQoYE86ICR7b0NvdW50TH1gLCB3LzQgKyAyMCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBNb2xlY3VsZXMgTGVmdAogICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLmMxOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHggPSB3LzQgLSA0MCArIChpJTMpKjMwOyBjb25zdCB5ID0gODAgKyBNYXRoLmZsb29yKGkvMykqMzA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM5Y2EzYWYnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoeCwgeSwgOCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHgrMTAsIHksIDgsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8dGhpcy5jMjsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB4ID0gdy80ICsgNDAgKyAoaSUzKSozMDsgY29uc3QgeSA9IDgwICsgTWF0aC5mbG9vcihpLzMpKjMwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZWY0NDQ0JzsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHgsIHksIDEwLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoeCsxMiwgeSwgMTAsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyYXcgQXJyb3cKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMDAwJzsgY3R4LmZvbnQgPSAiMzBweCBBcmlhbCI7IGN0eC5maWxsVGV4dCgi4oaSIiwgY3gsIGN5KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyYXcgUmlnaHQgU2lkZQogICAgICAgICAgICAgICAgICAgICAgICBjdHguZm9udCA9ICIxNHB4IEFyaWFsIjsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJQcm9kdWN0cyIsIDMqdy80LCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dChgSDogJHtoQ291bnRSfWAsIDMqdy80IC0gMjAsIDUwKTsgY3R4LmZpbGxUZXh0KGBPOiAke29Db3VudFJ9YCwgMyp3LzQgKyAyMCwgNTApOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBNb2xlY3VsZXMgUmlnaHQKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8dGhpcy5jMzsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB4ID0gMyp3LzQgKyAoaSU0KSo0MCAtIDQwOyBjb25zdCB5ID0gODAgKyBNYXRoLmZsb29yKGkvNCkqNDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNlZjQ0NDQnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoeCwgeSwgMTAsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7IC8vIE8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzljYTNhZic7IGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyh4LTgsIHktOCwgOCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsgLy8gSAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHgrOCwgeS04LCA4LCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOyAvLyBICiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGJhbGFuY2VkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMyMmM1NWUnOyBjdHguZm9udCA9ICJib2xkIDI0cHggQXJpYWwiOyBjdHguZmlsbFRleHQoIkJBTEFOQ0VEISIsIGN4LCBoIC0gMzApOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZWY0NDQ0JzsgY3R4LmZvbnQgPSAiYm9sZCAyNHB4IEFyaWFsIjsgY3R4LmZpbGxUZXh0KCJVTkJBTEFOQ0VEIiwgY3gsIGggLSAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMubG9vcCgpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIE1PVElPTiBMQUIgU0lNVUxBVElPTgogICAgICAgICAgICBtb3Rpb25MYWI6IHsKICAgICAgICAgICAgICAgIG1vZGU6ICdraW5lbWF0aWNzJywgLy8ga2luZW1hdGljcywgZm9yY2VzLCBuZXd0b24sIGZyaWN0aW9uLCBjb20KICAgICAgICAgICAgICAgIGFuaW1JZDogbnVsbCwKICAgICAgICAgICAgICAgIC8vIEtpbmVtYXRpY3MKICAgICAgICAgICAgICAgIGNhcjogeyB4OiA1MCwgdjogMCwgYTogMCB9LAogICAgICAgICAgICAgICAgLy8gRm9yY2VzICYgRnJpY3Rpb24KICAgICAgICAgICAgICAgIGJveDogeyB4OiAyNTAsIHY6IDAsIG1hc3M6IDEwLCBmQXBwOiAwLCBmRnJpYzogMCwgbXU6IDAuMyB9LAogICAgICAgICAgICAgICAgLy8gQ2VudGVyIG9mIE1hc3MKICAgICAgICAgICAgICAgIGNvbVN5c3RlbTogeyBtMTogMTAsIG0yOiAxMCwgZGlzdDogMjAwIH0sCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHJlbmRlcjogZnVuY3Rpb24oY29udGFpbmVyKSB7CiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgaC1mdWxsIHctZnVsbCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LWxnIG1iLTIgdGV4dC1ncmF5LTcwMCI+TW90aW9uICYgRm9yY2VzIExhYjwvaDM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGZsZXgtd3JhcCBqdXN0aWZ5LWNlbnRlciBnYXAtMiBtYi00IGJnLWdyYXktMTAwIHAtMSByb3VuZGVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IlNpbXVsYXRpb25zLm1vdGlvbkxhYi5zZXRNb2RlKCdraW5lbWF0aWNzJykiIGlkPSJtbGFiLWJ0bi1raW5lbWF0aWNzIiBjbGFzcz0icHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBmb250LWJvbGQgYmctd2hpdGUgc2hhZG93IHRleHQtYmx1ZS02MDAiPktpbmVtYXRpY3M8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IlNpbXVsYXRpb25zLm1vdGlvbkxhYi5zZXRNb2RlKCdmb3JjZXMnKSIgaWQ9Im1sYWItYnRuLWZvcmNlcyIgY2xhc3M9InB4LTMgcHktMSByb3VuZGVkIHRleHQtc20gZm9udC1ib2xkIHRleHQtZ3JheS01MDAgaG92ZXI6YmctZ3JheS0yMDAiPk5ldCBGb3JjZTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iU2ltdWxhdGlvbnMubW90aW9uTGFiLnNldE1vZGUoJ25ld3RvbicpIiBpZD0ibWxhYi1idG4tbmV3dG9uIiBjbGFzcz0icHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBmb250LWJvbGQgdGV4dC1ncmF5LTUwMCBob3ZlcjpiZy1ncmF5LTIwMCI+TmV3dG9uJ3MgMm5kIExhdzwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iU2ltdWxhdGlvbnMubW90aW9uTGFiLnNldE1vZGUoJ2ZyaWN0aW9uJykiIGlkPSJtbGFiLWJ0bi1mcmljdGlvbiIgY2xhc3M9InB4LTMgcHktMSByb3VuZGVkIHRleHQtc20gZm9udC1ib2xkIHRleHQtZ3JheS01MDAgaG92ZXI6YmctZ3JheS0yMDAiPkZyaWN0aW9uPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJTaW11bGF0aW9ucy5tb3Rpb25MYWIuc2V0TW9kZSgnY29tJykiIGlkPSJtbGFiLWJ0bi1jb20iIGNsYXNzPSJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIGhvdmVyOmJnLWdyYXktMjAwIj5DZW50ZXIgb2YgTWFzczwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJyZWxhdGl2ZSB3LWZ1bGwgbWF4LXctbGcgaC02NCBiZy1ncmF5LTUwIGJvcmRlci0yIGJvcmRlci1ncmF5LTQwMCByb3VuZGVkLWxnIHNoYWRvdy1pbm5lciBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBvdmVyZmxvdy1oaWRkZW4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjYW52YXMgaWQ9Im1sYWItY2FudmFzIiB3aWR0aD0iNTAwIiBoZWlnaHQ9IjI1MCI+PC9jYW52YXM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9Im1sYWItY29udHJvbHMiIGNsYXNzPSJ3LWZ1bGwgbWF4LXctbWQgbXQtNCBiZy1ncmF5LTEwMCBwLTQgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWdyYXktMzAwIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9Im1sYWItZGVzYyIgY2xhc3M9Im10LTQgdGV4dC1zbSB0ZXh0LWdyYXktNjAwIGZvbnQtbWVkaXVtIHRleHQtY2VudGVyIG1heC13LW1kIGJnLWJsdWUtNTAgcC0yIHJvdW5kZWQgYm9yZGVyIGJvcmRlci1ibHVlLTEwMCI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRNb2RlKCdraW5lbWF0aWNzJyk7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIHNldE1vZGU6IGZ1bmN0aW9uKG0pIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGUgPSBtOwogICAgICAgICAgICAgICAgICAgIFsna2luZW1hdGljcycsICdmb3JjZXMnLCAnbmV3dG9uJywgJ2ZyaWN0aW9uJywgJ2NvbSddLmZvckVhY2goayA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBtbGFiLWJ0bi0ke2t9YCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGsgPT09IG0pIGJ0bi5jbGFzc05hbWUgPSAicHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBmb250LWJvbGQgYmctd2hpdGUgc2hhZG93IHRleHQtYmx1ZS02MDAiOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGJ0bi5jbGFzc05hbWUgPSAicHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBmb250LWJvbGQgdGV4dC1ncmF5LTUwMCBob3ZlcjpiZy1ncmF5LTIwMCI7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21sYWItY29udHJvbHMnKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXNjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21sYWItZGVzYycpOwoKICAgICAgICAgICAgICAgICAgICBpZiAobSA9PT0gJ2tpbmVtYXRpY3MnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FyID0geyB4OiA1MCwgdjogMCwgYTogMCB9OwogICAgICAgICAgICAgICAgICAgICAgICBjb250cm9scy5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGZsZXgtY29sIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktYmV0d2VlbiB0ZXh0LXhzIGZvbnQtYm9sZCI+PHNwYW4+VmVsb2NpdHk8L3NwYW4+PHNwYW4gaWQ9Im1sYWItdi12YWwiPjAgbS9zPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYW5nZSIgbWluPSIwIiBtYXg9IjEwMCIgdmFsdWU9IjAiIGNsYXNzPSJ3LWZ1bGwgYWNjZW50LWJsdWUtNjAwIiBvbmlucHV0PSJTaW11bGF0aW9ucy5tb3Rpb25MYWIuY2FyLnY9cGFyc2VJbnQodGhpcy52YWx1ZSk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtbGFiLXYtdmFsJykudGV4dENvbnRlbnQ9dGhpcy52YWx1ZSsnIG0vcyciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIHRleHQteHMgZm9udC1ib2xkIj48c3Bhbj5BY2NlbGVyYXRpb248L3NwYW4+PHNwYW4gaWQ9Im1sYWItYS12YWwiPjAgbS9zwrI8L3NwYW4+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InJhbmdlIiBtaW49Ii01IiBtYXg9IjUiIHZhbHVlPSIwIiBzdGVwPSIwLjEiIGNsYXNzPSJ3LWZ1bGwgYWNjZW50LXJlZC02MDAiIG9uaW5wdXQ9IlNpbXVsYXRpb25zLm1vdGlvbkxhYi5jYXIuYT1wYXJzZUZsb2F0KHRoaXMudmFsdWUpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWxhYi1hLXZhbCcpLnRleHRDb250ZW50PXRoaXMudmFsdWUrJyBtL3PCsiciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2MudGV4dENvbnRlbnQgPSAiS2luZW1hdGljczogT2JzZXJ2ZSBob3cgVmVsb2NpdHkgYW5kIEFjY2VsZXJhdGlvbiBhZmZlY3QgUG9zaXRpb24uIEFjY2VsZXJhdGlvbiBjaGFuZ2VzIFZlbG9jaXR5LiI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtID09PSAnZm9yY2VzJykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJveCA9IHsgeDogMjUwLCB2OiAwLCBtYXNzOiAxMCwgZkFwcDogMCwgZkZyaWM6IDAsIG11OiAwIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xzLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggZmxleC1jb2wgZ2FwLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIHRleHQteHMgZm9udC1ib2xkIj48c3Bhbj5BcHBsaWVkIEZvcmNlIChSaWdodCk8L3NwYW4+PHNwYW4gaWQ9Im1sYWItZi12YWwiPjAgTjwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIG1pbj0iMCIgbWF4PSIxMDAiIHZhbHVlPSIwIiBjbGFzcz0idy1mdWxsIGFjY2VudC1ncmVlbi02MDAiIG9uaW5wdXQ9IlNpbXVsYXRpb25zLm1vdGlvbkxhYi5ib3guZkFwcD1wYXJzZUludCh0aGlzLnZhbHVlKTsgU2ltdWxhdGlvbnMubW90aW9uTGFiLnVwZGF0ZUZvcmNlcygpIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktYmV0d2VlbiB0ZXh0LXhzIGZvbnQtYm9sZCI+PHNwYW4+T3Bwb3NpbmcgRm9yY2UgKExlZnQpPC9zcGFuPjxzcGFuIGlkPSJtbGFiLWZmLXZhbCI+MCBOPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYW5nZSIgbWluPSIwIiBtYXg9IjEwMCIgdmFsdWU9IjAiIGNsYXNzPSJ3LWZ1bGwgYWNjZW50LXJlZC02MDAiIG9uaW5wdXQ9IlNpbXVsYXRpb25zLm1vdGlvbkxhYi5ib3guZkZyaWM9cGFyc2VJbnQodGhpcy52YWx1ZSk7IFNpbXVsYXRpb25zLm1vdGlvbkxhYi51cGRhdGVGb3JjZXMoKSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgICAgICAgICAgZGVzYy50ZXh0Q29udGVudCA9ICJOZXQgRm9yY2U6IFdoZW4gZm9yY2VzIGFyZSBiYWxhbmNlZCAoTmV0IEZvcmNlID0gMCksIG1vdGlvbiBkb2Vzbid0IGNoYW5nZS4gVW5iYWxhbmNlZCBmb3JjZXMgY2F1c2UgYWNjZWxlcmF0aW9uLiI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtID09PSAnbmV3dG9uJykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJveCA9IHsgeDogMjUwLCB2OiAwLCBtYXNzOiA1LCBmQXBwOiAwLCBmRnJpYzogMCwgbXU6IDAgfTsgCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xzLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggZmxleC1jb2wgZ2FwLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIHRleHQteHMgZm9udC1ib2xkIj48c3Bhbj5NYXNzPC9zcGFuPjxzcGFuIGlkPSJtbGFiLW0tdmFsIj41IGtnPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYW5nZSIgbWluPSIxIiBtYXg9IjIwIiB2YWx1ZT0iNSIgY2xhc3M9InctZnVsbCBhY2NlbnQtcHVycGxlLTYwMCIgb25pbnB1dD0iU2ltdWxhdGlvbnMubW90aW9uTGFiLmJveC5tYXNzPXBhcnNlSW50KHRoaXMudmFsdWUpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWxhYi1tLXZhbCcpLnRleHRDb250ZW50PXRoaXMudmFsdWUrJyBrZyciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIHRleHQteHMgZm9udC1ib2xkIj48c3Bhbj5Gb3JjZTwvc3Bhbj48c3BhbiBpZD0ibWxhYi1uZi12YWwiPjAgTjwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIG1pbj0iLTUwIiBtYXg9IjUwIiB2YWx1ZT0iMCIgY2xhc3M9InctZnVsbCBhY2NlbnQtb3JhbmdlLTYwMCIgb25pbnB1dD0iU2ltdWxhdGlvbnMubW90aW9uTGFiLmJveC5mQXBwPXBhcnNlSW50KHRoaXMudmFsdWUpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWxhYi1uZi12YWwnKS50ZXh0Q29udGVudD10aGlzLnZhbHVlKycgTiciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2MudGV4dENvbnRlbnQgPSAiTmV3dG9uJ3MgMm5kIExhdyAoRj1tYSk6IEFjY2VsZXJhdGlvbiBkZXBlbmRzIG9uIEZvcmNlIGFuZCBNYXNzLiBNb3JlIEZvcmNlID0gTW9yZSBBY2NlbC4gTW9yZSBNYXNzID0gTGVzcyBBY2NlbC4iOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobSA9PT0gJ2ZyaWN0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJveCA9IHsgeDogMjUwLCB2OiAwLCBtYXNzOiAxMCwgZkFwcDogMCwgZkZyaWM6IDAsIG11OiAwLjMgfTsKICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbHMuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBmbGV4LWNvbCBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWJldHdlZW4gdGV4dC14cyBmb250LWJvbGQiPjxzcGFuPkFwcGxpZWQgRm9yY2U8L3NwYW4+PHNwYW4gaWQ9Im1sYWItZnJpYy1mLXZhbCI+MCBOPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYW5nZSIgbWluPSIwIiBtYXg9IjEwMCIgdmFsdWU9IjAiIGNsYXNzPSJ3LWZ1bGwgYWNjZW50LWdyZWVuLTYwMCIgb25pbnB1dD0iU2ltdWxhdGlvbnMubW90aW9uTGFiLmJveC5mQXBwPXBhcnNlSW50KHRoaXMudmFsdWUpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWxhYi1mcmljLWYtdmFsJykudGV4dENvbnRlbnQ9dGhpcy52YWx1ZSsnIE4nIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktYmV0d2VlbiB0ZXh0LXhzIGZvbnQtYm9sZCI+PHNwYW4+U3VyZmFjZSBSb3VnaG5lc3MgKMK1KTwvc3Bhbj48c3BhbiBpZD0ibWxhYi1tdS12YWwiPjAuMzwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIG1pbj0iMCIgbWF4PSIxIiBzdGVwPSIwLjEiIHZhbHVlPSIwLjMiIGNsYXNzPSJ3LWZ1bGwgYWNjZW50LWdyYXktNjAwIiBvbmlucHV0PSJTaW11bGF0aW9ucy5tb3Rpb25MYWIuYm94Lm11PXBhcnNlRmxvYXQodGhpcy52YWx1ZSk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtbGFiLW11LXZhbCcpLnRleHRDb250ZW50PXRoaXMudmFsdWUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2MudGV4dENvbnRlbnQgPSAiRnJpY3Rpb246IE9wcG9zZXMgbW90aW9uLiBGcmljdGlvbiBGb3JjZSA9IMK1IMOXIE5vcm1hbCBGb3JjZS4gSWYgQXBwbGllZCBGb3JjZSA+IEZyaWN0aW9uLCB0aGUgYm94IG1vdmVzLiI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtID09PSAnY29tJykgewogICAgICAgICAgICAgICAgICAgICAgICBjb250cm9scy5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGZsZXgtY29sIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktYmV0d2VlbiB0ZXh0LXhzIGZvbnQtYm9sZCI+PHNwYW4+TWFzcyAxIChMZWZ0KTwvc3Bhbj48c3BhbiBpZD0ibWxhYi1tMS12YWwiPjEwIGtnPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYW5nZSIgbWluPSIxIiBtYXg9IjUwIiB2YWx1ZT0iMTAiIGNsYXNzPSJ3LWZ1bGwgYWNjZW50LWJsdWUtNjAwIiBvbmlucHV0PSJTaW11bGF0aW9ucy5tb3Rpb25MYWIuY29tU3lzdGVtLm0xPXBhcnNlSW50KHRoaXMudmFsdWUpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWxhYi1tMS12YWwnKS50ZXh0Q29udGVudD10aGlzLnZhbHVlKycga2cnIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktYmV0d2VlbiB0ZXh0LXhzIGZvbnQtYm9sZCI+PHNwYW4+TWFzcyAyIChSaWdodCk8L3NwYW4+PHNwYW4gaWQ9Im1sYWItbTItdmFsIj4xMCBrZzwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIG1pbj0iMSIgbWF4PSI1MCIgdmFsdWU9IjEwIiBjbGFzcz0idy1mdWxsIGFjY2VudC1yZWQtNjAwIiBvbmlucHV0PSJTaW11bGF0aW9ucy5tb3Rpb25MYWIuY29tU3lzdGVtLm0yPXBhcnNlSW50KHRoaXMudmFsdWUpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWxhYi1tMi12YWwnKS50ZXh0Q29udGVudD10aGlzLnZhbHVlKycga2cnIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgICAgICAgICBkZXNjLnRleHRDb250ZW50ID0gIkNlbnRlciBvZiBNYXNzOiBUaGUgYmFsYW5jZSBwb2ludCBvZiB0aGUgc3lzdGVtLiBIZWF2aWVyIG1hc3NlcyBwdWxsIHRoZSBjZW50ZXIgb2YgbWFzcyBjbG9zZXIgdG8gdGhlbS4iOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydCgpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICB1cGRhdGVGb3JjZXM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtbGFiLWYtdmFsJykudGV4dENvbnRlbnQgPSB0aGlzLmJveC5mQXBwICsgIiBOIjsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWxhYi1mZi12YWwnKS50ZXh0Q29udGVudCA9IHRoaXMuYm94LmZGcmljICsgIiBOIjsKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuYW5pbUlkKSBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1JZCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb29wKCk7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIGxvb3A6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtbGFiLWNhbnZhcycpOwogICAgICAgICAgICAgICAgICAgIGlmKCFjYW52YXMpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCB3ID0gY2FudmFzLndpZHRoOyBjb25zdCBoID0gY2FudmFzLmhlaWdodDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBkdCA9IDAuMDE2OyAvLyBhcHByb3ggNjBmcHMKCiAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsdyxoKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gR3JvdW5kCiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZTVlN2ViJzsgY3R4LmZpbGxSZWN0KDAsIGgtNTAsIHcsIDUwKTsKICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzljYTNhZic7IGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygwLCBoLTUwKTsgY3R4LmxpbmVUbyh3LCBoLTUwKTsgY3R4LnN0cm9rZSgpOwoKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tb2RlID09PSAna2luZW1hdGljcycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHBoeXNpY3MKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXIudiArPSB0aGlzLmNhci5hICogZHQgKiAxMDsgLy8gU2NhbGUgdXAgZm9yIHZpc3VhbAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhci54ICs9IHRoaXMuY2FyLnYgKiBkdCAqIDEwOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jYXIueCA+IHcgKyA1MCkgdGhpcy5jYXIueCA9IC01MDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FyLnggPCAtNTApIHRoaXMuY2FyLnggPSB3ICsgNTA7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IENhcgogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB5ID0gaCAtIDcwOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzYjgyZjYnOyBjdHguZmlsbFJlY3QodGhpcy5jYXIueCwgeSwgNjAsIDMwKTsgLy8gQm9keQogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMxZTNhOGEnOyBjdHguZmlsbFJlY3QodGhpcy5jYXIueCArIDEwLCB5IC0gMTUsIDQwLCAxNSk7IC8vIFRvcAogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmModGhpcy5jYXIueCArIDE1LCB5ICsgMzAsIDgsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7IC8vIFdoZWVsCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyh0aGlzLmNhci54ICsgNDUsIHkgKyAzMCwgOCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsgLy8gV2hlZWwKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlY3RvcnMKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyMyMmM1NWUnOyBjdHgubGluZVdpZHRoID0gMzsgLy8gVmVsb2NpdHkKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKHRoaXMuY2FyLnggKyAzMCwgeSAtIDI1KTsgY3R4LmxpbmVUbyh0aGlzLmNhci54ICsgMzAgKyB0aGlzLmNhci52LCB5IC0gMjUpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKE1hdGguYWJzKHRoaXMuY2FyLnYpID4gMSkgeyBjdHguZmlsbFN0eWxlPScjMjJjNTVlJzsgY3R4LmJlZ2luUGF0aCgpOyBjdHgubGluZVRvKHRoaXMuY2FyLnggKyAzMCArIHRoaXMuY2FyLnYsIHkgLSAyNSk7IGN0eC5saW5lVG8odGhpcy5jYXIueCArIDMwICsgdGhpcy5jYXIudiAtIDUgKiBNYXRoLnNpZ24odGhpcy5jYXIudiksIHkgLSAzMCk7IGN0eC5saW5lVG8odGhpcy5jYXIueCArIDMwICsgdGhpcy5jYXIudiAtIDUgKiBNYXRoLnNpZ24odGhpcy5jYXIudiksIHkgLSAyMCk7IGN0eC5maWxsKCk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjZWY0NDQ0JzsgY3R4LmxpbmVXaWR0aCA9IDM7IC8vIEFjY2VsZXJhdGlvbgogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8odGhpcy5jYXIueCArIDMwLCB5IC0gNDApOyBjdHgubGluZVRvKHRoaXMuY2FyLnggKyAzMCArIHRoaXMuY2FyLmEgKiAyMCwgeSAtIDQwKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihNYXRoLmFicyh0aGlzLmNhci5hKSA+IDAuMSkgeyBjdHguZmlsbFN0eWxlPScjZWY0NDQ0JzsgY3R4LmJlZ2luUGF0aCgpOyBjdHgubGluZVRvKHRoaXMuY2FyLnggKyAzMCArIHRoaXMuY2FyLmEgKiAyMCwgeSAtIDQwKTsgY3R4LmxpbmVUbyh0aGlzLmNhci54ICsgMzAgKyB0aGlzLmNhci5hICogMjAgLSA1ICogTWF0aC5zaWduKHRoaXMuY2FyLmEpLCB5IC0gNDUpOyBjdHgubGluZVRvKHRoaXMuY2FyLnggKyAzMCArIHRoaXMuY2FyLmEgKiAyMCAtIDUgKiBNYXRoLnNpZ24odGhpcy5jYXIuYSksIHkgLSAzNSk7IGN0eC5maWxsKCk7IH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzAwMCc7IGN0eC5mb250ID0gIjEycHggQXJpYWwiOyBjdHguZmlsbFRleHQoInYiLCB0aGlzLmNhci54ICsgMzAsIHkgLSAxNSk7IGN0eC5maWxsVGV4dCgiYSIsIHRoaXMuY2FyLnggKyAzMCwgeSAtIDQ1KTsKCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm1vZGUgPT09ICdmb3JjZXMnIHx8IHRoaXMubW9kZSA9PT0gJ25ld3RvbicgfHwgdGhpcy5tb2RlID09PSAnZnJpY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBoeXNpY3MKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ldEZvcmNlID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gJ2ZvcmNlcycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldEZvcmNlID0gdGhpcy5ib3guZkFwcCAtIHRoaXMuYm94LmZGcmljOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMubW9kZSA9PT0gJ2ZyaWN0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGZyaWN0aW9uIGJhc2VkIG9uIE5vcm1hbCBmb3JjZSAobWcpIGFuZCBtdQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZyA9IDkuODsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vcm1hbEZvcmNlID0gdGhpcy5ib3gubWFzcyAqIGc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXhGcmljdGlvbiA9IHRoaXMuYm94Lm11ICogbm9ybWFsRm9yY2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpbXBsZSBzdGF0aWMva2luZXRpYyBtb2RlbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMuYm94LnYpIDwgMC4xICYmIHRoaXMuYm94LmZBcHAgPD0gbWF4RnJpY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJveC5mRnJpYyA9IHRoaXMuYm94LmZBcHA7IC8vIFN0YXRpYyBmcmljdGlvbiBtYXRjaGVzIGFwcGxpZWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXRGb3JjZSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ib3gudiA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYm94LmZGcmljID0gbWF4RnJpY3Rpb247IC8vIEtpbmV0aWMgZnJpY3Rpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXRGb3JjZSA9IHRoaXMuYm94LmZBcHAgLSB0aGlzLmJveC5mRnJpYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldEZvcmNlID0gdGhpcy5ib3guZkFwcDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWNjZWwgPSBuZXRGb3JjZSAvIHRoaXMuYm94Lm1hc3M7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYm94LnYgKz0gYWNjZWwgKiBkdDsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ib3gudiAqPSAwLjk4OyAvLyBGcmljdGlvbi9EYW1waW5nIGZvciBzdGFiaWxpdHkgaW4gc2ltCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYm94LnggKz0gdGhpcy5ib3gudiAqIGR0ICogMTA7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ib3gueCA+IHcgLSA1MCkgeyB0aGlzLmJveC54ID0gdyAtIDUwOyB0aGlzLmJveC52ICo9IC0wLjU7IH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYm94LnggPCAwKSB7IHRoaXMuYm94LnggPSAwOyB0aGlzLmJveC52ICo9IC0wLjU7IH0KCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyYXcgQm94CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBoIC0gMTAwOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaXplID0gNTAgKyB0aGlzLmJveC5tYXNzICogMjsgLy8gU2l6ZSBiYXNlZCBvbiBtYXNzCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2Q5NzcwNic7IGN0eC5maWxsUmVjdCh0aGlzLmJveC54LCBoIC0gNTAgLSBzaXplLCBzaXplLCBzaXplKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyM3ODM1MGYnOyBjdHguc3Ryb2tlUmVjdCh0aGlzLmJveC54LCBoIC0gNTAgLSBzaXplLCBzaXplLCBzaXplKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsgY3R4LmZvbnQgPSAiMTRweCBBcmlhbCI7IGN0eC50ZXh0QWxpZ24gPSAiY2VudGVyIjsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KHRoaXMuYm94Lm1hc3MgKyAia2ciLCB0aGlzLmJveC54ICsgc2l6ZS8yLCBoIC0gNTAgLSBzaXplLzIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBGb3JjZSBWZWN0b3JzCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN4ID0gdGhpcy5ib3gueCArIHNpemUvMjsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3kgPSBoIC0gNTAgLSBzaXplLzI7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tb2RlID09PSAnZm9yY2VzJyB8fCB0aGlzLm1vZGUgPT09ICdmcmljdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFwcGxpZWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJveC5mQXBwID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjMjJjNTVlJzsgY3R4LmxpbmVXaWR0aCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKGN4ICsgc2l6ZS8yLCBjeSk7IGN0eC5saW5lVG8oY3ggKyBzaXplLzIgKyB0aGlzLmJveC5mQXBwLCBjeSk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMyMmM1NWUnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5saW5lVG8oY3ggKyBzaXplLzIgKyB0aGlzLmJveC5mQXBwLCBjeSk7IGN0eC5saW5lVG8oY3ggKyBzaXplLzIgKyB0aGlzLmJveC5mQXBwIC0gNSwgY3kgLSA1KTsgY3R4LmxpbmVUbyhjeCArIHNpemUvMiArIHRoaXMuYm94LmZBcHAgLSA1LCBjeSArIDUpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRnJpY3Rpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJveC5mRnJpYyA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI2VmNDQ0NCc7IGN0eC5saW5lV2lkdGggPSA0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyhjeCAtIHNpemUvMiwgY3kpOyBjdHgubGluZVRvKGN4IC0gc2l6ZS8yIC0gdGhpcy5ib3guZkZyaWMsIGN5KTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2VmNDQ0NCc7IGN0eC5iZWdpblBhdGgoKTsgY3R4LmxpbmVUbyhjeCAtIHNpemUvMiAtIHRoaXMuYm94LmZGcmljLCBjeSk7IGN0eC5saW5lVG8oY3ggLSBzaXplLzIgLSB0aGlzLmJveC5mRnJpYyArIDUsIGN5IC0gNSk7IGN0eC5saW5lVG8oY3ggLSBzaXplLzIgLSB0aGlzLmJveC5mRnJpYyArIDUsIGN5ICsgNSk7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOZXd0b24gbW9kZSAoc2luZ2xlIGZvcmNlIHZlY3RvcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLmJveC5mQXBwKSA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI2Y5NzMxNic7IGN0eC5saW5lV2lkdGggPSA0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpciA9IE1hdGguc2lnbih0aGlzLmJveC5mQXBwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsZW4gPSBNYXRoLmFicyh0aGlzLmJveC5mQXBwKSAqIDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRYID0gZGlyID4gMCA/IGN4ICsgc2l6ZS8yIDogY3ggLSBzaXplLzI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKHN0YXJ0WCwgY3kpOyBjdHgubGluZVRvKHN0YXJ0WCArIGxlbiAqIGRpciwgY3kpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZjk3MzE2JzsgY3R4LmJlZ2luUGF0aCgpOyBjdHgubGluZVRvKHN0YXJ0WCArIGxlbiAqIGRpciwgY3kpOyBjdHgubGluZVRvKHN0YXJ0WCArIGxlbiAqIGRpciAtIDUgKiBkaXIsIGN5IC0gNSk7IGN0eC5saW5lVG8oc3RhcnRYICsgbGVuICogZGlyIC0gNSAqIGRpciwgY3kgKyA1KTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gTmV0IEZvcmNlIC8gQWNjZWwgVGV4dAogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOyBjdHguZm9udCA9ICIxNnB4IEFyaWFsIjsgY3R4LnRleHRBbGlnbiA9ICJjZW50ZXIiOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoYE5ldCBGb3JjZTogJHtuZXRGb3JjZX0gTmAsIHcvMiwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoYEFjY2VsOiAke2FjY2VsLnRvRml4ZWQoMil9IG0vc8KyYCwgdy8yLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdmcmljdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5mb250ID0gIjEycHggQXJpYWwiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGBGcmljdGlvbiBDb2VmZiAowrUpOiAke3RoaXMuYm94Lm11fWAsIHcvMiwgNzApOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm1vZGUgPT09ICdjb20nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG0xID0gdGhpcy5jb21TeXN0ZW0ubTE7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG0yID0gdGhpcy5jb21TeXN0ZW0ubTI7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3QgPSB0aGlzLmNvbVN5c3RlbS5kaXN0OwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjeCA9IHcvMjsgY29uc3QgY3kgPSBoLzI7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgQ09NIHJlbGF0aXZlIHRvIG0xCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHhfY29tID0gKG0xKjAgKyBtMipkaXN0KSAvIChtMSttMikKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tWF9yZWwgPSAobTIgKiBkaXN0KSAvIChtMSArIG0yKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyYXcgU2Vlc2F3IGxpbmUKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRYID0gY3ggLSBkaXN0LzI7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZFggPSBjeCArIGRpc3QvMjsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyM0YjU1NjMnOyBjdHgubGluZVdpZHRoID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKHN0YXJ0WCwgY3kpOyBjdHgubGluZVRvKGVuZFgsIGN5KTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBNYXNzZXMKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcjEgPSAxMCArIG0xOyBjb25zdCByMiA9IDEwICsgbTI7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzNiODJmNic7IGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhzdGFydFgsIGN5IC0gcjEsIHIxLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOyBjdHguZmlsbFN0eWxlPScjZmZmJzsgY3R4LmZvbnQ9IjEycHggQXJpYWwiOyBjdHgudGV4dEFsaWduPSJjZW50ZXIiOyBjdHguZmlsbFRleHQobTEsIHN0YXJ0WCwgY3kgLSByMSArIDQpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNlZjQ0NDQnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoZW5kWCwgY3kgLSByMiwgcjIsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7IGN0eC5maWxsU3R5bGU9JyNmZmYnOyBjdHguZmlsbFRleHQobTIsIGVuZFgsIGN5IC0gcjIgKyA0KTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyYXcgQ09NIEluZGljYXRvcgogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhYnNDb21YID0gc3RhcnRYICsgY29tWF9yZWw7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzIyYzU1ZSc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyhhYnNDb21YLCBjeSk7IGN0eC5saW5lVG8oYWJzQ29tWCAtIDEwLCBjeSArIDIwKTsgY3R4LmxpbmVUbyhhYnNDb21YICsgMTAsIGN5ICsgMjApOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOyBjdHguZm9udCA9ICJib2xkIDE0cHggQXJpYWwiOyBjdHguZmlsbFRleHQoIkNlbnRlciBvZiBNYXNzIiwgYWJzQ29tWCwgY3kgKyA0MCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB0aGlzLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmxvb3AoKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyBGT1JDRVMgTEFCIFNJTVVMQVRJT04KICAgICAgICAgICAgZm9yY2VzTGFiOiB7CiAgICAgICAgICAgICAgICBtb2RlOiAnYmVybm91bGxpJywgLy8gYmVybm91bGxpLCBoeWRyYXVsaWNzLCBmbHVpZFByZXNzdXJlCiAgICAgICAgICAgICAgICBhbmltSWQ6IG51bGwsCiAgICAgICAgICAgICAgICAvLyBCZXJub3VsbGkKICAgICAgICAgICAgICAgIGZsb3dSYXRlOiA1LAogICAgICAgICAgICAgICAgcGFydGljbGVzOiBbXSwKICAgICAgICAgICAgICAgIC8vIEh5ZHJhdWxpY3MKICAgICAgICAgICAgICAgIGlucHV0Rm9yY2U6IDEwLAogICAgICAgICAgICAgICAgYXJlYVJhdGlvOiA0LAogICAgICAgICAgICAgICAgLy8gRmx1aWQKICAgICAgICAgICAgICAgIGhvbGVzOiBbXSwKCiAgICAgICAgICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKGNvbnRhaW5lcikgewogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGgtZnVsbCB3LWZ1bGwiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJmb250LWJvbGQgdGV4dC1sZyBtYi0yIHRleHQtZ3JheS03MDAiPkFwcGxpZWQgRm9yY2VzIExhYjwvaDM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGdhcC0yIG1iLTQgYmctZ3JheS0xMDAgcC0xIHJvdW5kZWQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iU2ltdWxhdGlvbnMuZm9yY2VzTGFiLnNldE1vZGUoJ2Jlcm5vdWxsaScpIiBpZD0iZmxhYi1idG4tYmVybm91bGxpIiBjbGFzcz0icHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBmb250LWJvbGQgYmctd2hpdGUgc2hhZG93IHRleHQtYmx1ZS02MDAiPkJlcm5vdWxsaTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iU2ltdWxhdGlvbnMuZm9yY2VzTGFiLnNldE1vZGUoJ2h5ZHJhdWxpY3MnKSIgaWQ9ImZsYWItYnRuLWh5ZHJhdWxpY3MiIGNsYXNzPSJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIGhvdmVyOmJnLWdyYXktMjAwIj5IeWRyYXVsaWMgTGlmdDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iU2ltdWxhdGlvbnMuZm9yY2VzTGFiLnNldE1vZGUoJ2ZsdWlkUHJlc3N1cmUnKSIgaWQ9ImZsYWItYnRuLWZsdWlkUHJlc3N1cmUiIGNsYXNzPSJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIGhvdmVyOmJnLWdyYXktMjAwIj5GbHVpZCBQcmVzc3VyZTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJyZWxhdGl2ZSB3LWZ1bGwgbWF4LXctbGcgaC02NCBiZy1ncmF5LTUwIGJvcmRlci0yIGJvcmRlci1ncmF5LTQwMCByb3VuZGVkLWxnIHNoYWRvdy1pbm5lciBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBvdmVyZmxvdy1oaWRkZW4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjYW52YXMgaWQ9ImZsYWItY2FudmFzIiB3aWR0aD0iNTAwIiBoZWlnaHQ9IjI1MCI+PC9jYW52YXM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImZsYWItY29udHJvbHMiIGNsYXNzPSJ3LWZ1bGwgbWF4LXctbWQgbXQtNCBiZy1ncmF5LTEwMCBwLTQgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWdyYXktMzAwIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImZsYWItZGVzYyIgY2xhc3M9Im10LTQgdGV4dC1zbSB0ZXh0LWdyYXktNjAwIGZvbnQtbWVkaXVtIHRleHQtY2VudGVyIG1heC13LW1kIGJnLWJsdWUtNTAgcC0yIHJvdW5kZWQgYm9yZGVyIGJvcmRlci1ibHVlLTEwMCI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRNb2RlKCdiZXJub3VsbGknKTsKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgc2V0TW9kZTogZnVuY3Rpb24obSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMubW9kZSA9IG07CiAgICAgICAgICAgICAgICAgICAgWydiZXJub3VsbGknLCAnaHlkcmF1bGljcycsICdmbHVpZFByZXNzdXJlJ10uZm9yRWFjaChrID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGZsYWItYnRuLSR7a31gKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoayA9PT0gbSkgYnRuLmNsYXNzTmFtZSA9ICJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCBiZy13aGl0ZSBzaGFkb3cgdGV4dC1ibHVlLTYwMCI7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgYnRuLmNsYXNzTmFtZSA9ICJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIGhvdmVyOmJnLWdyYXktMjAwIjsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udHJvbHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmxhYi1jb250cm9scycpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlc2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmxhYi1kZXNjJyk7CgogICAgICAgICAgICAgICAgICAgIGlmIChtID09PSAnYmVybm91bGxpJykgewogICAgICAgICAgICAgICAgICAgICAgICBjb250cm9scy5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGZsZXgtY29sIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktYmV0d2VlbiB0ZXh0LXhzIGZvbnQtYm9sZCI+PHNwYW4+RmxvdyBSYXRlPC9zcGFuPjxzcGFuIGlkPSJmbGFiLWZsb3ctdmFsIj4ke3RoaXMuZmxvd1JhdGV9IEwvczwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIG1pbj0iMSIgbWF4PSIxMCIgdmFsdWU9IiR7dGhpcy5mbG93UmF0ZX0iIGNsYXNzPSJ3LWZ1bGwgYWNjZW50LWJsdWUtNjAwIiBvbmlucHV0PSJTaW11bGF0aW9ucy5mb3JjZXNMYWIuZmxvd1JhdGU9cGFyc2VJbnQodGhpcy52YWx1ZSk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmbGFiLWZsb3ctdmFsJykudGV4dENvbnRlbnQ9dGhpcy52YWx1ZSsnIEwvcyciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2MudGV4dENvbnRlbnQgPSAiQmVybm91bGxpJ3MgUHJpbmNpcGxlOiBBcyBmbHVpZCBzcGVlZCBpbmNyZWFzZXMsIHByZXNzdXJlIGRlY3JlYXNlcy4gT2JzZXJ2ZSBsb3dlciBwcmVzc3VyZSAobG93ZXIgZ2F1Z2UpIGluIHRoZSBuYXJyb3cgc2VjdGlvbiB3aGVyZSBmbHVpZCBtb3ZlcyBmYXN0ZXIuIjsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJ0aWNsZXMgPSBbXTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG0gPT09ICdoeWRyYXVsaWNzJykgewogICAgICAgICAgICAgICAgICAgICAgICBjb250cm9scy5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGZsZXgtY29sIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktYmV0d2VlbiB0ZXh0LXhzIGZvbnQtYm9sZCI+PHNwYW4+SW5wdXQgRm9yY2U8L3NwYW4+PHNwYW4gaWQ9ImZsYWItZm9yY2UtdmFsIj4ke3RoaXMuaW5wdXRGb3JjZX0gTjwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIG1pbj0iNSIgbWF4PSI1MCIgdmFsdWU9IiR7dGhpcy5pbnB1dEZvcmNlfSIgY2xhc3M9InctZnVsbCBhY2NlbnQtZ3JlZW4tNjAwIiBvbmlucHV0PSJTaW11bGF0aW9ucy5mb3JjZXNMYWIuaW5wdXRGb3JjZT1wYXJzZUludCh0aGlzLnZhbHVlKTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZsYWItZm9yY2UtdmFsJykudGV4dENvbnRlbnQ9dGhpcy52YWx1ZSsnIE4nIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktYmV0d2VlbiB0ZXh0LXhzIGZvbnQtYm9sZCI+PHNwYW4+QXJlYSBSYXRpbyAoQTIvQTEpPC9zcGFuPjxzcGFuIGlkPSJmbGFiLXJhdGlvLXZhbCI+JHt0aGlzLmFyZWFSYXRpb314PC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYW5nZSIgbWluPSIyIiBtYXg9IjEwIiB2YWx1ZT0iJHt0aGlzLmFyZWFSYXRpb30iIGNsYXNzPSJ3LWZ1bGwgYWNjZW50LW9yYW5nZS02MDAiIG9uaW5wdXQ9IlNpbXVsYXRpb25zLmZvcmNlc0xhYi5hcmVhUmF0aW89cGFyc2VJbnQodGhpcy52YWx1ZSk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmbGFiLXJhdGlvLXZhbCcpLnRleHRDb250ZW50PXRoaXMudmFsdWUrJ3gnIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgICAgICAgICBkZXNjLnRleHRDb250ZW50ID0gIlBhc2NhbCdzIFByaW5jaXBsZTogUHJlc3N1cmUgKEYvQSkgaXMgY29uc3RhbnQgaW4gdGhlIGZsdWlkLiBBIHNtYWxsIGZvcmNlIG9uIGEgc21hbGwgYXJlYSBjcmVhdGVzIGEgbGFyZ2UgZm9yY2Ugb24gYSBsYXJnZSBhcmVhLiI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtID09PSAnZmx1aWRQcmVzc3VyZScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ob2xlcyA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICBjb250cm9scy5pbm5lckhUTUwgPSBgPGJ1dHRvbiBvbmNsaWNrPSJTaW11bGF0aW9ucy5mb3JjZXNMYWIuaG9sZXM9W10iIGNsYXNzPSJ3LWZ1bGwgYmctZ3JheS0yMDAgaG92ZXI6YmctZ3JheS0zMDAgcHktMiByb3VuZGVkIGZvbnQtYm9sZCB0ZXh0LXNtIj5DbGVhciBIb2xlczwvYnV0dG9uPmA7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2MudGV4dENvbnRlbnQgPSAiRmx1aWQgUHJlc3N1cmUgaW5jcmVhc2VzIHdpdGggZGVwdGguIENsaWNrIG9uIHRoZSB0YW5rIHRvIHBva2UgYSBob2xlIGFuZCBzZWUgaG93IGZhc3QgdGhlIHdhdGVyIHNob290cyBvdXQuIjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQoKTsKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuYW5pbUlkKSBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1JZCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb29wKCk7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIGxvb3A6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmbGFiLWNhbnZhcycpOwogICAgICAgICAgICAgICAgICAgIGlmKCFjYW52YXMpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCB3ID0gY2FudmFzLndpZHRoOyBjb25zdCBoID0gY2FudmFzLmhlaWdodDsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCx3LGgpOwogICAgICAgICAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAiY2VudGVyIjsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gJ2Jlcm5vdWxsaScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3kgPSBoLzI7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdldFBpcGVIZWlnaHQgPSAoeCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHggPCAxNTApIHJldHVybiAxMDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeCA8IDIwMCkgcmV0dXJuIDEwMCAtICg2MCAqICh4LTE1MCkvNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHggPCAzMDApIHJldHVybiA0MDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4IDwgMzUwKSByZXR1cm4gNDAgKyAoNjAgKiAoeC0zMDApLzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxMDA7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IFBpcGUKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZTBmMmZlJzsgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDAsIGN5IC0gNTApOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHg9MDsgeDw9dzsgeCs9MTApIGN0eC5saW5lVG8oeCwgY3kgLSBnZXRQaXBlSGVpZ2h0KHgpLzIpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKHcsIGN5ICsgNTApOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHg9dzsgeD49MDsgeC09MTApIGN0eC5saW5lVG8oeCwgY3kgKyBnZXRQaXBlSGVpZ2h0KHgpLzIpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7IGN0eC5maWxsKCk7IGN0eC5zdHJva2VTdHlsZSA9ICcjMzc0MTUxJzsgY3R4LmxpbmVXaWR0aCA9IDM7IGN0eC5zdHJva2UoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBhcnRpY2xlcwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJ0aWNsZXMubGVuZ3RoIDwgNTApIHRoaXMucGFydGljbGVzLnB1c2goe3g6IE1hdGgucmFuZG9tKCkqdywgeTogKE1hdGgucmFuZG9tKCktMC41KX0pOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzYjgyZjYnOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnRpY2xlcy5mb3JFYWNoKHAgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaHggPSBnZXRQaXBlSGVpZ2h0KHAueCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGVlZCA9ICh0aGlzLmZsb3dSYXRlICogMjApIC8gaHg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnggKz0gc3BlZWQ7IGlmIChwLnggPiB3KSBwLnggPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHkgPSBjeSArIHAueSAqIGh4ICogMC44OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHAueCwgcHksIDMsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2F1Z2VzCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRyYXdHYXVnZSA9ICh4LCBsYWJlbCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaHggPSBnZXRQaXBlSGVpZ2h0KHgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlZWQgPSAodGhpcy5mbG93UmF0ZSAqIDIwKSAvIGh4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBbmNob3IgcHJlc3N1cmUgYXQgaW5sZXQgKHdpZGUgc2VjdGlvbikgdG8gYmUgMS4wIChIaWdoIFApIGJ5IHVzaW5nIHJlbGF0aXZlIHZlbG9jaXR5IHNxdWFyZWQuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoSW5sZXQgPSAxMDA7IC8vIEhlaWdodCBvZiB0aGUgd2lkZSBpbnB1dC9vdXRwdXQgc2VjdGlvbnMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwZWVkSW5sZXQgPSAodGhpcy5mbG93UmF0ZSAqIDIwKSAvIGhJbmxldDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGsgPSAwLjA0MzsgLy8gQSBjb25zdGFudCBzY2FsZWQgdG8gbWFrZSB0aGUgcHJlc3N1cmUgaW4gdGhlIHRocm9hdCBkcm9wIHRvIH4wLjEgYXQgbWF4IGZsb3cKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXNzdXJlID0gTWF0aC5tYXgoMC4xLCBNYXRoLm1pbigxLjAsIDEuMCAtIChNYXRoLnBvdyhzcGVlZCwgMikgLSBNYXRoLnBvdyhzcGVlZElubGV0LCAyKSkgKiBrKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGd5ID0gY3kgLSBoeC8yOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjOWNhM2FmJzsgY3R4LmZpbGxSZWN0KHgtNSwgZ3ktNDAsIDEwLCA0MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoeCwgZ3ktNDAsIDIwLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbFN0eWxlPScjZmZmJzsgY3R4LmZpbGwoKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYW5nbGUgPSBNYXRoLlBJICsgcHJlc3N1cmUgKiBNYXRoLlBJOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyNlZjQ0NDQnOyBjdHgubGluZVdpZHRoID0gMjsgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKHgsIGd5LTQwKTsgY3R4LmxpbmVUbyh4ICsgTWF0aC5jb3MoYW5nbGUpKjE1LCBneS00MCArIE1hdGguc2luKGFuZ2xlKSoxNSk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzAwMCc7IGN0eC5mb250ID0gJzEwcHggQXJpYWwnOyBjdHguZmlsbFRleHQobGFiZWwsIHgsIGd5IC0gNjUpOyBjdHguZmlsbFRleHQocHJlc3N1cmUgPCAwLjUgPyAiTG93IFAiIDogIkhpZ2ggUCIsIHgsIGd5IC0gMzApOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBkcmF3R2F1Z2UoMjUwLCAiTmFycm93Iik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm1vZGUgPT09ICdoeWRyYXVsaWNzJykgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwMUFyZWEgPSAyMDsgY29uc3QgcDJBcmVhID0gcDFBcmVhICogdGhpcy5hcmVhUmF0aW87IGNvbnN0IHAxUmFkaXVzID0gTWF0aC5zcXJ0KHAxQXJlYSAvIE1hdGguUEkpICogNTsgY29uc3QgcDJSYWRpdXMgPSBNYXRoLnNxcnQocDJBcmVhIC8gTWF0aC5QSSkgKiA1OwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwMVggPSAxNTA7IGNvbnN0IHAyWCA9IDM1MDsgY29uc3QgcHJlc3N1cmUgPSB0aGlzLmlucHV0Rm9yY2UgLyBwMUFyZWE7IGNvbnN0IG91dHB1dEZvcmNlID0gcHJlc3N1cmUgKiBwMkFyZWE7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHAxWSA9IDE2MCArICg1MCAtIHRoaXMuaW5wdXRGb3JjZSk7IGNvbnN0IHAyWSA9IDE2MCAtIChvdXRwdXRGb3JjZSAvIHRoaXMuYXJlYVJhdGlvKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjYmZkYmZlJzsgY3R4LmZpbGxSZWN0KHAxWCAtIHAxUmFkaXVzLCBwMVksIHAxUmFkaXVzKjIsIGggLSBwMVkpOyBjdHguZmlsbFJlY3QocDJYIC0gcDJSYWRpdXMsIHAyWSwgcDJSYWRpdXMqMiwgaCAtIHAyWSk7IGN0eC5maWxsUmVjdChwMVggKyBwMVJhZGl1cywgaCAtIDQwLCBwMlggLSBwMVggLSBwMlJhZGl1cyAtIHAxUmFkaXVzLCA0MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzZiNzI4MCc7IGN0eC5maWxsUmVjdChwMVggLSBwMVJhZGl1cywgcDFZIC0gMTAsIHAxUmFkaXVzKjIsIDEwKTsgY3R4LmZpbGxSZWN0KHAyWCAtIHAyUmFkaXVzLCBwMlkgLSAxMCwgcDJSYWRpdXMqMiwgMTApOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmU2NhbGUgPSAwLjEyOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzE2YTM0YSc7IGN0eC5saW5lV2lkdGggPSAzOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8ocDFYLCBwMVkgLSAxNSk7IGN0eC5saW5lVG8ocDFYLCBwMVkgLSAxNSAtIHRoaXMuaW5wdXRGb3JjZSAqIGZTY2FsZSk7IGN0eC5zdHJva2UoKTsgY3R4LmZpbGxTdHlsZSA9ICcjMTZhMzRhJzsgY3R4LmZpbGxUZXh0KGAke3RoaXMuaW5wdXRGb3JjZX0gTmAsIHAxWCwgcDFZIC0gMjAgLSB0aGlzLmlucHV0Rm9yY2UgKiBmU2NhbGUpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI2VmNDQ0NCc7IGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyhwMlgsIHAyWSAtIDE1KTsgY3R4LmxpbmVUbyhwMlgsIHAyWSAtIDE1IC0gb3V0cHV0Rm9yY2UgKiBmU2NhbGUpOyBjdHguc3Ryb2tlKCk7IGN0eC5maWxsU3R5bGUgPSAnI2VmNDQ0NCc7IGN0eC5maWxsVGV4dChgJHtvdXRwdXRGb3JjZS50b0ZpeGVkKDApfSBOYCwgcDJYLCBwMlkgLSAyMCAtIG91dHB1dEZvcmNlICogZlNjYWxlKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMubW9kZSA9PT0gJ2ZsdWlkUHJlc3N1cmUnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhbmtXID0gMTAwOyBjb25zdCB0YW5rSCA9IDEyMDsgY29uc3QgdGFua1ggPSAodyAtIHRhbmtXKS81OyBjb25zdCB0YW5rWSA9IDMwOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNiZmRiZmUnOyBjdHguZmlsbFJlY3QodGFua1gsIHRhbmtZLCB0YW5rVywgdGFua0gpOyBjdHguc3Ryb2tlU3R5bGUgPSAnIzM3NDE1MSc7IGN0eC5saW5lV2lkdGggPSAyOyBjdHguc3Ryb2tlUmVjdCh0YW5rWCwgdGFua1ksIHRhbmtXLCB0YW5rSCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5vbmNsaWNrID0gKGUpID0+IHsgaWYgKHRoaXMubW9kZSAhPT0gJ2ZsdWlkUHJlc3N1cmUnKSByZXR1cm47IGNvbnN0IHJlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7IGNvbnN0IG14ID0gZS5jbGllbnRYIC0gcmVjdC5sZWZ0OyBjb25zdCBteSA9IGUuY2xpZW50WSAtIHJlY3QudG9wOyBpZiAobXggPiB0YW5rWCAmJiBteCA8IHRhbmtYICsgdGFua1cgJiYgbXkgPiB0YW5rWSAmJiBteSA8IHRhbmtZICsgdGFua0gpIHsgdGhpcy5ob2xlcy5wdXNoKHt5OiBteX0pOyB9IH07CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBEYXRlLm5vdygpIC8gMTAwOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhvbGVzLmZvckVhY2goaG9sZSA9PiB7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVwdGggPSBob2xlLnkgLSB0YW5rWTsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2ZWxvY2l0eSA9IE1hdGguc3FydChkZXB0aCAqIDAuNSkgKiAyOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPDIwOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gKHRpbWUgKyBpICogMS41KSAlIDMwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVhbVggPSB0YW5rWCArIHRhbmtXICsgdmVsb2NpdHkgKiB0OyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW1ZID0gaG9sZS55ICsgMC41ICogOS44ICogdCAqIHQgKiAwLjE7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHN0cmVhbVkgPCBoICYmIHN0cmVhbVggPCB3KSB7IGN0eC5maWxsU3R5bGUgPSAnIzNiODJmNic7IGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhzdHJlYW1YLCBzdHJlYW1ZLCAzLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmxvb3AoKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyBORVdUT04gTEFCIFNJTVVMQVRJT04KICAgICAgICAgICAgbmV3dG9uTGFiOiB7CiAgICAgICAgICAgICAgICBtb2RlOiAnaW5lcnRpYScsIC8vIGluZXJ0aWEsIHNlY29uZExhdywgdGhpcmRMYXcsIGdyYXZpdHkKICAgICAgICAgICAgICAgIGFuaW1JZDogbnVsbCwKICAgICAgICAgICAgICAgIC8vIEluZXJ0aWEKICAgICAgICAgICAgICAgIHB1Y2s6IHsgeDogNTAsIHY6IDAgfSwKICAgICAgICAgICAgICAgIGZyaWN0aW9uOiBmYWxzZSwKICAgICAgICAgICAgICAgIC8vIDJuZCBMYXcKICAgICAgICAgICAgICAgIHJvY2tldDogeyB5OiAyMDAsIHY6IDAsIGE6IDAsIG1hc3M6IDUsIGZvcmNlOiAwIH0sCiAgICAgICAgICAgICAgICAvLyAzcmQgTGF3CiAgICAgICAgICAgICAgICBjYW5ub246IHsgeDogMjAwLCB2OiAwLCBtOiAxMDAgfSwKICAgICAgICAgICAgICAgIGJhbGw6IHsgeDogMjAwLCB2OiAwLCBtOiAxMCB9LAogICAgICAgICAgICAgICAgZmlyZWQ6IGZhbHNlLAogICAgICAgICAgICAgICAgLy8gR3Jhdml0eQogICAgICAgICAgICAgICAgZHJvcFk6IDUwLCBkcm9wVjogMCwgdmFjdXVtOiBmYWxzZSwgZHJvcHBpbmc6IGZhbHNlLAoKICAgICAgICAgICAgICAgIHJlbmRlcjogZnVuY3Rpb24oY29udGFpbmVyKSB7CiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgaC1mdWxsIHctZnVsbCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LWxnIG1iLTIgdGV4dC1ncmF5LTcwMCI+TmV3dG9uJ3MgTGF3cyBMYWI8L2gzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBmbGV4LXdyYXAganVzdGlmeS1jZW50ZXIgZ2FwLTIgbWItNCBiZy1ncmF5LTEwMCBwLTEgcm91bmRlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJTaW11bGF0aW9ucy5uZXd0b25MYWIuc2V0TW9kZSgnaW5lcnRpYScpIiBpZD0ibmwtYnRuLWluZXJ0aWEiIGNsYXNzPSJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCBiZy13aGl0ZSBzaGFkb3cgdGV4dC1ibHVlLTYwMCI+SW5lcnRpYSAoMXN0IExhdyk8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IlNpbXVsYXRpb25zLm5ld3RvbkxhYi5zZXRNb2RlKCdzZWNvbmRMYXcnKSIgaWQ9Im5sLWJ0bi1zZWNvbmRMYXciIGNsYXNzPSJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIGhvdmVyOmJnLWdyYXktMjAwIj5GPW1hICgybmQgTGF3KTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iU2ltdWxhdGlvbnMubmV3dG9uTGFiLnNldE1vZGUoJ3RoaXJkTGF3JykiIGlkPSJubC1idG4tdGhpcmRMYXciIGNsYXNzPSJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIGhvdmVyOmJnLWdyYXktMjAwIj5BY3Rpb24tUmVhY3Rpb24gKDNyZCBMYXcpPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJTaW11bGF0aW9ucy5uZXd0b25MYWIuc2V0TW9kZSgnZ3Jhdml0eScpIiBpZD0ibmwtYnRuLWdyYXZpdHkiIGNsYXNzPSJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIGhvdmVyOmJnLWdyYXktMjAwIj5HcmF2aXR5IERyb3A8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icmVsYXRpdmUgdy1mdWxsIG1heC13LWxnIGgtNjQgYmctZ3JheS01MCBib3JkZXItMiBib3JkZXItZ3JheS00MDAgcm91bmRlZC1sZyBzaGFkb3ctaW5uZXIgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgb3ZlcmZsb3ctaGlkZGVuIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Y2FudmFzIGlkPSJubC1jYW52YXMiIHdpZHRoPSI1MDAiIGhlaWdodD0iMjUwIj48L2NhbnZhcz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0ibmwtY29udHJvbHMiIGNsYXNzPSJ3LWZ1bGwgbWF4LXctbWQgbXQtNCBiZy1ncmF5LTEwMCBwLTQgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWdyYXktMzAwIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9Im5sLWRlc2MiIGNsYXNzPSJtdC00IHRleHQtc20gdGV4dC1ncmF5LTYwMCBmb250LW1lZGl1bSB0ZXh0LWNlbnRlciBtYXgtdy1tZCBiZy1ibHVlLTUwIHAtMiByb3VuZGVkIGJvcmRlciBib3JkZXItYmx1ZS0xMDAiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TW9kZSgnaW5lcnRpYScpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBzZXRNb2RlOiBmdW5jdGlvbihtKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlID0gbTsKICAgICAgICAgICAgICAgICAgICBbJ2luZXJ0aWEnLCAnc2Vjb25kTGF3JywgJ3RoaXJkTGF3JywgJ2dyYXZpdHknXS5mb3JFYWNoKGsgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgbmwtYnRuLSR7a31gKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoayA9PT0gbSkgYnRuLmNsYXNzTmFtZSA9ICJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCBiZy13aGl0ZSBzaGFkb3cgdGV4dC1ibHVlLTYwMCI7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgYnRuLmNsYXNzTmFtZSA9ICJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIGhvdmVyOmJnLWdyYXktMjAwIjsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250cm9scyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdubC1jb250cm9scycpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlc2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmwtZGVzYycpOwoKICAgICAgICAgICAgICAgICAgICBpZiAobSA9PT0gJ2luZXJ0aWEnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHVjayA9IHsgeDogNTAsIHY6IDAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbHMuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9ImZsZXggZ2FwLTQganVzdGlmeS1jZW50ZXIiPjxidXR0b24gb25jbGljaz0iU2ltdWxhdGlvbnMubmV3dG9uTGFiLnB1Y2sudj01IiBjbGFzcz0icHgtNCBweS0yIGJnLWJsdWUtNjAwIHRleHQtd2hpdGUgcm91bmRlZCBmb250LWJvbGQiPlB1c2ggUHVjazwvYnV0dG9uPjxsYWJlbCBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgb25jaGFuZ2U9IlNpbXVsYXRpb25zLm5ld3RvbkxhYi5mcmljdGlvbj10aGlzLmNoZWNrZWQiPiBFbmFibGUgRnJpY3Rpb248L2xhYmVsPjwvZGl2PmA7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2MudGV4dENvbnRlbnQgPSAiMXN0IExhdzogQW4gb2JqZWN0IGluIG1vdGlvbiBzdGF5cyBpbiBtb3Rpb24gdW5sZXNzIGFjdGVkIHVwb24gYnkgYSBmb3JjZSAobGlrZSBGcmljdGlvbikuIjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG0gPT09ICdzZWNvbmRMYXcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm9ja2V0ID0geyB5OiAyMDAsIHY6IDAsIGE6IDAsIG1hc3M6IDUsIGZvcmNlOiAwIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xzLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJmbGV4IGZsZXgtY29sIGdhcC0yIj48ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+PHNwYW4gY2xhc3M9InRleHQteHMgZm9udC1ib2xkIHctMTYiPk1hc3M6PC9zcGFuPjxpbnB1dCB0eXBlPSJyYW5nZSIgbWluPSIxIiBtYXg9IjEwIiB2YWx1ZT0iNSIgY2xhc3M9ImZsZXgtMSIgb25pbnB1dD0iU2ltdWxhdGlvbnMubmV3dG9uTGFiLnJvY2tldC5tYXNzPXBhcnNlSW50KHRoaXMudmFsdWUpIj48L2Rpdj48ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+PHNwYW4gY2xhc3M9InRleHQteHMgZm9udC1ib2xkIHctMTYiPlRocnVzdDo8L3NwYW4+PGlucHV0IHR5cGU9InJhbmdlIiBtaW49IjAiIG1heD0iMTAwIiB2YWx1ZT0iMCIgY2xhc3M9ImZsZXgtMSIgb25pbnB1dD0iU2ltdWxhdGlvbnMubmV3dG9uTGFiLnJvY2tldC5mb3JjZT1wYXJzZUludCh0aGlzLnZhbHVlKSI+PC9kaXY+PC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICAgICAgZGVzYy50ZXh0Q29udGVudCA9ICIybmQgTGF3OiBGPW1hLiBJbmNyZWFzZSBUaHJ1c3QgKEZvcmNlKSBvciBkZWNyZWFzZSBNYXNzIHRvIGluY3JlYXNlIEFjY2VsZXJhdGlvbi4iOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobSA9PT0gJ3RoaXJkTGF3JykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbm5vbiA9IHsgeDogMjAwLCB2OiAwLCBtOiAxMDAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWxsID0geyB4OiAyMDAsIHY6IDAsIG06IDEwIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlyZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbHMuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBmbGV4LWNvbCBnYXAtMyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWNlbnRlciBnYXAtNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRleHQtY2VudGVyIj48c3BhbiBjbGFzcz0idGV4dC14cyBmb250LWJvbGQgYmxvY2sgdGV4dC1ncmF5LTYwMCI+Q2Fubm9uIChrZyk8L3NwYW4+PGlucHV0IHR5cGU9InJhbmdlIiBtaW49IjUwIiBtYXg9IjIwMCIgdmFsdWU9IjEwMCIgY2xhc3M9ImFjY2VudC1ncmF5LTYwMCIgb25pbnB1dD0iU2ltdWxhdGlvbnMubmV3dG9uTGFiLmNhbm5vbi5tPXBhcnNlSW50KHRoaXMudmFsdWUpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmwtY20tdmFsJykudGV4dENvbnRlbnQ9dGhpcy52YWx1ZSI+PGRpdiBpZD0ibmwtY20tdmFsIiBjbGFzcz0idGV4dC14cyBmb250LW1vbm8iPjEwMDwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LWNlbnRlciI+PHNwYW4gY2xhc3M9InRleHQteHMgZm9udC1ib2xkIGJsb2NrIHRleHQtZ3JheS02MDAiPkJhbGwgKGtnKTwvc3Bhbj48aW5wdXQgdHlwZT0icmFuZ2UiIG1pbj0iMSIgbWF4PSIyMCIgdmFsdWU9IjEwIiBjbGFzcz0iYWNjZW50LXJlZC02MDAiIG9uaW5wdXQ9IlNpbXVsYXRpb25zLm5ld3RvbkxhYi5iYWxsLm09cGFyc2VJbnQodGhpcy52YWx1ZSk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdubC1ibS12YWwnKS50ZXh0Q29udGVudD10aGlzLnZhbHVlIj48ZGl2IGlkPSJubC1ibS12YWwiIGNsYXNzPSJ0ZXh0LXhzIGZvbnQtbW9ubyI+MTA8L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IlNpbXVsYXRpb25zLm5ld3RvbkxhYi5maXJlQ2Fubm9uKCkiIGNsYXNzPSJ3LWZ1bGwgYmctcmVkLTYwMCB0ZXh0LXdoaXRlIHB5LTIgcm91bmRlZCBmb250LWJvbGQgaG92ZXI6YmctcmVkLTcwMCB0cmFuc2l0aW9uIHNoYWRvdy1tZCI+RklSRSBDQU5OT04hICgmIHJlc2V0KTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICAgICAgZGVzYy50ZXh0Q29udGVudCA9ICIzcmQgTGF3OiBBY3Rpb24tUmVhY3Rpb24uIFRoZSBjYW5ub24gZXhlcnRzIGZvcmNlIG9uIHRoZSBiYWxsIChBY3Rpb24pLCBhbmQgdGhlIGJhbGwgZXhlcnRzIGFuIGVxdWFsIGFuZCBvcHBvc2l0ZSBmb3JjZSBvbiB0aGUgY2Fubm9uIChSZWFjdGlvbi9SZWNvaWwpLiI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtID09PSAnZ3Jhdml0eScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcm9wWSA9IDYwOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyb3BWID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mZWF0aGVyWSA9IDYwOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyb3BwaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xzLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJmbGV4IGdhcC00IGp1c3RpZnktY2VudGVyIGl0ZW1zLWNlbnRlciI+PGJ1dHRvbiBvbmNsaWNrPSJTaW11bGF0aW9ucy5uZXd0b25MYWIuZHJvcCgpIiBjbGFzcz0icHgtNCBweS0yIGJnLXB1cnBsZS02MDAgdGV4dC13aGl0ZSByb3VuZGVkIGZvbnQtYm9sZCI+RHJvcDwvYnV0dG9uPjxsYWJlbCBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgb25jaGFuZ2U9IlNpbXVsYXRpb25zLm5ld3RvbkxhYi52YWN1dW09dGhpcy5jaGVja2VkIj4gVmFjdXVtIChObyBBaXIpPC9sYWJlbD48L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgICAgICBkZXNjLnRleHRDb250ZW50ID0gIkdyYXZpdHk6IEluIGEgdmFjdXVtLCBhbGwgb2JqZWN0cyBmYWxsIGF0IHRoZSBzYW1lIHJhdGUgcmVnYXJkbGVzcyBvZiBtYXNzLiBBaXIgcmVzaXN0YW5jZSBzbG93cyB0aGUgZmVhdGhlciBkb3duLiI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQoKTsKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgZmlyZUNhbm5vbjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5maXJlZCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbm5vbi54ID0gMjAwOyB0aGlzLmNhbm5vbi52ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWxsLnggPSAyMDA7IHRoaXMuYmFsbC52ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maXJlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRoaXMuZmlyZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGltcHVsc2UgPSA1MCAqIE1hdGguc3FydCh0aGlzLmJhbGwubSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWxsLnYgPSBpbXB1bHNlIC8gdGhpcy5iYWxsLm07CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW5ub24udiA9IC1pbXB1bHNlIC8gdGhpcy5jYW5ub24ubTsKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgZHJvcDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcm9wWSA9IDYwOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZHJvcFYgPSAwOyAKICAgICAgICAgICAgICAgICAgICB0aGlzLmZlYXRoZXJZID0gNjA7IAogICAgICAgICAgICAgICAgICAgIHRoaXMuZHJvcHBpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBzdGFydDogZnVuY3Rpb24oKSB7IGlmKHRoaXMuYW5pbUlkKSBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1JZCk7IHRoaXMubG9vcCgpOyB9LAoKICAgICAgICAgICAgICAgIGxvb3A6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdubC1jYW52YXMnKTsKICAgICAgICAgICAgICAgICAgICBpZighY2FudmFzKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdyA9IGNhbnZhcy53aWR0aDsgY29uc3QgaCA9IGNhbnZhcy5oZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsdyxoKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gJ2luZXJ0aWEnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZyaWN0aW9uKSB0aGlzLnB1Y2sudiAqPSAwLjk4OwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnB1Y2sueCArPSB0aGlzLnB1Y2sudjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHVjay54ID4gdykgdGhpcy5wdWNrLnggPSAtMjA7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2U1ZTdlYic7IGN0eC5maWxsUmVjdCgwLCBoLzIsIHcsIGgvMik7IC8vIEljZQogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzNzQxNTEnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5lbGxpcHNlKHRoaXMucHVjay54LCBoLzIgKyAxMCwgMjAsIDEwLCAwLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOyBjdHguZmlsbFRleHQodGhpcy5mcmljdGlvbiA/ICJGcmljdGlvbiBPTiIgOiAiRnJpY3Rpb24gT0ZGIiwgNDAsIDIwKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMubW9kZSA9PT0gJ3NlY29uZExhdycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZyA9IDAuMTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV0RiA9IHRoaXMucm9ja2V0LmZvcmNlIC0gKHRoaXMucm9ja2V0Lm1hc3MgKiBnICogMTApOyAvLyBTaW1wbGlmaWVkIGdyYXZpdHkKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb2NrZXQuYSA9IG5ldEYgLyB0aGlzLnJvY2tldC5tYXNzOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvY2tldC52ICs9IHRoaXMucm9ja2V0LmEgKiAwLjA1OwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvY2tldC55IC09IHRoaXMucm9ja2V0LnY7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvY2tldC55ID4gMjAwKSB7IHRoaXMucm9ja2V0LnkgPSAyMDA7IHRoaXMucm9ja2V0LnYgPSAwOyB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvY2tldC55IDwgLTUwKSB0aGlzLnJvY2tldC55ID0gMjUwOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNlZjQ0NDQnOyBjdHguZmlsbFJlY3Qody8yIC0gMTAsIHRoaXMucm9ja2V0LnksIDIwLCA0MCk7IC8vIFJvY2tldAogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yb2NrZXQuZm9yY2UgPiAwKSB7IGN0eC5maWxsU3R5bGUgPSAnI2Y1OWUwYic7IGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyh3LzItNSwgdGhpcy5yb2NrZXQueSs0MCk7IGN0eC5saW5lVG8ody8yKzUsIHRoaXMucm9ja2V0LnkrNDApOyBjdHgubGluZVRvKHcvMiwgdGhpcy5yb2NrZXQueSs0MCt0aGlzLnJvY2tldC5mb3JjZS8yKTsgY3R4LmZpbGwoKTsgfQogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOyBjdHguZmlsbFRleHQoYEFjY2VsOiAke3RoaXMucm9ja2V0LmEudG9GaXhlZCgyKX1gLCA0MCwgMjApOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5tb2RlID09PSAndGhpcmRMYXcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpcmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbm5vbi54ICs9IHRoaXMuY2Fubm9uLnY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJhbGwueCArPSB0aGlzLmJhbGwudjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2Fubm9uLnYgKj0gMC45NTsgLy8gRnJpY3Rpb24KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAvLyBHcm91bmQKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZDFkNWRiJzsgY3R4LmZpbGxSZWN0KDAsIGgtNDAsIHcsIDQwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJ1bGVyCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjOWNhM2FmJzsgY3R4LmxpbmVXaWR0aCA9IDE7IGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjNmI3MjgwJzsgY3R4LmZvbnQgPSAiMTBweCBBcmlhbCI7IGN0eC50ZXh0QWxpZ24gPSAiY2VudGVyIjsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCB4PTA7IHg8PXc7IHgrPTEwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc01ham9yID0geCAlIDUwID09PSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGlja0ggPSBpc01ham9yID8gMTUgOiA4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyh4LCBoLTQwKTsgY3R4LmxpbmVUbyh4LCBoLTQwK3RpY2tIKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGlzTWFqb3IpIGN0eC5maWxsVGV4dCh4LCB4LCBoLTE1KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBDYW5ub24KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3kgPSBoIC0gNjA7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBvc2l0aW9uIE1hcmtlcgogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAncmdiYSgyMzksIDY4LCA2OCwgMC41KSc7IGN0eC5zZXRMaW5lRGFzaChbNSwgM10pOyBjdHgubGluZVdpZHRoID0gMjsgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKHRoaXMuY2Fubm9uLngsIGN5ICsgMjApOyBjdHgubGluZVRvKHRoaXMuY2Fubm9uLngsIGggLSA0MCk7IGN0eC5zdHJva2UoKTsgY3R4LnNldExpbmVEYXNoKFtdKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzRiNTU2Myc7IGN0eC5maWxsUmVjdCh0aGlzLmNhbm5vbi54IC0gMjAsIGN5LCA0MCwgMjApOyAvLyBCb2R5CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyh0aGlzLmNhbm5vbi54IC0gMTUsIGN5ICsgMjAsIDgsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7IGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyh0aGlzLmNhbm5vbi54ICsgMTUsIGN5ICsgMjAsIDgsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7IC8vIFdoZWVscwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzNzQxNTEnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8odGhpcy5jYW5ub24ueCwgY3krNSk7IGN0eC5saW5lVG8odGhpcy5jYW5ub24ueCszMCwgY3ktNSk7IGN0eC5saW5lVG8odGhpcy5jYW5ub24ueCszMCwgY3krMTUpOyBjdHgubGluZVRvKHRoaXMuY2Fubm9uLngsIGN5KzE1KTsgY3R4LmZpbGwoKTsgLy8gQmFycmVsCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJhbGwKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYnggPSB0aGlzLmZpcmVkID8gdGhpcy5iYWxsLnggOiB0aGlzLmNhbm5vbi54ICsgMTA7IGNvbnN0IGJ5ID0gY3kgKyA1OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNlZjQ0NDQnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoYngsIGJ5LCB0aGlzLmJhbGwubS8yICsgMiwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5mbwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOyBjdHguZm9udCA9ICIxMnB4IEFyaWFsIjsgY3R4LnRleHRBbGlnbiA9ICJjZW50ZXIiOyBjdHguZmlsbFRleHQoYCR7dGhpcy5jYW5ub24ubX1rZ2AsIHRoaXMuY2Fubm9uLngsIGN5IC0gMTApOwogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmZpcmVkKSBjdHguZmlsbFRleHQoYCR7dGhpcy5iYWxsLm19a2dgLCBieCwgYnkgLSAxNSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm1vZGUgPT09ICdncmF2aXR5JykgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91bmRZID0gaCAtIDIwOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kcm9wcGluZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGFtbWVyIFBoeXNpY3MKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRyb3BZIDwgZ3JvdW5kWSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJvcFYgKz0gMC4yOyAvLyBHcmF2aXR5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcm9wWSArPSB0aGlzLmRyb3BWOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRyb3BZID4gZ3JvdW5kWSkgdGhpcy5kcm9wWSA9IGdyb3VuZFk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmVhdGhlciBQaHlzaWNzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52YWN1dW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZlYXRoZXJZID0gdGhpcy5kcm9wWTsgLy8gSW4gdmFjdXVtLCBpdCBmYWxscyB3aXRoIHRoZSBoYW1tZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmVhdGhlclkgPCBncm91bmRZKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmVhdGhlclkgKz0gMS41OyAvLyBTdGVhZHkgc2xvdyBtb3Rpb24gKFRlcm1pbmFsIFZlbG9jaXR5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5mZWF0aGVyWSA+IGdyb3VuZFkpIHRoaXMuZmVhdGhlclkgPSBncm91bmRZOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdG9wIHNpbXVsYXRpb24gd2hlbiBib3RoIGhpdCB0aGUgZ3JvdW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kcm9wWSA+PSBncm91bmRZICYmIHRoaXMuZmVhdGhlclkgPj0gZ3JvdW5kWSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJvcHBpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAvLyBIYW1tZXIKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjNGI1NTYzJzsgY3R4LmZpbGxSZWN0KDE1MCwgdGhpcy5kcm9wWSwgMzAsIDIwKTsgY3R4LmZpbGxSZWN0KDE2MCwgdGhpcy5kcm9wWS0zMCwgMTAsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmVhdGhlcgogICAgICAgICAgICAgICAgICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKDM1MCwgdGhpcy5mZWF0aGVyWSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yb3RhdGUoLTAuMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZic7IGN0eC5zdHJva2VTdHlsZSA9ICcjOWNhM2FmJzsgY3R4LmxpbmVXaWR0aCA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygwLCAtMjApOyBjdHgucXVhZHJhdGljQ3VydmVUbygtMTUsIC01LCAtMiwgMjApOyBjdHgubGluZVRvKDAsIDIwKTsgY3R4LmZpbGwoKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMCwgLTIwKTsgY3R4LnF1YWRyYXRpY0N1cnZlVG8oMTUsIC01LCAyLCAyMCk7IGN0eC5saW5lVG8oMCwgMjApOyBjdHguZmlsbCgpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjNmI3MjgwJzsgY3R4LmxpbmVXaWR0aCA9IDI7IGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygwLCAtMjApOyBjdHgubGluZVRvKDAsIDI1KTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGV4dAogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOyBjdHgudGV4dEFsaWduID0gImNlbnRlciI7IGN0eC5mb250ID0gImJvbGQgMTRweCBBcmlhbCI7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgiSGFtbWVyIiwgMTY1LCAyMCk7IGN0eC5maWxsVGV4dCgiRmVhdGhlciIsIDM1MCwgMjApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgudGV4dEFsaWduID0gInN0YXJ0IjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5sb29wKCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgICwKCiAgICAgICAgICAgIC8vIEVORVJHWSAmIFJBTVAgTEFCIFNJTVVMQVRJT04gKExlc3NvbiAzKQogICAgICAgICAgICBlbmVyZ3lSYW1wTGFiOiB7CiAgICAgICAgICAgICAgICBtb2RlOiAnZm9yY2VzJywgLy8gZm9yY2VzLCBlbmVyZ3kKICAgICAgICAgICAgICAgIGFuaW1JZDogbnVsbCwKICAgICAgICAgICAgICAgIGFuZ2xlOiAzMCwKICAgICAgICAgICAgICAgIG1hc3M6IDEwLAogICAgICAgICAgICAgICAgYmxvY2s6IHsgeDogMCwgdjogMCwgc2xpZGluZzogZmFsc2UgfSwKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbihjb250YWluZXIpIHsKICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBoLWZ1bGwgdy1mdWxsIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0iZm9udC1ib2xkIHRleHQtbGcgbWItMiB0ZXh0LWdyYXktNzAwIj5SYW1wIER5bmFtaWNzIExhYjwvaDM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGdhcC0yIG1iLTQgYmctZ3JheS0xMDAgcC0xIHJvdW5kZWQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iU2ltdWxhdGlvbnMuZW5lcmd5UmFtcExhYi5zZXRNb2RlKCdmb3JjZXMnKSIgaWQ9ImVybC1idG4tZm9yY2VzIiBjbGFzcz0icHgtMyBweS0xIHJvdW5kZWQgdGV4dC1zbSBmb250LWJvbGQgYmctd2hpdGUgc2hhZG93IHRleHQtYmx1ZS02MDAiPkZvcmNlIENvbXBvbmVudHM8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IlNpbXVsYXRpb25zLmVuZXJneVJhbXBMYWIuc2V0TW9kZSgnZW5lcmd5JykiIGlkPSJlcmwtYnRuLWVuZXJneSIgY2xhc3M9InB4LTMgcHktMSByb3VuZGVkIHRleHQtc20gZm9udC1ib2xkIHRleHQtZ3JheS01MDAgaG92ZXI6YmctZ3JheS0yMDAiPkVuZXJneSBUcmFuc2Zvcm1hdGlvbjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJyZWxhdGl2ZSB3LWZ1bGwgbWF4LXctbGcgaC02NCBiZy1ncmF5LTUwIGJvcmRlci0yIGJvcmRlci1ncmF5LTQwMCByb3VuZGVkLWxnIHNoYWRvdy1pbm5lciBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBvdmVyZmxvdy1oaWRkZW4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjYW52YXMgaWQ9ImVybC1jYW52YXMiIHdpZHRoPSI1MDAiIGhlaWdodD0iMjUwIj48L2NhbnZhcz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJlcmwtb3ZlcmxheSIgY2xhc3M9ImFic29sdXRlIHRvcC0yIGxlZnQtMiB0ZXh0LXhzIHRleHQtZ3JheS01MDAgcG9pbnRlci1ldmVudHMtbm9uZSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImVybC1jb250cm9scyIgY2xhc3M9InctZnVsbCBtYXgtdy1tZCBtdC00IGJnLWdyYXktMTAwIHAtNCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItZ3JheS0zMDAiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0iZXJsLWRlc2MiIGNsYXNzPSJtdC00IHRleHQtc20gdGV4dC1ncmF5LTYwMCBmb250LW1lZGl1bSB0ZXh0LWNlbnRlciBtYXgtdy1tZCBiZy1ibHVlLTUwIHAtMiByb3VuZGVkIGJvcmRlciBib3JkZXItYmx1ZS0xMDAiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TW9kZSgnZm9yY2VzJyk7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIHNldE1vZGU6IGZ1bmN0aW9uKG0pIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGUgPSBtOwogICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXRCbG9jaygpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIFsnZm9yY2VzJywgJ2VuZXJneSddLmZvckVhY2goayA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBlcmwtYnRuLSR7a31gKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoayA9PT0gbSkgYnRuLmNsYXNzTmFtZSA9ICJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCBiZy13aGl0ZSBzaGFkb3cgdGV4dC1ibHVlLTYwMCI7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgYnRuLmNsYXNzTmFtZSA9ICJweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIGhvdmVyOmJnLWdyYXktMjAwIjsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udHJvbHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXJsLWNvbnRyb2xzJyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVzYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlcmwtZGVzYycpOwoKICAgICAgICAgICAgICAgICAgICBpZiAobSA9PT0gJ2ZvcmNlcycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbHMuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBmbGV4LWNvbCBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWJldHdlZW4gdGV4dC14cyBmb250LWJvbGQiPjxzcGFuPlJhbXAgQW5nbGU8L3NwYW4+PHNwYW4gaWQ9ImVybC1hbmdsZS12YWwiPiR7dGhpcy5hbmdsZX3CsDwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIG1pbj0iMTAiIG1heD0iNjAiIHZhbHVlPSIke3RoaXMuYW5nbGV9IiBjbGFzcz0idy1mdWxsIGFjY2VudC1ibHVlLTYwMCIgb25pbnB1dD0iU2ltdWxhdGlvbnMuZW5lcmd5UmFtcExhYi5hbmdsZT1wYXJzZUludCh0aGlzLnZhbHVlKTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VybC1hbmdsZS12YWwnKS50ZXh0Q29udGVudD10aGlzLnZhbHVlKyfCsCciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIHRleHQteHMgZm9udC1ib2xkIj48c3Bhbj5NYXNzPC9zcGFuPjxzcGFuIGlkPSJlcmwtbWFzcy12YWwiPiR7dGhpcy5tYXNzfSBrZzwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIG1pbj0iNSIgbWF4PSI1MCIgdmFsdWU9IiR7dGhpcy5tYXNzfSIgY2xhc3M9InctZnVsbCBhY2NlbnQtcHVycGxlLTYwMCIgb25pbnB1dD0iU2ltdWxhdGlvbnMuZW5lcmd5UmFtcExhYi5tYXNzPXBhcnNlSW50KHRoaXMudmFsdWUpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXJsLW1hc3MtdmFsJykudGV4dENvbnRlbnQ9dGhpcy52YWx1ZSsnIGtnJyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgICAgICAgICAgZGVzYy50ZXh0Q29udGVudCA9ICJHcmF2aXR5ICgkRl9nJCkgc3BsaXRzIGludG8gUGFyYWxsZWwgKCRGX3tcXHBhcmFsbGVsfSQpIGFuZCBQZXJwZW5kaWN1bGFyICgkRl97XFxwZXJwfSQpIGNvbXBvbmVudHMuIFN0ZWVwZXIgYW5nbGUgPSBNb3JlIFBhcmFsbGVsIGZvcmNlLiI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbHMuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBmbGV4LWNvbCBnYXAtMyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWJldHdlZW4gdGV4dC14cyBmb250LWJvbGQiPjxzcGFuPlJhbXAgQW5nbGUgKEhlaWdodCk8L3NwYW4+PHNwYW4gaWQ9ImVybC1hbmdsZS12YWwiPiR7dGhpcy5hbmdsZX3CsDwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIG1pbj0iMTAiIG1heD0iNjAiIHZhbHVlPSIke3RoaXMuYW5nbGV9IiBjbGFzcz0idy1mdWxsIGFjY2VudC1ibHVlLTYwMCIgb25pbnB1dD0iU2ltdWxhdGlvbnMuZW5lcmd5UmFtcExhYi5hbmdsZT1wYXJzZUludCh0aGlzLnZhbHVlKTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VybC1hbmdsZS12YWwnKS50ZXh0Q29udGVudD10aGlzLnZhbHVlKyfCsCc7IFNpbXVsYXRpb25zLmVuZXJneVJhbXBMYWIucmVzZXRCbG9jaygpIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IlNpbXVsYXRpb25zLmVuZXJneVJhbXBMYWIudG9nZ2xlU2xpZGUoKSIgY2xhc3M9InctZnVsbCBiZy1ncmVlbi02MDAgdGV4dC13aGl0ZSBweS0yIHJvdW5kZWQgZm9udC1ib2xkIGhvdmVyOmJnLWdyZWVuLTcwMCI+U3RhcnQgLyBSZXNldCBTbGlkZTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2MudGV4dENvbnRlbnQgPSAiQ29uc2VydmF0aW9uIG9mIEVuZXJneTogQXMgdGhlIGJsb2NrIHNsaWRlcyBkb3duLCBQb3RlbnRpYWwgRW5lcmd5IChIZWlnaHQpIGNvbnZlcnRzIGludG8gS2luZXRpYyBFbmVyZ3kgKE1vdGlvbikuIjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydCgpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICByZXNldEJsb2NrOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmJsb2NrLnggPSAwOyAvLyBSZWxhdGl2ZSB0byByYW1wIHRvcAogICAgICAgICAgICAgICAgICAgIHRoaXMuYmxvY2sudiA9IDA7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5ibG9jay5zbGlkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIHRvZ2dsZVNsaWRlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ibG9jay5zbGlkaW5nICYmIHRoaXMuYmxvY2sueCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldEJsb2NrKCk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ibG9jay5zbGlkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIHN0YXJ0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmFuaW1JZCkgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltSWQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMubG9vcCgpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBsb29wOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXJsLWNhbnZhcycpOwogICAgICAgICAgICAgICAgICAgIGlmKCFjYW52YXMpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCB3ID0gY2FudmFzLndpZHRoOyBjb25zdCBoID0gY2FudmFzLmhlaWdodDsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCx3LGgpOwoKICAgICAgICAgICAgICAgICAgICAvLyBQaHlzaWNzIENvbnN0YW50cwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGcgPSA5Ljg7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2ltTGVuID0gNDAwOyAvLyBGaXhlZCBwaHlzaWNhbCBsZW5ndGgKICAgICAgICAgICAgICAgICAgICBjb25zdCBhbmdsZVJhZCA9IHRoaXMuYW5nbGUgKiBNYXRoLlBJIC8gMTgwOwoKICAgICAgICAgICAgICAgICAgICAvLyBQaHlzaWNzIFVwZGF0ZQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdlbmVyZ3knICYmIHRoaXMuYmxvY2suc2xpZGluZykgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhID0gZyAqIE1hdGguc2luKGFuZ2xlUmFkKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ibG9jay52ICs9IGEgKiAwLjA1OyAvLyBkdAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJsb2NrLnggKz0gdGhpcy5ibG9jay52ICogMC41OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ibG9jay54ID4gc2ltTGVuIC0gNTApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmxvY2sueCA9IHNpbUxlbiAtIDUwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ibG9jay5zbGlkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vIERyYXdpbmcgR2VvbWV0cnkgKFNjYWxlIHRvIGZpdCkKICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXhSYW1wSGVpZ2h0ID0gaCAtIDEwMDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXhSYW1wV2lkdGggPSB3IC0gMTAwOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBkaW1lbnNpb25zIG9mIHRoZSByYW1wIGF0IGN1cnJlbnQgYW5nbGUKICAgICAgICAgICAgICAgICAgICBjb25zdCBwaHlzVyA9IHNpbUxlbiAqIE1hdGguY29zKGFuZ2xlUmFkKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwaHlzSCA9IHNpbUxlbiAqIE1hdGguc2luKGFuZ2xlUmFkKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBEZXRlcm1pbmUgc2NhbGUgZmFjdG9yCiAgICAgICAgICAgICAgICAgICAgbGV0IHNjYWxlID0gMTsKICAgICAgICAgICAgICAgICAgICBpZiAocGh5c0ggPiBtYXhSYW1wSGVpZ2h0KSBzY2FsZSA9IG1heFJhbXBIZWlnaHQgLyBwaHlzSDsKICAgICAgICAgICAgICAgICAgICBpZiAocGh5c1cgKiBzY2FsZSA+IG1heFJhbXBXaWR0aCkgc2NhbGUgPSBtYXhSYW1wV2lkdGggLyBwaHlzVzsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjb25zdCBkcmF3TGVuID0gc2ltTGVuICogc2NhbGU7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gUG9zaXRpb25pbmcKICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFydFggPSA1MDsgCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kWSA9IGggLSA1MDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFydFkgPSBlbmRZIC0gKGRyYXdMZW4gKiBNYXRoLnNpbihhbmdsZVJhZCkpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZFggPSBzdGFydFggKyBkcmF3TGVuICogTWF0aC5jb3MoYW5nbGVSYWQpOwoKICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IFJhbXAKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNkMWQ1ZGInOyAKICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oc3RhcnRYLCBzdGFydFkpOyBjdHgubGluZVRvKGVuZFgsIGVuZFkpOyBjdHgubGluZVRvKHN0YXJ0WCwgZW5kWSk7IGN0eC5jbG9zZVBhdGgoKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzRiNTU2Myc7IGN0eC5saW5lV2lkdGggPSAyOyBjdHguc3Ryb2tlKCk7CgogICAgICAgICAgICAgICAgICAgIC8vIERyYXcgQmxvY2sKICAgICAgICAgICAgICAgICAgICBjb25zdCBzaW1EaXN0ID0gdGhpcy5tb2RlID09PSAnZm9yY2VzJyA/IHNpbUxlbiAvIDIgOiB0aGlzLmJsb2NrLng7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZHJhd0Rpc3QgPSBzaW1EaXN0ICogc2NhbGU7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvY2tYID0gc3RhcnRYICsgZHJhd0Rpc3QgKiBNYXRoLmNvcyhhbmdsZVJhZCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvY2tZID0gc3RhcnRZICsgZHJhd0Rpc3QgKiBNYXRoLnNpbihhbmdsZVJhZCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKGJsb2NrWCwgYmxvY2tZKTsKICAgICAgICAgICAgICAgICAgICBjdHgucm90YXRlKGFuZ2xlUmFkKTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmNTllMGInOyBjdHguZmlsbFJlY3QoMCwgLTMwLCA1MCwgMzApOwogICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjYjQ1MzA5JzsgY3R4LnN0cm9rZVJlY3QoMCwgLTMwLCA1MCwgMzApOwogICAgICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7CgogICAgICAgICAgICAgICAgICAgIC8vIFZlY3RvcnMgb3IgRW5lcmd5IEJhcnMKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tb2RlID09PSAnZm9yY2VzJykgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjeCA9IGJsb2NrWCArIDI1ICogTWF0aC5jb3MoYW5nbGVSYWQpICsgMTUgKiBNYXRoLnNpbihhbmdsZVJhZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN5ID0gYmxvY2tZICsgMjUgKiBNYXRoLnNpbihhbmdsZVJhZCkgLSAxNSAqIE1hdGguY29zKGFuZ2xlUmFkKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NhbGUgPSB0aGlzLm1hc3MgKiAxLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdGb3JjZSA9IHNjYWxlICogMjsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGVycCA9IGdGb3JjZSAqIE1hdGguY29zKGFuZ2xlUmFkKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyYSA9IGdGb3JjZSAqIE1hdGguc2luKGFuZ2xlUmFkKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZnIChHcmF2aXR5KQogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI2VmNDQ0NCc7IGN0eC5saW5lV2lkdGggPSAzOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oY3gsIGN5KTsgY3R4LmxpbmVUbyhjeCwgY3kgKyBnRm9yY2UpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2VmNDQ0NCc7IGN0eC5maWxsVGV4dCgiRmciLCBjeCArIDUsIGN5ICsgZ0ZvcmNlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZfcGVycAogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzNiODJmNic7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyhjeCwgY3kpOyBjdHgubGluZVRvKGN4IC0gcGVycCAqIE1hdGguc2luKGFuZ2xlUmFkKSwgY3kgKyBwZXJwICogTWF0aC5jb3MoYW5nbGVSYWQpKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRl9wYXJhCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjMjJjNTVlJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKGN4LCBjeSk7IGN0eC5saW5lVG8oY3ggKyBwYXJhICogTWF0aC5jb3MoYW5nbGVSYWQpLCBjeSArIHBhcmEgKiBNYXRoLnNpbihhbmdsZVJhZCkpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21wb25lbnRzIHRleHQKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMDAwJzsgY3R4LmZvbnQgPSAiMTJweCBBcmlhbCI7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dChgRl9wZXJwOiAke01hdGgucm91bmQodGhpcy5tYXNzICogOS44ICogTWF0aC5jb3MoYW5nbGVSYWQpKX1OYCwgMTAsIDIwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGBGX3BhcmE6ICR7TWF0aC5yb3VuZCh0aGlzLm1hc3MgKiA5LjggKiBNYXRoLnNpbihhbmdsZVJhZCkpfU5gLCAxMCwgNDApOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVuZXJneSBCYXJzCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1heFNpbUggPSBzaW1MZW4gKiBNYXRoLnNpbihhbmdsZVJhZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTaW1IID0gKHNpbUxlbiAtIHNpbURpc3QpICogTWF0aC5zaW4oYW5nbGVSYWQpOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGUgPSB0aGlzLm1hc3MgKiBnICogY3VycmVudFNpbUg7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtlID0gdGhpcy5tYXNzICogZyAqIChtYXhTaW1IIC0gY3VycmVudFNpbUgpOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWF4IFBvc3NpYmxlIEVuZXJneSBmb3IgQ1VSUkVOVCBNQVNTIChBbmdsZT02MCwgTGVuPTQwMCkKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF4UG9zc2libGVFbmVyZ3kgPSB0aGlzLm1hc3MgKiBnICogKDQwMCAqIE1hdGguc2luKDYwICogTWF0aC5QSSAvIDE4MCkpOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFyWCA9IHcgLSAxMDA7IGNvbnN0IGJhclkgPSA1MDsgY29uc3QgYmFyVyA9IDIwOyBjb25zdCBiYXJIID0gMTAwOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUEUgQmFyCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBlSCA9IChwZSAvIG1heFBvc3NpYmxlRW5lcmd5KSAqIGJhckg7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzNiODJmNic7IGN0eC5maWxsUmVjdChiYXJYLCBiYXJZICsgKGJhckggLSBwZUgpLCBiYXJXLCBwZUgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlUmVjdChiYXJYLCBiYXJZLCBiYXJXLCBiYXJIKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMDAwJzsgY3R4LmZpbGxUZXh0KCJQRSIsIGJhclgsIGJhclkgKyBiYXJIICsgMTUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gS0UgQmFyCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtlSCA9IChrZSAvIG1heFBvc3NpYmxlRW5lcmd5KSAqIGJhckg7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzIyYzU1ZSc7IGN0eC5maWxsUmVjdChiYXJYICsgNDAsIGJhclkgKyAoYmFySCAtIGtlSCksIGJhclcsIGtlSCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VSZWN0KGJhclggKyA0MCwgYmFyWSwgYmFyVywgYmFySCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzAwMCc7IGN0eC5maWxsVGV4dCgiS0UiLCBiYXJYICsgNDAsIGJhclkgKyBiYXJIICsgMTUpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5sb29wKCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgIH07CgogICAgICAgIC8vIEluaXRpYWxpemUgQXBwCiAgICAgICAgd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBBcHAuaW5pdCgpOwogICAgICAgIH07CiAgICA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+"))));</script>